<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD><TITLE></TITLE>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.07">
</HEAD>
<BODY >
<!--HEVEA command line is: hevea -O -e latexonly png.hva htmlonly cfbook -->
<!--HTMLHEAD-->
<!--ENDHTML-->
<!--PREFIX <ARG ></ARG>-->
<!--CUT DEF chapter 1 -->
<BR>
<BR>
<FONT SIZE=5>Python for Informatics: Exploring Information</FONT><BR>
<BR>
<FONT SIZE=4>Charles Severance</FONT><BR>
<BR>
Version 0.0.7<BR>
<BR>
<!--TOC chapter Preface-->

<H1><A NAME="htoc1">Chapter&nbsp;0</A>&nbsp;&nbsp;Preface</H1><!--SEC END -->

<!--TOC section Python for Informatics: Remixing an Open Book-->

<H2>Python for Informatics: Remixing an Open Book</H2><!--SEC END -->

It is quite natural for academics who are continuously told to 
``publish or perish'' to want to always create something from scratch
that is their own fresh creation. This book is an 
experiment in not starting from scratch, but instead ``re-mixing''
the book titled
<EM>Think Python: How to Think Like
a Computer Scientist</EM>
written by Allen B. Downey, Jeff Elkner and others.<BR>
<BR>
In December of 2009, I was preparing to teach
<B>SI502 - Networked Programming</B> at the University of Michigan
for the fifth semester in a row and decided it was time
to write a Python textbook that focused on exploring data
instead of understanding algorithms and abstractions.
My goal in SI502 is to teach people life-long data handling 
skills using Python. Few of my
students were planning to be be professional 
computer programmers. Instead, they
planned be librarians, managers, lawyers, biologists, economists, etc. 
who happened to want to skillfully use technology in their chosen field.<BR>
<BR>
I never seemed to find the perfect data-oriented Python
book for my course so I set out 
to write just such a book. Luckily at a faculty meeting three weeks
before I was about to start my new book from scratch over 
the holiday break, 
Dr. Atul Prakash showed me the <EM>Think Python</EM> book which he had
used to teach his Python course that semester. 
It is a well-written Computer Science text with a focus on 
short, direct explanations and ease of learning. <BR>
<BR>
The overall book structure
has been changed to get to doing data analysis problems as quickly as
possible and have a series of running examples and exercises 
about data analysis from the very beginning. <BR>
<BR>
The chapters 2-10 are similar to the <EM>Think Python</EM> book
but there have been some changes. Nearly all number-oriented
exercises have been replaced with data-oriented exercises.
Topics are presented in the order to needed to build increasingly
sophisticated data analysis solutions. Some topics like <TT>try</TT> and
<TT>except</TT> are pulled forward and presented as part of the chapter
on conditionals while other concepts like functions are left until 
they are needed to handle program complexity rather introduced 
as an early lesson in abstraction. The word ``recursion'' does not 
appear in the book at all.<BR>
<BR>
In chapters 1 and 11-15, all of the material is brand new, focusing
on real-world uses and simple examples of Python for data analysis 
including regular expressions for searching and parsing, 
automating tasks on your computer, retrieving data across 
the network, scraping web pages for data, 
using web services, parsing XML data, and creating 
and using databases using Structured Query Language.<BR>
<BR>
The ultimate goal of all of these changes is a shift from a 
Computer Science to an Informatics
focus is to only include topics into a first technology 
class that can be applied even if one chooses not to 
become a professional programmer.<BR>
<BR>
Students who find this book interesting and want to further explore
should look at Allen B. Downey's <EM>Think Python</EM> book. Because there
is a lot of overlap between the two books,
students will quickly pick up skills in the additional
areas of computing in general and computational thinking 
that are covered in <EM>Think Python</EM>.
And given that the books have a similar writing style and at times
have identical text and examples, you should be 
able to move quickly through <EM>Think Python</EM> with a minimum of effort.<BR>
<BR>
<A NAME="@default0"></A>
<A NAME="@default1"></A>
<A NAME="@default2"></A>
As the copyright holder of <EM>Think Python</EM>,
Allen has given me permission to change the book's license 
on the material from his book that remains in this book
from the
GNU Free Documentation License 
to the more recent
Creative Commons Attribution --- Share Alike
license.
This follows a general shift in open documentation licenses moving 
from the GFDL to the CC-BY-SA (i.e. Wikipedia).
Using the CC-BY-SA license maintains the book's 
strong copyleft tradition while making it even more straightforward 
for new authors to reuse this material as they see fit.<BR>
<BR>
I feel that this book serves an example of why open 
materials are so important to the future of education,
and want to thank Allen B. Downey and Cambridge University
Press for their forward looking decision to make the book available
under an open Copyright. I hope they are pleased with the 
results of my efforts and I hope that you the reader are pleased with
<EM>our</EM> collective efforts.<BR>
<BR>
I would like to thank Allen B. Downey and Lauren Cowles for their help,
patience, and guidance in dealing with and resolving the copyright 
issues around this book.<BR>
<BR>
Charles Severance<BR>
www.dr-chuck.com<BR>
Ann Arbor, MI, USA<BR>
September 9, 2013<BR>
<BR>
Charles Severance is a 
Clinical Associate Professor 
at the University of Michigan School of Information.<BR>
<BR>
<!--TOC section Preface for ``Think Python''-->

<H2>Preface for ``Think Python''</H2><!--SEC END -->

<!--TOC subsection The strange history of ``Think Python''-->

<H3>The strange history of ``Think Python''</H3><!--SEC END -->

(Allen B. Downey)<BR>
<BR>
In January 1999 I was preparing to teach an introductory programming
class in Java. I had taught it three times and I was getting
frustrated. The failure rate in the class was too high and, even for
students who succeeded, the overall level of achievement was too low.<BR>
<BR>
One of the problems I saw was the books. 
They were too big, with too much unnecessary detail about Java, and
not enough high-level guidance about how to program. And they all
suffered from the trap door effect: they would start out easy,
proceed gradually, and then somewhere around Chapter 5 the bottom would
fall out. The students would get too much new material, too fast,
and I would spend the rest of the semester picking up the pieces.<BR>
<BR>
Two weeks before the first day of classes, I decided to write my
own book. 
My goals were:
<UL><LI>Keep it short. It is better for students to read 10 pages
than not read 50 pages.<BR>
<BR>
<LI>Be careful with vocabulary. I tried to minimize the jargon
and define each term at first use.<BR>
<BR>
<LI>Build gradually. To avoid trap doors, I took the most difficult
topics and split them into a series of small steps. <BR>
<BR>
<LI>Focus on programming, not the programming language. I included
the minimum useful subset of Java and left out the rest.</UL>
I needed a title, so on a whim I chose <EM>How to Think Like
a Computer Scientist</EM>.<BR>
<BR>
My first version was rough, but it worked. Students did the reading,
and they understood enough that I could spend class time on the hard
topics, the interesting topics and (most important) letting the
students practice.<BR>
<BR>
I released the book under the GNU Free Documentation License,
which allows users to copy, modify, and distribute the book.<BR>
<BR>
<A NAME="@default3"></A>
<A NAME="@default4"></A><BR>
<BR>
What happened next is the cool part. Jeff Elkner, a high school
teacher in Virginia, adopted my book and translated it into
Python. He sent me a copy of his translation, and I had the
unusual experience of learning Python by reading my own book.<BR>
<BR>
Jeff and I revised the book, incorporated a case study by
Chris Meyers, and in 2001 we released <EM>How to Think Like
a Computer Scientist: Learning with Python</EM>, also under
the GNU Free Documentation License.
As Green Tea Press, I published the book and started selling
hard copies through Amazon.com and college book stores.
Other books from Green Tea Press are available at
<TT>greenteapress.com</TT>.<BR>
<BR>
In 2003 I started teaching at Olin College and I got to teach
Python for the first time. The contrast with Java was striking.
Students struggled less, learned more, worked on more interesting
projects, and generally had a lot more fun.<BR>
<BR>
Over the last five years I have continued to develop the book,
correcting errors, improving some of the examples and
adding material, especially exercises. In 2008 I started work
on a major revision---at the same time, I was
contacted by an editor at Cambridge University Press who
was interested in publishing the next edition. Good timing!<BR>
<BR>
I hope you enjoy working with this book, and that it helps
you learn to program and think, at least a little bit, like
a computer scientist.<BR>
<BR>
<!--TOC subsection Acknowledgements for ``Think Python''-->

<H3>Acknowledgements for ``Think Python''</H3><!--SEC END -->

(Allen B. Downey)<BR>
<BR>
First and most importantly, I thank Jeff Elkner, who
translated my Java book into Python, which got this project
started and introduced me to what has turned out to be my
favorite language.<BR>
<BR>
I also thank Chris Meyers, who contributed several sections
to <EM>How to Think Like a Computer Scientist</EM>.<BR>
<BR>
And I thank the Free Software Foundation for developing
the GNU Free Documentation License, which helped make
my collaboration with Jeff and Chris possible.<BR>
<BR>
<A NAME="@default5"></A>
<A NAME="@default6"></A><BR>
<BR>
I also thank the editors at Lulu who worked on
<EM>How to Think Like a Computer Scientist</EM>.<BR>
<BR>
I thank all the students who worked with earlier
versions of this book and all the contributors (listed
in an Appendix) who sent in corrections and suggestions.<BR>
<BR>
And I thank my wife, Lisa, for her work on this book, and Green
Tea Press, and everything else, too.<BR>
<BR>
Allen B. Downey <BR>
Needham MA<BR>
Allen Downey is an Associate Professor of Computer Science at 
the Franklin W. Olin College of Engineering.<BR>
<BR>
<!--TOC chapter Why should you learn to write programs?-->

<H1><A NAME="htoc2">Chapter&nbsp;1</A>&nbsp;&nbsp;Why should you learn to write programs?</H1><!--SEC END -->

Writing programs (or programming) is a very creative 
and rewarding activity. You can write programs for 
many reasons ranging from making your living to solving
a difficult data analysis problem to having fun to helping
someone else solve a problem. This book assumes that 
<EM>everyone</EM> needs to know how to program and that once 
you know how to program, you will figure out what you want 
to do with your newfound skills. <BR>
<BR>
We are surrounded in our daily lives with computers ranging 
from laptops to cell phones. We can think of these computers
as our ``personal assistants'' who can take care of many things
on our behalf. The hardware in our current-day computers 
is essentially built to continuously ask us the question, 
``What would you like me to do next?''.<BR>
<DIV ALIGN=center><IMG SRC="cfbook001.png"></DIV>
<BR>
Programmers add an operating system and a set of applications
to the hardware and we end up with a Personal Digital
Assistant that is quite helpful and capable of helping
many different things.<BR>
<BR>
Our computers are fast and have vast amounts of memory and 
could be very helpful to us if we only knew the language to
speak to explain to the computer what we would like it to 
``do next''. If we knew this language we could tell the 
computer to do tasks on our behalf that were repetitive. 
Interestingly, the kinds of things computers can do best
are often the kinds of things that we humans find boring
and mind-numbing.<BR>
<BR>
For example, look at the first three paragraphs of this
chapter and tell me the most commonly used word and how
many times the word is used. While you were able to read
and understand the words in a few seconds, counting them
is almost painful because it is not the kind of problem 
that human minds are designed to solve. For a computer
the opposite is true, reading and understanding text 
from a piece of paper is hard for a computer to do 
but counting the words and telling you how many times
the most used word was used is very easy for the
computer:
<PRE><FONT SIZE=4 COLOR=blue>
python words.py
Enter file:words.txt
to 16
</FONT></PRE><FONT COLOR=black>Our ``personal information analysis assistant'' quickly 
told us that the word ``to'' was used sixteen times in the
first three paragraphs of this chapter.<BR>
<BR>
This very fact that computers are good at things 
that humans are not is why you need to become
skilled at talking ``computer language''. Once you learn
this new language, you can delegate mundane tasks
to your partner (the computer), leaving more time 
for you to do the 
things that you are uniquely suited for. You bring 
creativity, intuition, and inventiveness to this
partnership. </FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Creativity and motivation</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc3">1.1</A>&nbsp;&nbsp;Creativity and motivation</FONT></H2><!--SEC END -->

<FONT COLOR=black>While this book is not intended for professional programmers, professional
programming can be a very rewarding job both financially and personally.
Building useful, elegant, and clever programs for others to use is a very
creative activity. Your computer or Personal Digital Assistant (PDA) 
usually contains many different programs from many different groups of 
programmers, each competing for your attention and interest. They try 
their best to meet your needs and give you a great user experience in the
process. In some situations, when you choose a piece of software, the 
programmers are directly compensated because of your choice.<BR>
<BR>
If we think of programs as the creative output of groups of programmers,
perhaps the following figure is a more sensible version of our PDA:<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook002.png"></FONT></DIV><FONT COLOR=black>
<BR>
For now, our primary motivation is not to make money or please end-users, but
instead for us to be more productive in handling the data and 
information that we will encounter in our lives.
When you first start, you will be both the programmer and end-user of
your programs. As you gain skill as a programmer and
programming feels more creative to you, your thoughts may turn
toward developing programs for others.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Computer hardware architecture</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc4">1.2</A>&nbsp;&nbsp;Computer hardware architecture</FONT></H2><!--SEC END -->

<A NAME="@default7"></A>
<A NAME="@default8"></A>
<FONT COLOR=black>Before we start learning the language we 
speak to give instructions to computers to 
develop software, we need to learn a small amount about 
how computers are built. If you were to take
apart your computer or cell phone and look deep
inside, you would find the following parts:<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook003.png"></FONT></DIV><FONT COLOR=black>
<BR>
The high-level definitions of these parts are as follows:
</FONT><UL><LI><FONT COLOR=black>The <B>Central Processing Unit</B> (or CPU) is 
that part of the computer that is built to be obsessed 
with ``what is next?''. If your computer is rated
at 3.0 Gigahertz, it means that the CPU will ask ``What next?''
three billion times per second. You are going to have to 
learn how to talk fast to keep up with the CPU.</FONT><BR>
<BR>
<LI><FONT COLOR=black>The <B>Main Memory</B> is used to store information
that the CPU needs in a hurry. The main memory is nearly as 
fast as the CPU. But the information stored in the main
memory vanishes when the computer is turned off.</FONT><BR>
<BR>
<LI><FONT COLOR=black>The <B>Secondary Memory</B> is also used to store
information, but it is much slower than the main memory.
The advantage of the secondary memory is that it can
store information even when there is no power to the
computer. Examples of secondary memory are disk drives
or flash memory (typically found in USB sticks and portable
music players).</FONT><BR>
<BR>
<LI><FONT COLOR=black>The <B>Input and Output Devices</B> are simply our
screen, keyboard, mouse, microphone, speaker, touchpad, etc. 
They are all of the ways we interact with the computer.</FONT><BR>
<BR>
<LI><FONT COLOR=black>These days, most computers also have a
<B>Network Connection</B> to retrieve information over a network.
We can think of the network as a very slow place to store and
retrieve data that might not always be ``up''. So in a sense,
the network is a slower and at times unreliable form of
<B>Secondary Memory</B></FONT></UL>
<FONT COLOR=black>While most of the detail of how these components work is best left 
to computer builders, it helps to have some terminology
so we can talk about these different parts as we write our programs.<BR>
<BR>
As a programmer, your job is to use and orchestrate 
each of these resources to solve the problem that you need solving
and analyze the data you need. As a programmer you will 
mostly be ``talking'' to the CPU and telling it what to 
do next. Sometimes you will tell the CPU to use the main memory,
secondary memory, network, or the input/output devices.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook004.png"></FONT></DIV><FONT COLOR=black>
<BR>
You need to be the person who answers the CPU's ``What next?'' 
question. But it would be very uncomfortable to shrink you 
down to 5mm tall and insert you into the computer just so you 
could issue a command three billion times per second. So instead,
you must write down your instructions in advance.
We call these stored instructions a <B>program</B> and the act 
of writing these instructions down and getting the instructions to 
be correct <B>programming</B>.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Understanding programming</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc5">1.3</A>&nbsp;&nbsp;Understanding programming</FONT></H2><!--SEC END -->

<FONT COLOR=black>In the rest of this book, we will try to turn you into a person
who is skilled in the art of programming. In the end you will be a 
<B>programmer</B> --- perhaps not a professional programmer but 
at least you will have the skills to look at a data/information
analysis problem and develop a program to solve the problem.<BR>
<BR>
<A NAME="@default9"></A><BR>
<BR>
In a sense, you need two skills to be a programmer:
</FONT><UL><LI><FONT COLOR=black>First you need to know the programming language (Python) -
you need to know the vocabulary and the grammar. You need to be able 
spell the words in this new language properly and how to construct 
well-formed ``sentences'' in this new languages.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Second you need to ``tell a story''. In writing a story,
you combine words and sentences to convey an idea to the reader. 
There is a skill and art in constructing the story and skill in
story writing is improved by doing some writing and getting some
feedback. In programming, our program is the ``story'' and the 
problem you are trying to solve is the ``idea''.</FONT></UL>
<FONT COLOR=black>Once you learn one programming language such as Python, you will 
find it much easier to learn a second programming language such
as JavaScript or C++. The new programming language has very different 
vocabulary and grammar but once you learn problem solving skills, 
they will be the same across all programming languages.<BR>
<BR>
You will learn the ``vocabulary'' and ``sentences'' of Python pretty quickly.
It will take longer for you to be able to write a coherent program
to solve a brand new problem. We teach programming much like we teach
writing. We start reading and explaining programs and then we write 
simple programs and then write increasingly complex programs over time.
At some point you ``get your muse'' and see the patterns on your own
and can see more naturally how to take a problem and 
write a program that solves that problem. And once you get 
to that point, programming becomes a very pleasant and creative process. <BR>
<BR>
We start with the vocabulary and structure of Python programs. Be patient
as the simple examples remind you of when you started reading for the first
time. </FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Words and sentences</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc6">1.4</A>&nbsp;&nbsp;Words and sentences</FONT></H2><!--SEC END -->

<A NAME="@default10"></A>
<A NAME="@default11"></A>
<FONT COLOR=black>Unlike human languages, the Python vocabulary is actually pretty small.
We call this ``vocabulary'' the ``reserved words''. These are words that
have very special meaning to Python. When Python sees these words in 
a Python program, they have one and only one meaning to Python. Later
as you write programs you will make your own words that have meaning to 
you called <B>variables</B>. You will have great latitude in choosing
your names for your variables, but you cannot use any of Python's 
reserved words as a name for a variable.<BR>
<BR>
In a sense, when we train a dog, we would use special words like,
``sit'', ``stay'', and ``fetch''. Also when you talk to a dog and
don't use any of the reserved words, they just look at you with a 
quizzical look on their faces until you say a reserved word. 
For example, if you say, 
``I wish more people would walk to improve their overall health.'', 
what most dogs likely hear is,
``blah blah blah <B>walk</B> blah blah blah blah.''
That is because ``walk'' is a reserved word in dog language. Many
might suggest that the language between humans and cats has no
reserved words<SUP><A NAME="text1" HREF="#note1">1</A></SUP>.<BR>
<BR>
The reserved words in the language where humans talk to 
Python incudes the following:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
and   del   for   is   raise 
assert   elif   from   lambda   return 
break   else   global   not   try 
class   except   if   or   while 
continue   exec   import   pass   yield 
def   ﬁnally   in   print 
</FONT></PRE><FONT COLOR=black>That is it, and unlike a dog, Python is already completely trained.
When you say ``try'', Python will try every time you say it without
fail.<BR>
<BR>
We will learn these reserved words and how they are used in good time,
but for now we will focus on the Python equivalent of ``speak'' (in 
human to dog language). The nice thing about telling Python to speak
is that we can even tell it what to say by giving it a message in quotes:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
print 'Hello world!'
</FONT></PRE>
<FONT COLOR=black>And we have even written our first syntactically correct Python sentence.
Our sentence starts with the reserved word <B>print</B> followed
by a string of text of our choosing enclosed in single quotes.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Conversing with Python</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc7">1.5</A>&nbsp;&nbsp;Conversing with Python</FONT></H2><!--SEC END -->

<FONT COLOR=black>Now that we have a word and a simple sentence that we know in Python,
we need to know how to start a conversation with Python to test 
our new language skills.<BR>
<BR>
Before you can converse with Python, you must first install the Python
software on your computer and learn how to start Python on your 
computer. That is too much detail for this chapter so I suggest
that you consult <TT>www.pythonlearn.com</TT> where I have detailed
instructions and screencasts of setting up and starting Python 
on Macintosh and Windows systems. At some point, you will be in 
a terminal or command window and you will type <B>python</B> and 
the Python interpreter will start executing in interactive mode:
and appear somewhat as follows:
</FONT><A NAME="@default12"></A>
<PRE><FONT SIZE=4 COLOR=blue>
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>The <TT>&gt;&gt;&gt;</TT> prompt is the Python interpreter's way of asking you, ``What
do you want me to do next?''. Python is ready to have a conversation with
you. All you have to know is how to speak the Python language and you 
can have a conversation.<BR>
<BR>
Lets say for example that you did not know even the simplest Python language
words or sentences. You might want to use the standard line that astronauts 
use when they land on a far away planet and try to speak with the inhabitants
of the planet:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; I come in peace, please take me to your leader
  File "&lt;stdin&gt;", line 1
    I come in peace, please take me to your leader
         ^
SyntaxError: invalid syntax
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>This is not going so well. Unless you think of something quickly,
the inhabitants of the planet are likely to stab you with their spears, 
put you on a spit, roast you over a fire, and eat you for dinner.<BR>
<BR>
Luckily you brought a copy of this book on your travels and you thumb to
this very page and try again:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print 'Hello world!'
Hello world!
</FONT></PRE><FONT COLOR=black>This is looking much better so you try to communicate some
more:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print 'You must be the legendary god that comes from the sky'
You must be the legendary god that comes from the sky
&gt;&gt;&gt; print 'We have been waiting for you for a long time'
We have been waiting for you for a long time
&gt;&gt;&gt; print 'Our legend says you will be very tasty with mustard'
Our legend says you will be very tasty with mustard
&gt;&gt;&gt; print 'We will have a feast tonight unless you say
  File "&lt;stdin&gt;", line 1
    print 'We will have a feast tonight unless you say
                                                     ^
SyntaxError: EOL while scanning string literal
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>The conversation was going so well for a while and then you
made the tiniest mistake using the Python language and Python 
brought the spears back out.<BR>
<BR>
At this point, you should also realize that while Python 
is amazingly complex and powerful and very picky about 
the syntax you use to communicate with it, Python is <EM>not</EM> intelligent. You are having a conversation with 
yourself but using proper syntax.<BR>
<BR>
In a sense when you use a program written by someone else
the conversation is between you and those other
programmers with Python acting as an intermediary. Python
is a way for the creators of programs to express how the 
conversation is supposed to proceed. And
in just a few more chapters, you will be one of those
programmers using Python to talk to the users of your program.<BR>
<BR>
Before we leave our first conversation with the Python 
interpreter, you should probably know the proper way
to say ``good-bye'' when interacting with the inhabitants
of Planet Python:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; good-bye
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
NameError: name 'good' is not defined

&gt;&gt;&gt; if you don't mind, I need to leave
  File "&lt;stdin&gt;", line 1
    if you don't mind, I need to leave
             ^
SyntaxError: invalid syntax

&gt;&gt;&gt; quit()
</FONT></PRE><FONT COLOR=black>You will notice that the error is different for the first two
incorrect attempts. The second error is different because 
<B>if</B> is a reserved word and Python saw the reserved word
and thought we were trying to say something but got the syntax
of the sentence wrong.<BR>
<BR>
The proper way to say ``good-bye'' to Python is to enter 
<B>quit()</B> at the interactive chevron <TT>&gt;&gt;&gt;</TT> prompt.
It would have probably taken you quite a while to guess that 
one so having a book handy probably will turn out 
to be helpful.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Terminology: interpreter and compiler</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc8">1.6</A>&nbsp;&nbsp;Terminology: interpreter and compiler</FONT></H2><!--SEC END -->

<FONT COLOR=black>Python is a <B>high-level</B> language intended to be relatively
straightforward for humans to read and write and for computers
to read and process. Other high-level languages include: Java, C++,
PHP, Ruby, Basic, Perl, JavaScript, and many more. The actual hardware
inside the Central Processing Unit (CPU) does not understand any
of these high level languages.<BR>
<BR>
The CPU understands a language we call <B>machine-language</B>. Machine
language is very simple and frankly very tiresome to write because it 
is represented all in zeros and ones:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
01010001110100100101010000001111
11100110000011101010010101101101
...
</FONT></PRE><FONT COLOR=black>Machine language seems quite simple on the surface given that there 
are only zeros and ones, but its syntax is even more complex
and far more intricate than Python. So very few programmers ever write
machine language. Instead we build various translators to allow
programmers to write in high level languages like Python or JavaScript
and these translators convert the programs to machine language for actual
execution by the CPU.<BR>
<BR>
Since machine language is tied to the computer hardware, machine language
is not <B>portable</B> across different types of hardware. Programs written in 
high-level languages can be moved between different computers by using a 
different interpreter on the new machine or re-compiling the code to create
a machine language version of the program for the new machine.<BR>
<BR>
These programming language translators fall into two general categories:
(1) interpreters and (2) compilers.<BR>
<BR>
An <B>interpreter</B> reads the source code of the program as written by the
programmer, parses the source code, and interprets the instructions on-the-fly.
Python is an interpreter and when we are running Python interactively, 
we can type a line of Python (a sentence) and Python processes it immediately
and is ready for us to type another line of Python. <BR>
<BR>
Some of the lines of Python tell Python that you want it to remember some 
value for later. We need to pick a name for that value to be remembered and
we can use that symbolic name to retrieve the value later. We use the 
term <B>variable</B> to refer to the labels we use to refer to this stored data.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; x = 6
&gt;&gt;&gt; print x
6
&gt;&gt;&gt; y = x * 7
&gt;&gt;&gt; print y
42
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>In this example, we ask Python to remember the value six and use the label <B>x</B>
so we can retrieve the value later. We verify that Python has actually remembered
the value using <B>print</B>. Then we ask Python to retrieve <B>x</B> and multiply
it by seven and put the newly-computed value in <B>y</B>. Then we ask Python to print out
the value currently in <B>y</B>.<BR>
<BR>
Even though we are typing these commands into Python one line at a time, Python
is treating them as an ordered sequence of statements with later statements able
to retrieve data created in earlier statements. We are writing our first 
simple paragraph with four sentences in a logical and meaningful order.<BR>
<BR>
It is the nature of an <B>interpreter</B> to be able to have an interactive conversation
as shown above. A <B>compiler</B> needs to be handed the entire program in a file, and then 
it runs a process to translate the high level source code into machine language
and then the compiler puts the resulting machine language into a file for later
execution.<BR>
<BR>
If you have a Windows system, often these executable machine language programs have a
suffix of ``.exe'' or ``.dll'' which stand for ``executable'' and ``dynamically loadable
library'' respectively. In Linux and Macintosh there is no suffix that uniquely marks
a file as executable.<BR>
<BR>
If you were to open an executable file in a text editor, it would look 
completely crazy and be unreadable:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
^?ELF^A^A^A^@^@^@^@^@^@^@^@^@^B^@^C^@^A^@^@^@\xa0\x82
^D^H4^@^@^@\x90^]^@^@^@^@^@^@4^@ ^@^G^@(^@$^@!^@^F^@
^@^@4^@^@^@4\x80^D^H4\x80^D^H\xe0^@^@^@\xe0^@^@^@^E
^@^@^@^D^@^@^@^C^@^@^@^T^A^@^@^T\x81^D^H^T\x81^D^H^S
^@^@^@^S^@^@^@^D^@^@^@^A^@^@^@^A\^D^HQVhT\x83^D^H\xe8
....
</FONT></PRE><FONT COLOR=black>It is not easy to read or write machine language so it is nice that we have
<B>interpreters</B> and <B>compilers</B> that allow us to write in a high-level
language like Python or C.<BR>
<BR>
Now at this point in our discussion of compilers and interpreters, you should 
be wondering a bit about the Python interpreter itself. What language is 
it written in? Is it written in a compiled language? When we type
``python'', what exactly is happening?<BR>
<BR>
The Python interpreter is written in a high level language called ``C''. 
You can look at the actual source code for the Python interpreter by
going to <TT>www.python.org</TT> and working your way to their source code.
So Python is a program itself and it is compiled into machine code and
when you installed Python on your computer (or the vendor installed it),
you copied a machine-code copy of the translated Python program onto your
system. In Windows the executable machine code for Python itself is likely
in a file with a name like:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
C:\Python27\python.exe
</FONT></PRE><FONT COLOR=black>That is more than you really need to know to be a Python programmer, but
sometimes it pays to answer those little nagging questions right at 
the beginning.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Writing a program</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc9">1.7</A>&nbsp;&nbsp;Writing a program</FONT></H2><!--SEC END -->

<FONT COLOR=black>Typing commands into the Python interpreter is a great way to experiment 
with Python’s features, but it is not recommended for solving more complex problems.<BR>
<BR>
When we want to write a program, 
we use a text editor to write the Python instructions into a file,
which is called a <B>script</B>. By
convention, Python scripts have names that end with <TT>.py</TT>.<BR>
<BR>
<A NAME="@default13"></A><BR>
<BR>
To execute the script, you have to tell the Python interpreter 
the name of the file. In a UNIX or Windows command window, 
you would type <TT>python hello.py</TT> as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
csev$ cat hello.py
print 'Hello world!'
csev$ python hello.py
Hello world!
csev$
</FONT></PRE><FONT COLOR=black>The ``csev$'' is the operating system prompt, and the ``cat hello.py'' is 
showing us that the file ``hello.py'' has a one line Python program to print
a string.<BR>
<BR>
We call the Python interpreter and tell it to read its source code from
the file ``hello.py'' instead of prompting us for lines of Python code
interactively.<BR>
<BR>
You will notice that there was no need to have <B>quit()</B> at the end of
the Python program in the file. When Python is reading your source code
form a file, it knows to stop when it reaches the end of the file.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>What is a program?</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc10">1.8</A>&nbsp;&nbsp;What is a program?</FONT></H2><!--SEC END -->

<FONT COLOR=black>The definition of a <B>program</B> at its most basic is a sequence
of Python statements that have been crafted to do something.
Even our simple <B>hello.py</B> script is a program. It is a one-line
program and is not particularly useful, but in the strictest definition,
it is a Python program.<BR>
<BR>
It might be easiest to understand what a program is by thinking about a problem 
that a program might be built to solve, and then looking at a program
that would solve that problem.<BR>
<BR>
Lets say you are doing Social Computing research on Facebook posts and 
you are interested in the most frequently used word in a series of posts.
You could print out the stream of facebook posts and pore over the text
looking for the most common word, but that would take a long time and be very 
mistake prone. You would be smart to write a Python program to handle the
task quickly and accurately so you can spend the weekend doing something 
fun.<BR>
<BR>
For example look at the following text about a clown and a car. Look at the 
text and figure out the most common word and how many times it occurs.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
the clown ran after the car and the car ran into the tent 
and the tent fell down on the clown and the car 
</FONT></PRE><FONT COLOR=black>Then imagine that you are doing this task looking at millions of lines of 
text. Frankly it would be quicker for you to learn Python and write a 
Python program to count the words than it would be to manually 
scan the words.<BR>
<BR>
The even better news is that I already came up with a simple program to 
find the most common word in a text file. I wrote it,
tested it, and now I am giving it to you to use so you can save some time.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
name = raw_input('Enter file:')
handle = open(name, 'r')
text = handle.read()
words = text.split()
counts = dict()

for word in words:
   counts[word] = counts.get(word,0) + 1

bigcount = None
bigword = None
for word,count in counts.items():
    if bigcount is None or count &gt; bigcount:
        bigword = word
        bigcount = count

print bigword, bigcount
</FONT></PRE><FONT COLOR=black>You don't even need to know Python to use this program. You will need to get through 
Chapter 10 of this book to fully understand the awesome Python techniques that were
used to make the program. You are the end user, you simply use the program and marvel
at its cleverness and how it saved you so much manual effort.
You simply type the code 
into a file called <B>words.py</B> and run it or you download the source 
code from <TT>http://www.pythonlearn.com/code/</TT> and run it.<BR>
<BR>
<A NAME="@default14"></A>
This is a good example of how Python and the Python language are acting as an intermediary
between you (the end-user) and me (the programmer). Python is a way for us to exchange useful
instruction sequences (i.e. programs) in a common language that can be used by anyone who 
installs Python on their computer. So neither of us are talking <EM>to Python</EM>,
instead we are communicating with each other <EM>through</EM> Python.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>The building blocks of programs</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc11">1.9</A>&nbsp;&nbsp;The building blocks of programs</FONT></H2><!--SEC END -->

<FONT COLOR=black>In the next few chapters, we will learn more about the vocabulary, sentence structure,
paragraph structure, and story structure of Python. We will learn about the powerful
capabilities of Python and how to compose those capabilities together to create useful
programs.<BR>
<BR>
There are some low-level conceptual patterns that we use to construct programs. These
constructs are not just for Python programs, they are part of every programming language
from machine language up to the high-level languages.
</FONT><DL COMPACT=compact><DT><FONT COLOR=black><B>input:</B></FONT><DD><FONT COLOR=black> Get data from the the ``outside world''. This might be 
reading data from a file, or even some kind of sensor like 
a microphone or GPS. In our initial programs, our input will come from the user
typing data on the keyboard.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>output:</B></FONT><DD><FONT COLOR=black> Display the results of the program on a screen
or store them in a file or perhaps write them to a device like a
speaker to play music or speak text.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>sequential execution:</B></FONT><DD><FONT COLOR=black> Perform statements one after
another in the order they are encountered in the script.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>conditional execution:</B></FONT><DD><FONT COLOR=black> Check for certain conditions and
execute or skip a sequence of statements.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>repeated execution:</B></FONT><DD><FONT COLOR=black> Perform some set of statements 
repeatedly, usually with
some variation.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>reuse:</B></FONT><DD><FONT COLOR=black> Write a set of instructions once and give them a name
and then reuse those instructions as needed throughout your program.</FONT></DL>
<FONT COLOR=black>It sounds almost too simple to be true and of course it is never
so simple. It is like saying that walking is simply
``putting one foot in front of the other''. The ``art'' 
of writing a program is composing and weaving these
basic elements together many times over to produce something
that is useful to its users.<BR>
<BR>
The word counting program above directly uses all of 
these patterns except for one.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>What could possibly go wrong?</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc12">1.10</A>&nbsp;&nbsp;What could possibly go wrong?</FONT></H2><!--SEC END -->

<FONT COLOR=black>As we saw in our earliest conversations with Python, we must
communicate very precisely when we write Python code. The smallest
deviation or mistake will cause Python to give up looking at your
program.<BR>
<BR>
Beginning programmers often take the fact that Python leaves no
room for errors as evidence that Python is mean, hateful and cruel.
While Python seems to like everyone else, Python knows them 
personally and holds a grudge against them. Because of this grudge,
Python takes our perfectly written programs and rejects them as 
``unfit'' just to torment us.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; primt 'Hello world!'
  File "&lt;stdin&gt;", line 1
    primt 'Hello world!'
                       ^
SyntaxError: invalid syntax
&gt;&gt;&gt; primt 'Hello world'
  File "&lt;stdin&gt;", line 1
    primt 'Hello world'
                      ^
SyntaxError: invalid syntax
&gt;&gt;&gt; I hate you Python!
  File "&lt;stdin&gt;", line 1
    I hate you Python!
         ^
SyntaxError: invalid syntax
&gt;&gt;&gt; if you come out of there, I would teach you a lesson
  File "&lt;stdin&gt;", line 1
    if you come out of there, I would teach you a lesson
              ^
SyntaxError: invalid syntax
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>There is little to be gained by arguing with Python. It is a tool,
it has no emotion and it is happy and ready to serve you whenever you
need it. Its error messages sound harsh, but they are just Python's
call for help. It has looked at what you typed, and it simply cannot
understand what you have entered.<BR>
<BR>
Python is much more like a dog, loving you unconditionally, having a few
key words that it understands, looking you with a sweet look on its
face (<TT>&gt;&gt;&gt;</TT>) and waiting for you to say something it understands.
When Python says ``SyntaxError: invalid syntax'', it is simply wagging
its tail and saying, ``You seemed to say something but I just don't
understand what you meant, but please keep talking to me (<TT>&gt;&gt;&gt;</TT>).''<BR>
<BR>
As your programs become increasingly sophisticated, you will encounter three 
general types of errors:
</FONT><DL COMPACT=compact><DT><FONT COLOR=black><B>Syntax errors:</B></FONT><DD><FONT COLOR=black> These are the first errors you will make and the easiest
to fix. A syntax error means that you have violated the ``grammar'' rules of Python.
Python does its best to point right at the line and character where 
it noticed it was confused. The only tricky bit of syntax errors is that sometimes
the mistake that needs fixing is actually earlier in the program than where Python
<EM>noticed</EM> it was confused. So the line and character that Python indicates in 
a syntax error may just be a starting point for your investigation.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>Logic errors:</B></FONT><DD><FONT COLOR=black> A logic error is when your program has good syntax but there is a mistake 
in the order of the statements or perhaps a mistake in how the statements relate to one another.
A good example of a logic error might be, ``take a drink from your water bottle, put it 
in your backpack, walk to the library, and then put the top back on the bottle.''</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>Semantic errors:</B></FONT><DD><FONT COLOR=black> A semantic error is when your description of the steps to take 
is syntactically perfect and in the right order, but there is simply a mistake in 
the program. The program is perfectly correct but it does not do what
you <EM>intended</EM> for it to do. A simple example would
be if you were giving a person directions to a restaurant and said, ``... when you reach
the intersection with the gas station, turn left and go one mile and the restaurant
is a red building on your left.''. Your friend is very late and calls you to tell you that
they are on a farm and walking around behind a barn, with no sign of a restaurant. 
The you say ``did you turn left or right gas station?'' and 
they say, ``I followed your directions perfectly, I have 
them written down, it says turn left and go one mile at the gas station.''. Then you say,
``I am very sorry, because while my instructions were syntactically correct, they 
sadly contained a small but undetected semantic error.''. </FONT></DL>
<FONT COLOR=black>Again in all three types of errors, Python is merely trying its hardest to 
do exactly what you have asked.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>The learning journey</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc13">1.11</A>&nbsp;&nbsp;The learning journey</FONT></H2><!--SEC END -->

<FONT COLOR=black>As you progress through the rest of the book, don't be afraid if the concepts 
don't seem to fit together well the first time. When you were learning to speak, 
it was not a problem for your first few years you just made cute gurgling noises.
And it was OK if it took six months for you to move from simple vocabulary to 
simple sentences and took 5-6 more years to move from sentences to paragraphs, and a
few more years to be able to write an interesting complete short story on your own.<BR>
<BR>
We want you to learn Python much more rapidly, so we teach it all at the same time
over the next few chapters. 
But it is like learning a new language that takes time to absorb and understand
before it feels natural.
That leads to some confusion as we visit and revisit
topics to try to get you to see the big picture while we are defining the tiny
fragments that make up the big picture. While the book is written linearly and
if you are taking a course, it will progress in a linear fashion, don't hesitate
to be very non-linear in how you approach the material. Look forwards and backwards
and read with a light touch. By skimming more advanced material without 
fully understanding the details, you can get a better understanding of the ``why?'' 
of programming. By reviewing previous material and even re-doing earlier 
exercises, you will realize that you actually learned a lot of material even 
if the material you are currently staring at seems a bit impenetrable.<BR>
<BR>
Usually when you are learning your first programming language, there are a few
wonderful ``Ah-Hah!'' moments where you can look up from pounding away at some rock
with a hammer and chisel and step away and see that you are indeed building 
a beautiful sculpture.<BR>
<BR>
If something seems particularly hard, there is usually no value in staying up all 
night and staring at it. Take a break, take a nap, have a snack, explain what you 
are having a problem with to someone (or perhaps your dog), and then come back it with
fresh eyes. I assure you that once you learn the programming concepts in the book
you will look back and see that it was all really easy and elegant and it simply 
took you a bit of time to absorb it.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc14">1.12</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>bug:</B></FONT><DD><FONT COLOR=black> An error in a program.
</FONT><A NAME="@default15"></A><BR>
<BR>
<DT><FONT COLOR=black><B>central processing unit:</B></FONT><DD><FONT COLOR=black> The heart of any computer. It is what
runs the software that we write; also called ``CPU'' or ``the processor''.
</FONT><A NAME="@default16"></A>
<A NAME="@default17"></A><BR>
<BR>
<DT><FONT COLOR=black><B>compile:</B></FONT><DD><FONT COLOR=black> To translate a program written in a high-level language
into a low-level language all at once, in preparation for later
execution.
</FONT><A NAME="@default18"></A><BR>
<BR>
<DT><FONT COLOR=black><B>high-level language:</B></FONT><DD><FONT COLOR=black> A programming language like Python that
is designed to be easy for humans to read and write.
</FONT><A NAME="@default19"></A><BR>
<BR>
<DT><FONT COLOR=black><B>interactive mode:</B></FONT><DD><FONT COLOR=black> A way of using the Python interpreter by
typing commands and expressions at the prompt.
</FONT><A NAME="@default20"></A><BR>
<BR>
<DT><FONT COLOR=black><B>interpret:</B></FONT><DD><FONT COLOR=black> To execute a program in a high-level language
by translating it one line at a time.
</FONT><A NAME="@default21"></A><BR>
<BR>
<DT><FONT COLOR=black><B>low-level language:</B></FONT><DD><FONT COLOR=black> A programming language that is designed
to be easy for a computer to execute; also called ``machine code'' or
``assembly language.''
</FONT><A NAME="@default22"></A><BR>
<BR>
<DT><FONT COLOR=black><B>machine code:</B></FONT><DD><FONT COLOR=black> The lowest level language for software which 
is the language that is directly executed by the central processing unit 
(CPU).
</FONT><A NAME="@default23"></A><BR>
<BR>
<DT><FONT COLOR=black><B>main memory:</B></FONT><DD><FONT COLOR=black> Stores programs and data. Main memory loses 
its information when the power is turned off.
</FONT><A NAME="@default24"></A><BR>
<BR>
<DT><FONT COLOR=black><B>parse:</B></FONT><DD><FONT COLOR=black> To examine a program and analyze the syntactic structure.
</FONT><A NAME="@default25"></A><BR>
<BR>
<DT><FONT COLOR=black><B>portability:</B></FONT><DD><FONT COLOR=black> A property of a program that can run on more
than one kind of computer.
</FONT><A NAME="@default26"></A><BR>
<BR>
<DT><FONT COLOR=black><B>print statement:</B></FONT><DD><FONT COLOR=black> An instruction that causes the Python
interpreter to display a value on the screen.
</FONT><A NAME="@default27"></A>
<A NAME="@default28"></A><BR>
<BR>
<DT><FONT COLOR=black><B>problem solving:</B></FONT><DD><FONT COLOR=black> The process of formulating a problem, finding
a solution, and expressing the solution.
</FONT><A NAME="@default29"></A><BR>
<BR>
<DT><FONT COLOR=black><B>program:</B></FONT><DD><FONT COLOR=black> A set of instructions that specifies a computation.
</FONT><A NAME="@default30"></A><BR>
<BR>
<DT><FONT COLOR=black><B>prompt:</B></FONT><DD><FONT COLOR=black> When a program displays a message and pauses for the 
user to type some input to the program.
</FONT><A NAME="@default31"></A><BR>
<BR>
<DT><FONT COLOR=black><B>secondary memory:</B></FONT><DD><FONT COLOR=black> Stores programs and data and retains its 
information even when the power is turned off. Generally slower 
than main memory. Examples of secondary memory include disk 
drives and flash memory in USB sticks.
</FONT><A NAME="@default32"></A><BR>
<BR>
<DT><FONT COLOR=black><B>semantics:</B></FONT><DD><FONT COLOR=black> The meaning of a program.
</FONT><A NAME="@default33"></A><BR>
<BR>
<DT><FONT COLOR=black><B>semantic error:</B></FONT><DD><FONT COLOR=black> An error in a program that makes it do something
other than what the programmer intended.
</FONT><A NAME="@default34"></A><BR>
<BR>
<DT><FONT COLOR=black><B>source code:</B></FONT><DD><FONT COLOR=black> A program in a high-level language.
</FONT><A NAME="@default35"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc15">1.13</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
What is the function of the secondary memory in a computer?<BR>
<BR>
a) Execute all of the computation and logic of the program<BR>
b) Retrieve web pages over the Internet<BR>
c) Store information for the long term - even beyond a power cycle<BR>
d) Take input from the user 
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
What is a program?
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
What is is the difference between a compiler and an interpreter?
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;4</B>&nbsp;&nbsp;<EM>
Which of the following contains "machine code"?<BR>
<BR>
a) The Python interpreter<BR>
b) The keyboard<BR>
c) Python source file<BR>
d) A word processing document
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;5</B>&nbsp;&nbsp;<EM>
What is wrong with the following code:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
&gt;&gt;&gt; primt 'Hello world!'
  File "&lt;stdin&gt;", line 1
    primt 'Hello world!'
                       ^
SyntaxError: invalid syntax
&gt;&gt;&gt; 
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;6</B>&nbsp;&nbsp;<EM>
Where in the computer is a variable such as "X" stored 
after the following Python line finishes?
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
x = 123
</EM></FONT></PRE><FONT COLOR=black><EM>a) Central processing unit<BR>
b) Main Memory<BR>
c) Secondary Memory<BR>
d) Input Devices<BR>
e) Output Devices
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;7</B>&nbsp;&nbsp;<EM>
What will the following program print out:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
x = 43
x = x + 1
print x
</EM></FONT></PRE><FONT COLOR=black><EM>a) 43<BR>
b) 44<BR>
c) x + 1<BR>
d) Error because x = x + 1 is not possible mathematically
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;8</B>&nbsp;&nbsp;<EM>
Explain each of the following using an example of a human capability: 
(1) Central processing unit, (2) Main Memory, (3) Secondary Memory, 
(4) Input Device, and
(5) Output Device.
For example, "What is the human equivalent to a Central Processing Unit"? 
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;9</B>&nbsp;&nbsp;<EM>
How do you fix a "Syntax Error"?
</EM></FONT></DIV><BR>
<!--BEGIN NOTES chapter-->
<HR WIDTH="50%" SIZE=1><DL><DT><FONT SIZE=5 COLOR=black><A NAME="note1" HREF="#text1">1</A></FONT><DD><FONT COLOR=black><TT>http://xkcd.com/231/</TT></FONT>
</DL>
<!--END NOTES-->
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Variables, expressions and statements</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc16">Chapter&nbsp;2</A>&nbsp;&nbsp;Variables, expressions and statements</FONT></H1><!--SEC END -->

<!--TOC section <FONT COLOR=black><FONT SIZE=3>Values and types</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc17">2.1</A>&nbsp;&nbsp;Values and types</FONT></H2><!--SEC END -->

<A NAME="@default36"></A>
<A NAME="@default37"></A>
<A NAME="@default38"></A>
<FONT COLOR=black>A <B>value</B> is one of the basic things a program works with,
like a letter or a
number. The values we have seen so far
are <TT>1</TT>, <TT>2</TT>, and
<CODE>'Hello, World!'</CODE>.<BR>
<BR>
These values belong to different <B>types</B>:
<TT>2</TT> is an integer, and <CODE>'Hello, World!'</CODE> is a <B>string</B>,
so-called because it contains a ``string'' of letters.
You (and the interpreter) can identify
strings because they are enclosed in quotation marks.<BR>
<BR>
<A NAME="@default39"></A><BR>
<BR>
The <TT>print</TT> statement also works for integers. We use the 
<TT>python</TT> command to start the interpreter.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python
&gt;&gt;&gt; print 4
4
</FONT></PRE><FONT COLOR=black>If you are not sure what type a value has, the interpreter can tell you.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; type('Hello, World!')
&lt;type 'str'&gt;
&gt;&gt;&gt; type(17)
&lt;type 'int'&gt;
</FONT></PRE><FONT COLOR=black>Not surprisingly, strings belong to the type <TT>str</TT> and
integers belong to the type <TT>int</TT>. Less obviously, numbers
with a decimal point belong to a type called <TT>float</TT>,
because these numbers are represented in a
format called <B>floating-point</B>.</FONT><BR>
<BR>
<A NAME="@default40"></A>
<A NAME="@default41"></A>
<A NAME="@default42"></A>
<A NAME="@default43"></A>
<A NAME="@default44"></A>
<A NAME="@default45"></A>
<A NAME="@default46"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; type(3.2)
&lt;type 'float'&gt;
</FONT></PRE><FONT COLOR=black>What about values like <CODE>'17'</CODE> and <CODE>'3.2'</CODE>?
They look like numbers, but they are in quotation marks like
strings.</FONT><BR>
<BR>
<A NAME="@default47"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; type('17')
&lt;type 'str'&gt;
&gt;&gt;&gt; type('3.2')
&lt;type 'str'&gt;
</FONT></PRE><FONT COLOR=black>They're strings.<BR>
<BR>
When you type a large integer, you might be tempted to use commas
between groups of three digits, as in <TT>1,000,000</TT>. This is not a
legal integer in Python, but it is legal:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print 1,000,000
1 0 0
</FONT></PRE><FONT COLOR=black>Well, that's not what we expected at all! Python interprets <TT>1,000,000</TT> as a comma-separated sequence of integers, which it
prints with spaces between.<BR>
<BR>
<A NAME="@default48"></A>
<A NAME="@default49"></A>
<A NAME="@default50"></A><BR>
<BR>
This is the first example we have seen of a semantic error: the code
runs without producing an error message, but it doesn't do the
``right'' thing.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Variables</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc18">2.2</A>&nbsp;&nbsp;Variables</FONT></H2><!--SEC END -->

<A NAME="@default51"></A>
<A NAME="@default52"></A>
<A NAME="@default53"></A>
<FONT COLOR=black>One of the most powerful features of a programming language is the
ability to manipulate <B>variables</B>. A variable is a name that
refers to a value.<BR>
<BR>
An <B>assignment statement</B> creates new variables and gives
them values:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; message = 'And now for something completely different'
&gt;&gt;&gt; n = 17
&gt;&gt;&gt; pi = 3.1415926535897931
</FONT></PRE><FONT COLOR=black>This example makes three assignments. The first assigns a string
to a new variable named <TT>message</TT>;
the second assigns the integer <TT>17</TT> to <TT>n</TT>; the third
assigns the (approximate) value of <FONT FACE=symbol>p</FONT> to <TT>pi</TT>.<BR>
<BR>
To display the value of a variable, you can use a print statement:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print n
17
&gt;&gt;&gt; print pi
3.14159265359
</FONT></PRE><FONT COLOR=black>The type of a variable is the type of the value it refers to.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; type(message)
&lt;type 'str'&gt;
&gt;&gt;&gt; type(n)
&lt;type 'int'&gt;
&gt;&gt;&gt; type(pi)
&lt;type 'float'&gt;
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Variable names and keywords</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc19">2.3</A>&nbsp;&nbsp;Variable names and keywords</FONT></H2><!--SEC END -->

<A NAME="@default54"></A>
<FONT COLOR=black>Programmers generally choose names for their variables that
are meaningful---they document what the variable is used for.<BR>
<BR>
Variable names can be arbitrarily long. They can contain
both letters and numbers, but they have to begin with a letter.
It is legal to use uppercase letters, but it is a good idea
to begin variable names with a lowercase letter (you'll
see why later).<BR>
<BR>
The underscore character (<CODE>_</CODE>) can appear in a name.
It is often used in names with multiple words, such as
<CODE>my_name</CODE> or <CODE>airspeed_of_unladen_swallow</CODE>.<BR>
<BR>
<A NAME="@default55"></A><BR>
<BR>
If you give a variable an illegal name, you get a syntax error:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 76trombones = 'big parade'
SyntaxError: invalid syntax
&gt;&gt;&gt; more@ = 1000000
SyntaxError: invalid syntax
&gt;&gt;&gt; class = 'Advanced Theoretical Zymurgy'
SyntaxError: invalid syntax
</FONT></PRE><FONT COLOR=black><TT>76trombones</TT> is illegal because it does not begin with a letter.
<TT>more@</TT> is illegal because it contains an illegal character, <TT>@</TT>. But what's wrong with <TT>class</TT>?<BR>
<BR>
It turns out that <TT>class</TT> is one of Python's <B>keywords</B>. The
interpreter uses keywords to recognize the structure of the program,
and they cannot be used as variable names.<BR>
<BR>
<A NAME="@default56"></A><BR>
<BR>
Python reserves 31 keywords<SUP><A NAME="text2" HREF="#note2">1</A></SUP> for its use:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
and       del       from      not       while    
as        elif      global    or        with     
assert    else      if        pass      yield    
break     except    import    print              
class     exec      in        raise              
continue  finally   is        return             
def       for       lambda    try
</FONT></PRE><FONT COLOR=black>You might want to keep this list handy. If the interpreter complains
about one of your variable names and you don't know why, see if it
is on this list.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Statements</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc20">2.4</A>&nbsp;&nbsp;Statements</FONT></H2><!--SEC END -->

<FONT COLOR=black>A <B>statement</B> is a unit of code that the Python interpreter can
execute. We have seen two kinds of statements: print
and assignment.<BR>
<BR>
<A NAME="@default57"></A>
<A NAME="@default58"></A>
<A NAME="@default59"></A><BR>
<BR>
When you type a statement in interactive mode, the interpreter
executes it and displays the result, if there is one.<BR>
<BR>
A script usually contains a sequence of statements. If there
is more than one statement, the results appear one at a time
as the statements execute.<BR>
<BR>
For example, the script
</FONT><PRE><FONT SIZE=4 COLOR=blue>
print 1
x = 2
print x
</FONT></PRE><FONT COLOR=black>produces the output
</FONT><PRE><FONT SIZE=4 COLOR=blue>
1
2
</FONT></PRE><FONT COLOR=black>The assignment statement produces no output.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Operators and operands</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc21">2.5</A>&nbsp;&nbsp;Operators and operands</FONT></H2><!--SEC END -->

<A NAME="@default60"></A>
<A NAME="@default61"></A>
<A NAME="@default62"></A>
<A NAME="@default63"></A>
<FONT COLOR=black><B>Operators</B> are special symbols that represent computations like
addition and multiplication. The values the operator is applied to
are called <B>operands</B>.<BR>
<BR>
The operators <TT>+</TT>, <TT>-</TT>, <TT>*</TT>, <TT>/</TT> and <TT>**</TT>
perform addition, subtraction, multiplication, division and
exponentiation, as in the following examples:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
20+32   hour-1   hour*60+minute   minute/60   5**2   (5+9)*(15-7)
</FONT></PRE><FONT COLOR=black>The division operator might not do what you expect:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; minute = 59
&gt;&gt;&gt; minute/60
0
</FONT></PRE><FONT COLOR=black>The value of <TT>minute</TT> is 59, and in conventional arithmetic 59
divided by 60 is 0.98333, not 0. The reason for the discrepancy is
that Python is performing <B>floor division</B><SUP><A NAME="text3" HREF="#note3">2</A></SUP>.<BR>
<BR>
<A NAME="@default64"></A>
<A NAME="@default65"></A>
<A NAME="@default66"></A>
<A NAME="@default67"></A>
<A NAME="@default68"></A><BR>
<BR>
When both of the operands are integers, the result is also an
integer; floor division chops off the fraction
part, so in this example it rounds down to zero.<BR>
<BR>
If either of the operands is a floating-point number, Python performs
floating-point division, and the result is a <TT>float</TT>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; minute/60.0
0.98333333333333328
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Expressions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc22">2.6</A>&nbsp;&nbsp;Expressions</FONT></H2><!--SEC END -->

<FONT COLOR=black>An <B>expression</B> is a combination of values, variables, and operators.
A value all by itself is considered an expression, and so is
a variable, so the following are all legal expressions
(assuming that the variable <TT>x</TT> has been assigned a value):</FONT><BR>
<BR>
<A NAME="@default69"></A>
<A NAME="@default70"></A>
<PRE><FONT SIZE=4 COLOR=blue>
17
x
x + 17
</FONT></PRE><FONT COLOR=black>If you type an expression in interactive mode, the interpreter
<B>evaluates</B> it and displays the result:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 1 + 1
2
</FONT></PRE><FONT COLOR=black>But in a script, an expression all by itself doesn't
do anything! This is a common
source of confusion for beginners.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Type the following statements in the Python interpreter to see
what they do:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
5
x = 5
x + 1
</EM></FONT></PRE></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Order of operations</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc23">2.7</A>&nbsp;&nbsp;Order of operations</FONT></H2><!--SEC END -->

<A NAME="@default71"></A>
<A NAME="@default72"></A>
<A NAME="@default73"></A>
<FONT COLOR=black>When more than one operator appears in an expression, the order of
evaluation depends on the <B>rules of precedence</B>. For
mathematical operators, Python follows mathematical convention.
The acronym <B>PEMDAS</B> is a useful way to
remember the rules:</FONT><BR>
<BR>
<A NAME="@default74"></A>
<UL><LI><FONT COLOR=black><B>P</B>arentheses have the highest precedence and can be used 
to force an expression to evaluate in the order you want. Since
expressions in parentheses are evaluated first, <TT>2 * (3-1)</TT> is 4,
and <TT>(1+1)**(5-2)</TT> is 8. You can also use parentheses to make an
expression easier to read, as in <TT>(minute * 100) / 60</TT>, even
if it doesn't change the result.</FONT><BR>
<BR>
<LI><FONT COLOR=black><B>E</B>xponentiation has the next highest precedence, so
<TT>2**1+1</TT> is 3, not 4, and <TT>3*1**3</TT> is 3, not 27.</FONT><BR>
<BR>
<LI><FONT COLOR=black><B>M</B>ultiplication and <B>D</B>ivision have the same precedence,
which is higher than <B>A</B>ddition and <B>S</B>ubtraction, which also
have the same precedence. So <TT>2*3-1</TT> is 5, not 4, and
<TT>6+4/2</TT> is 8, not 5.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Operators with the same precedence are evaluated from left to 
right. So in the expression <TT>5-3-1</TT> is 1, not 3 because the
<TT>5-3</TT> happens first and then <TT>1</TT> is subtracted from <TT>2</TT>.</FONT></UL>
<FONT COLOR=black>When in doubt always put parentheses in your expressions to make sure
the computations are performed in the order you intend.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Modulus operator</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc24">2.8</A>&nbsp;&nbsp;Modulus operator</FONT></H2><!--SEC END -->

<A NAME="@default75"></A>
<A NAME="@default76"></A>
<FONT COLOR=black>The <B>modulus operator</B> works on integers and yields the remainder
when the first operand is divided by the second. In Python, the
modulus operator is a percent sign (<CODE>%</CODE>). The syntax is the same
as for other operators:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; quotient = 7 / 3
&gt;&gt;&gt; print quotient
2
&gt;&gt;&gt; remainder = 7 % 3
&gt;&gt;&gt; print remainder
1
</FONT></PRE><FONT COLOR=black>So 7 divided by 3 is 2 with 1 left over.<BR>
<BR>
The modulus operator turns out to be surprisingly useful. For
example, you can check whether one number is divisible by another---if
<TT>x % y</TT> is zero, then <TT>x</TT> is divisible by <TT>y</TT>.<BR>
<BR>
<A NAME="@default77"></A><BR>
<BR>
Also, you can extract the right-most digit
or digits from a number. For example, <TT>x % 10</TT> yields the
right-most digit of <TT>x</TT> (in base 10). Similarly <TT>x % 100</TT>
yields the last two digits.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>String operations</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc25">2.9</A>&nbsp;&nbsp;String operations</FONT></H2><!--SEC END -->

<A NAME="@default78"></A>
<A NAME="@default79"></A>
<FONT COLOR=black>The <TT>+</TT> operator works with strings, but it
is not addition in the mathematical sense. Instead it performs
<B>concatenation</B>, which means joining the strings by
linking them end-to-end. For example:</FONT><BR>
<BR>
<A NAME="@default80"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; first = 10
&gt;&gt;&gt; second = 15
&gt;&gt;&gt; print first+second
25
&gt;&gt;&gt; first = '100'
&gt;&gt;&gt; second = '150'
&gt;&gt;&gt; print first + second
100150
</FONT></PRE><FONT COLOR=black>The output of this program is <TT>throatwarbler</TT>.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Asking the user for input</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc26">2.10</A>&nbsp;&nbsp;Asking the user for input</FONT></H2><!--SEC END -->

<A NAME="@default81"></A>
<FONT COLOR=black>Sometimes we would like to take the value for a variable from the user
via their keyboard.
Python provides a built-in function called <CODE>raw_input</CODE> that gets
input from the keyboard<SUP><A NAME="text4" HREF="#note4">3</A></SUP>. When this function is called, the program stops and
waits for the user to type something. When the user presses <FONT COLOR=purple>Return</FONT> or <FONT COLOR=purple>Enter</FONT>, the program resumes and <CODE>raw_input</CODE>
returns what the user typed as a string.</FONT><BR>
<BR>
<A NAME="@default82"></A>
<A NAME="@default83"></A>
<A NAME="@default84"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; input = raw_input()
Some silly stuff
&gt;&gt;&gt; print input
Some silly stuff
</FONT></PRE><FONT COLOR=black>Before getting input from the user, it is a good idea to print a
prompt telling the user what to input. You can pass a string
to <CODE>raw_input</CODE> to be displayed to the user before pausing
for input:</FONT><BR>
<BR>
<A NAME="@default85"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; name = raw_input('What is your name?\n')
What is your name?
Chuck
&gt;&gt;&gt; print name
Chuck
</FONT></PRE><FONT COLOR=black>The sequence <CODE>\n</CODE> at the end of the prompt represents a <B>newline</B>,
which is a special character that causes a line break.
That's why the user's input appears below the prompt.<BR>
<BR>
<A NAME="@default86"></A><BR>
<BR>
If you expect the user to type an integer, you can try to convert
the return value to <TT>int</TT> using the <TT>int()</TT> function:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; prompt = 'What...is the airspeed velocity of an unladen swallow?\n'
&gt;&gt;&gt; speed = raw_input(prompt)
What...is the airspeed velocity of an unladen swallow?
17
&gt;&gt;&gt; int(speed)
17
&gt;&gt;&gt; int(speed) + 5
22
</FONT></PRE><FONT COLOR=black>But if the user types something other than a string of digits,
you get an error:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; speed = raw_input(prompt)
What...is the airspeed velocity of an unladen swallow?
What do you mean, an African or a European swallow?
&gt;&gt;&gt; int(speed)
ValueError: invalid literal for int()
</FONT></PRE><FONT COLOR=black>We will see how to handle this kind of error later.</FONT><BR>
<BR>
<A NAME="@default87"></A>
<A NAME="@default88"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Comments</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc27">2.11</A>&nbsp;&nbsp;Comments</FONT></H2><!--SEC END -->

<A NAME="@default89"></A>
<FONT COLOR=black>As programs get bigger and more complicated, they get more difficult
to read. Formal languages are dense, and it is often difficult to
look at a piece of code and figure out what it is doing, or why.<BR>
<BR>
For this reason, it is a good idea to add notes to your programs to explain
in natural language what the program is doing. These notes are called
<B>comments</B>, and they start with the <CODE>#</CODE> symbol:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
# compute the percentage of the hour that has elapsed
percentage = (minute * 100) / 60
</FONT></PRE><FONT COLOR=black>In this case, the comment appears on a line by itself. You can also put
comments at the end of a line:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
percentage = (minute * 100) / 60     # percentage of an hour
</FONT></PRE><FONT COLOR=black>Everything from the <TT>#</TT> to the end of the line is ignored---it
has no effect on the program.<BR>
<BR>
Comments are most useful when they document non-obvious features of
the code. It is reasonable to assume that the reader can figure out
<EM>what</EM> the code does; it is much more useful to explain <EM>why</EM>.<BR>
<BR>
This comment is redundant with the code and useless:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
v = 5     # assign 5 to v
</FONT></PRE><FONT COLOR=black>This comment contains useful information that is not in the code:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
v = 5     # velocity in meters/second. 
</FONT></PRE><FONT COLOR=black>Good variable names can reduce the need for comments, but
long names can make complex expressions hard to read, so there is
a tradeoff.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Choosing mnemonic variable names</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc28">2.12</A>&nbsp;&nbsp;Choosing mnemonic variable names</FONT></H2><!--SEC END -->

<A NAME="@default90"></A>
<FONT COLOR=black>As long as you follow the simple rules of variable naming, and avoid
reserved words, you have a lot of choice when you name your variables.
In the beginning, this choice can be confusing both when you read a 
program and when you write your own programs. For example, the
following three programs are identical in terms of what they accomplish,
but very different when you read them and try to understand them.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
a = 35.0
b = 12.50
c = a * b
print c

hours = 35.0
rate = 12.50
pay = hours * rate
print pay

x1q3z9ahd = 35.0
x1q3z9afd = 12.50
x1q3p9afd = x1q3z9ahd * x1q3z9afd
print x1q3p9afd
</FONT></PRE><FONT COLOR=black>The Python interpreter sees all three of these programs as <EM>exactly the 
same</EM> but humans see and understand these programs quite differently. 
Humans will most quickly understand the <B>intent</B> 
of the second program because the 
programmer has chosen variable names that reflect the intent of the programmer
regarding what data will be stored in each variable.<BR>
<BR>
We call these wisely-chosen variable names ``mnemonic variable names''. The
word <EM>mnemonic</EM><SUP><A NAME="text5" HREF="#note5">4</A></SUP> 
means ``memory aid''.
We choose mnemonic variable names to help us remember why we created the variable
in the first place.<BR>
<BR>
While this all sounds great, and it is a very good idea to use mnemonic variable
names, mnemonic variable names can get in the way of a beginning programmer's 
ability to parse and understand code. This is because beginning programmers 
have not yet memorized the reserved words (there are only 31 of them) and sometimes
variables which have names that are too descriptive start to look like 
part of the language and not just well-chosen variable names.<BR>
<BR>
Take a quick look at the following Python sample code which loops through some data. 
We will cover loops soon, but for now try to just puzzle through what this means:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
for word in words:
    print word
</FONT></PRE><FONT COLOR=black>What is happening here? Which of the tokens (for, word, in, etc.) are reserved words
and which are just variable names? Does Python understand at a fundamental level 
the notion of words? Beginning programmers have 
trouble separating what parts of the
code <EM>must</EM> be the same as this example and what parts of the code are simply
choices made by the programmer.<BR>
<BR>
The following code is equivalent to the above code:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
for slice in pizza:
    print slice
</FONT></PRE><FONT COLOR=black>It is easier for the beginning programmer to look at this code and know which 
parts are reserved words defined by Python and which parts are simply variable
names chosen by the programmer. It is pretty clear that Python has no fundamental
understanding of pizza and slices and the fact that a pizza consists of a set
of one or more slices.<BR>
<BR>
But if our program is truly about reading data and looking for words in the data,
<TT>pizza</TT> and <TT>slice</TT> are very un-mnemonic variable names. Choosing them 
as variable names distracts from the meaning of the program.<BR>
<BR>
After a pretty short period of time, you will know the most common reserved words
and you will start to see the reserved words jumping out at you:<TT><BR>
<BR>
<B>for</B> word <B>in</B> words<B>:<BR>
<CODE>    </CODE>print</B> word </TT><BR>
<BR>
The parts of the code that are defined by 
Python (<TT>for</TT>, <TT>in</TT>, <TT>print</TT>, and <TT>:</TT>) are in bold
and the programmer chosen variables (<TT>word</TT> and <TT>words</TT>) are not in bold. 
Many text editors are aware of Python
syntax and will color reserved words differently to give you clues to keep 
your variables and reserved words separate.
After a while you will begin to read Python and quickly determine what
is a variable and what is a reserved word.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc29">2.13</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="@default91"></A>
<FONT COLOR=black>At this point the syntax error you are most likely to make is
an illegal variable name, like <TT>class</TT> and <TT>yield</TT>, which
are keywords, or <CODE>odd~job</CODE> and <CODE>US$</CODE>, which contain
illegal characters.<BR>
<BR>
<A NAME="@default92"></A>
<A NAME="@default93"></A><BR>
<BR>
If you put a space in a variable name, Python thinks it is two
operands without an operator:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; bad name = 5
SyntaxError: invalid syntax
</FONT></PRE><FONT COLOR=black>For syntax errors, the error messages don't help much.
The most common messages are <TT>SyntaxError: invalid syntax</TT> and
<TT>SyntaxError: invalid token</TT>, neither of which is very informative.<BR>
<BR>
<A NAME="@default94"></A>
<A NAME="@default95"></A>
<A NAME="@default96"></A>
<A NAME="@default97"></A>
<A NAME="@default98"></A><BR>
<BR>
The runtime error you are most likely to make is a ``use before
def;'' that is, trying to use a variable before you have assigned
a value. This can happen if you spell a variable name wrong:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; principal = 327.68
&gt;&gt;&gt; interest = principle * rate
NameError: name 'principle' is not defined
</FONT></PRE><FONT COLOR=black>Variables names are case sensitive, so <TT>LaTeX</TT> is not the
same as <TT>latex</TT>.<BR>
<BR>
<A NAME="@default99"></A>
<A NAME="@default100"></A>
<A NAME="@default101"></A><BR>
<BR>
At this point the most likely cause of a semantic error is
the order of operations. For example, to evaluate 1/2 <FONT FACE=symbol>p</FONT>,
you might be tempted to write
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 1.0 / 2.0 * pi
</FONT></PRE><FONT COLOR=black>But the division happens first, so you would get <FONT FACE=symbol>p</FONT> / 2, which
is not the same thing! There is no way for Python
to know what you meant to write, so in this case you don't
get an error message; you just get the wrong answer.</FONT><BR>
<BR>
<A NAME="@default102"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc30">2.14</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>assignment:</B></FONT><DD><FONT COLOR=black> A statement that assigns a value to a variable.
</FONT><A NAME="@default103"></A><BR>
<BR>
<DT><FONT COLOR=black><B>concatenate:</B></FONT><DD><FONT COLOR=black> To join two operands end-to-end.
</FONT><A NAME="@default104"></A><BR>
<BR>
<DT><FONT COLOR=black><B>comment:</B></FONT><DD><FONT COLOR=black> Information in a program that is meant for other
programmers (or anyone reading the source code) and has no effect on the
execution of the program.
</FONT><A NAME="@default105"></A><BR>
<BR>
<DT><FONT COLOR=black><B>evaluate:</B></FONT><DD><FONT COLOR=black> To simplify an expression by performing the operations
in order to yield a single value.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>expression:</B></FONT><DD><FONT COLOR=black> A combination of variables, operators, and values that
represents a single result value.
</FONT><A NAME="@default106"></A><BR>
<BR>
<DT><FONT COLOR=black><B>floating-point:</B></FONT><DD><FONT COLOR=black> A type that represents numbers with fractional
parts.
</FONT><A NAME="@default107"></A><BR>
<BR>
<DT><FONT COLOR=black><B>floor division:</B></FONT><DD><FONT COLOR=black> The operation that divides two numbers and chops off
the fraction part.
</FONT><A NAME="@default108"></A><BR>
<BR>
<DT><FONT COLOR=black><B>integer:</B></FONT><DD><FONT COLOR=black> A type that represents whole numbers.
</FONT><A NAME="@default109"></A><BR>
<BR>
<DT><FONT COLOR=black><B>keyword:</B></FONT><DD><FONT COLOR=black> A reserved word that is used by the compiler to parse a
program; you cannot use keywords like <TT>if</TT>, <TT>def</TT>, and <TT>while</TT> as
variable names.
</FONT><A NAME="@default110"></A><BR>
<BR>
<DT><FONT COLOR=black><B>mnemonic:</B></FONT><DD><FONT COLOR=black> A memory aid. We often give variables mnemonic names
to help us remember what is stored in the variable.
</FONT><A NAME="@default111"></A><BR>
<BR>
<DT><FONT COLOR=black><B>modulus operator:</B></FONT><DD><FONT COLOR=black> An operator, denoted with a percent sign
(<TT>%</TT>), that works on integers and yields the remainder when one
number is divided by another.
</FONT><A NAME="@default112"></A>
<A NAME="@default113"></A><BR>
<BR>
<DT><FONT COLOR=black><B>operand:</B></FONT><DD><FONT COLOR=black> One of the values on which an operator operates.
</FONT><A NAME="@default114"></A><BR>
<BR>
<DT><FONT COLOR=black><B>operator:</B></FONT><DD><FONT COLOR=black> A special symbol that represents a simple computation like
addition, multiplication, or string concatenation.
</FONT><A NAME="@default115"></A><BR>
<BR>
<DT><FONT COLOR=black><B>rules of precedence:</B></FONT><DD><FONT COLOR=black> The set of rules governing the order in which
expressions involving multiple operators and operands are evaluated.
</FONT><A NAME="@default116"></A>
<A NAME="@default117"></A><BR>
<BR>
<DT><FONT COLOR=black><B>statement:</B></FONT><DD><FONT COLOR=black> A section of code that represents a command or action. So
far, the statements we have seen are assignments and print statements.
</FONT><A NAME="@default118"></A><BR>
<BR>
<DT><FONT COLOR=black><B>string:</B></FONT><DD><FONT COLOR=black> A type that represents sequences of characters.
</FONT><A NAME="@default119"></A><BR>
<BR>
<DT><FONT COLOR=black><B>type:</B></FONT><DD><FONT COLOR=black> A category of values. The types we have seen so far
are integers (type <TT>int</TT>), floating-point numbers (type <TT>float</TT>), and strings (type <TT>str</TT>).
</FONT><A NAME="@default120"></A><BR>
<BR>
<DT><FONT COLOR=black><B>value:</B></FONT><DD><FONT COLOR=black> One of the basic units of data, like a number or string, 
that a program manipulates.
</FONT><A NAME="@default121"></A><BR>
<BR>
<DT><FONT COLOR=black><B>variable:</B></FONT><DD><FONT COLOR=black> A name that refers to a value.
</FONT><A NAME="@default122"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc31">2.15</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Write a program that uses <CODE>raw_input</CODE> to prompt a user for their name 
and then welcomes them.
</EM></FONT><PRE><FONT COLOR=black><EM>
Enter your name: Chuck
Hello Chuck
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Write a program to prompt the user for hours and rate per hour to compute
gross pay.
</EM></FONT><PRE><FONT COLOR=black><EM>
Enter Hours: 35
Enter Rate: 2.75
Pay: 96.25
</EM></FONT></PRE></DIV><FONT COLOR=black>
We won't worry about making sure our pay has exactly two digits after
the decimal place for now. If you want, you can play with the 
built-in Python <TT>round</TT> function to properly round the resulting pay
to two decimal places.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;4</B>&nbsp;&nbsp;<EM>
Assume that we execute the following assignment statements:
</EM></FONT><PRE><FONT COLOR=black><EM>
width = 17
height = 12.0
</EM></FONT></PRE>
<FONT COLOR=black><EM>For each of the following expressions, write the value of the
expression and the type (of the value of the expression).
</EM></FONT><OL type=1><LI><FONT COLOR=black><TT><EM>width/2</EM></TT></FONT><BR>
<BR>
<LI><FONT COLOR=black><TT><EM>width/2.0</EM></TT></FONT><BR>
<BR>
<LI><FONT COLOR=black><TT><EM>height/3</EM></TT></FONT><BR>
<BR>
<LI><FONT COLOR=black><TT><EM>1 + 2 * 5</EM></TT></FONT></OL>
<FONT COLOR=black><EM>Use the Python interpreter to check your answers.
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;5</B>&nbsp;&nbsp;<EM>
Write a program which prompts the user for a Celsius temperature,
convert the temperature to Fahrenheit and print out the converted
temperature.
</EM></FONT></DIV><BR>
<!--BEGIN NOTES chapter-->
<HR WIDTH="50%" SIZE=1><DL><DT><FONT SIZE=5 COLOR=black><A NAME="note2" HREF="#text2">1</A></FONT><DD><FONT COLOR=black>In Python 3.0, <TT>exec</TT> is no
longer a keyword, but <TT>nonlocal</TT> is.
</FONT><DT><FONT SIZE=5 COLOR=black><A NAME="note3" HREF="#text3">2</A></FONT><DD><FONT COLOR=black>In Python 3.0,
the result of this division is a <TT>float</TT>. 
In Python 3.0, the new operator
<TT>//</TT> performs integer division.
</FONT><DT><FONT SIZE=5 COLOR=black><A NAME="note4" HREF="#text4">3</A></FONT><DD><FONT COLOR=black>In Python 3.0, this function is named
 <TT>input</TT>.
</FONT><DT><FONT SIZE=5 COLOR=black><A NAME="note5" HREF="#text5">4</A></FONT><DD><FONT COLOR=black>See 
<TT>http://en.wikipedia.org/wiki/Mnemonic</TT>
for an extended description of the word ``mnemonic''.
</FONT></DL>
<!--END NOTES-->
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Conditional execution</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc32">Chapter&nbsp;3</A>&nbsp;&nbsp;Conditional execution</FONT></H1><!--SEC END -->

<!--TOC section <FONT COLOR=black><FONT SIZE=3>Boolean expressions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc33">3.1</A>&nbsp;&nbsp;Boolean expressions</FONT></H2><!--SEC END -->

<A NAME="@default123"></A>
<A NAME="@default124"></A>
<A NAME="@default125"></A>
<A NAME="@default126"></A>
<FONT COLOR=black>A <B>boolean expression</B> is an expression that is either true
or false. The following examples use the 
operator <TT>==</TT>, which compares two operands and produces
<TT>True</TT> if they are equal and <TT>False</TT> otherwise:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 5 == 5
True
&gt;&gt;&gt; 5 == 6
False
</FONT></PRE><FONT COLOR=black><TT>True</TT> and <TT>False</TT> are special
values that belong to the type <TT>bool</TT>; they are not strings:</FONT><BR>
<BR>
<A NAME="@default127"></A>
<A NAME="@default128"></A>
<A NAME="@default129"></A>
<A NAME="@default130"></A>
<A NAME="@default131"></A>
<A NAME="@default132"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; type(True)
&lt;type 'bool'&gt;
&gt;&gt;&gt; type(False)
&lt;type 'bool'&gt;
</FONT></PRE><FONT COLOR=black>The <TT>==</TT> operator is one of the <B>comparison operators</B>; the
others are:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
      x != y               # x is not equal to y
      x &gt; y                # x is greater than y
      x &lt; y                # x is less than y
      x &gt;= y               # x is greater than or equal to y
      x &lt;= y               # x is less than or equal to y
      x is y               # x is the same as y
      x is not y           # x is not the same as y
</FONT></PRE><FONT COLOR=black>Although these operations are probably familiar to you, the Python
symbols are different from the mathematical symbols. A common error
is to use a single equal sign (<TT>=</TT>) instead of a double equal sign
(<TT>==</TT>). Remember that <TT>=</TT> is an assignment operator and
<TT>==</TT> is a comparison operator. There is no such thing as
<TT>=&lt;</TT> or <TT>=&gt;</TT>.</FONT><BR>
<BR>
<A NAME="@default133"></A>
<A NAME="@default134"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Logical operators</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc34">3.2</A>&nbsp;&nbsp;Logical operators</FONT></H2><!--SEC END -->

<A NAME="@default135"></A>
<A NAME="@default136"></A>
<FONT COLOR=black>There are three <B>logical operators</B>: <TT>and</TT>, <TT>or</TT>, and <TT>not</TT>. The semantics (meaning) of these operators is
similar to their meaning in English. For example,<BR>
<BR>
<TT>x &gt; 0 and x &lt; 10</TT> <BR>
<BR>
is true only if <TT>x</TT> is greater than 0
<EM>and</EM> less than 10.<BR>
<BR>
<A NAME="@default137"></A>
<A NAME="@default138"></A>
<A NAME="@default139"></A>
<A NAME="@default140"></A>
<A NAME="@default141"></A>
<A NAME="@default142"></A><BR>
<BR>
<TT>n%2 == 0 or n%3 == 0</TT> is true if <EM>either</EM> of the conditions
is true, that is, if the number is divisible by 2 <EM>or</EM> 3.<BR>
<BR>
Finally, the <TT>not</TT> operator negates a boolean
expression, so <TT>not (x &gt; y)</TT> is true if <TT>x &gt; y</TT> is false,
that is, if <TT>x</TT> is less than or equal to <TT>y</TT>.<BR>
<BR>
Strictly speaking, the operands of the logical operators should be
boolean expressions, but Python is not very strict.
Any nonzero number is interpreted as ``true.''
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 17 and True
True
</FONT></PRE><FONT COLOR=black>This flexibility can be useful, but there are some subtleties to
it that might be confusing. You might want to avoid it (unless
you know what you are doing).</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Conditional execution</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc35">3.3</A>&nbsp;&nbsp;Conditional execution</FONT></H2><!--SEC END -->

<A NAME="conditional execution"></A>
<A NAME="@default143"></A>
<A NAME="@default144"></A>
<A NAME="@default145"></A>
<A NAME="@default146"></A>
<A NAME="@default147"></A>
<FONT COLOR=black>In order to write useful programs, we almost always need the ability
to check conditions and change the behavior of the program
accordingly. <B>Conditional statements</B> give us this ability. The
simplest form is the <TT>if</TT> statement:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if x &gt; 0 :
    print 'x is positive'
</FONT></PRE><FONT COLOR=black>The boolean expression after the <TT>if</TT> statement is
called the <B>condition</B>. We end the <TT>if</TT> 
statement with a colon character (:) and the line(s) 
after the if statement are indented. <BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook005.png"></FONT></DIV><FONT COLOR=black>
<BR>
If the logical condition is true, then the indented
statement gets executed. If the logical condition is 
false, the indented statement is skipped.<BR>
<BR>
<A NAME="@default148"></A>
<A NAME="@default149"></A>
<A NAME="@default150"></A><BR>
<BR>
<TT>if</TT> statements have the same structure as function definitions
or <TT>for</TT> loops. The statement consists of a header line
that ends with the colon character (:) 
followed by an indented block. Statements like this are
called <B>compound statements</B> because they stretch 
across more than one line.<BR>
<BR>
There is no limit on the number of statements that can appear in
the body, but there has to be at least one.
Occasionally, it is useful to have a body with no statements (usually
as a place keeper for code you haven't written yet). In that
case, you can use the <TT>pass</TT> statement, which does nothing.</FONT><BR>
<BR>
<A NAME="@default151"></A>
<A NAME="@default152"></A>
<PRE><FONT SIZE=4 COLOR=blue>
if x &lt; 0 :
    pass          # need to handle negative values!
</FONT></PRE><FONT COLOR=black>If you enter an if statement in the Python interpreter, the prompt will change 
from three chevrons to three dots to indicate you are in the middle of a block of
statements as shown below:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; x = 3
&gt;&gt;&gt; if x &lt; 10:
...    print 'Small'
... 
Small
&gt;&gt;&gt;
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Alternative execution</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc36">3.4</A>&nbsp;&nbsp;Alternative execution</FONT></H2><!--SEC END -->

<A NAME="alternative execution"></A>
<A NAME="@default153"></A>
<A NAME="@default154"></A>
<A NAME="@default155"></A>
<FONT COLOR=black>A second form of the <TT>if</TT> statement is <B>alternative execution</B>,
in which there are two possibilities and the condition determines
which one gets executed. The syntax looks like this:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if x%2 == 0 :
    print 'x is even'
else :
    print 'x is odd'
</FONT></PRE><FONT COLOR=black>If the remainder when <TT>x</TT> is divided by 2 is 0, then we
know that <TT>x</TT> is even, and the program displays a message to that
effect. If the condition is false, the second set of statements is
executed. <BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook006.png"></FONT></DIV><FONT COLOR=black>
<BR>
Since the condition must be true or false, exactly one of
the alternatives will be executed. The alternatives are called
<B>branches</B>, because they are branches in the flow of execution.</FONT><BR>
<BR>
<A NAME="@default156"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Chained conditionals</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc37">3.5</A>&nbsp;&nbsp;Chained conditionals</FONT></H2><!--SEC END -->

<A NAME="@default157"></A>
<A NAME="@default158"></A>
<FONT COLOR=black>Sometimes there are more than two possibilities and we need more than
two branches. One way to express a computation like that is a <B>chained conditional</B>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if x &lt; y:
    print 'x is less than y'
elif x &gt; y:
    print 'x is greater than y'
else:
    print 'x and y are equal'
</FONT></PRE><FONT COLOR=black><TT>elif</TT> is an abbreviation of ``else if.'' Again, exactly one
branch will be executed. <BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook007.png"></FONT></DIV><FONT COLOR=black>
<BR>
There is no limit on the number of <TT>elif</TT> statements. If there is an <TT>else</TT> clause, it has to be
at the end, but there doesn't have to be one.</FONT><BR>
<BR>
<A NAME="@default159"></A>
<A NAME="@default160"></A>
<PRE><FONT SIZE=4 COLOR=blue>
if choice == 'a':
    print 'Bad guess'
elif choice == 'b':
    print 'Good guess'
elif choice == 'c':
    print 'Close, but not correct'
</FONT></PRE><FONT COLOR=black>Each condition is checked in order. If the first is false,
the next is checked, and so on. If one of them is
true, the corresponding branch executes, and the statement
ends. Even if more than one condition is true, only the
first true branch executes. </FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Nested conditionals</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc38">3.6</A>&nbsp;&nbsp;Nested conditionals</FONT></H2><!--SEC END -->

<A NAME="@default161"></A>
<A NAME="@default162"></A>
<FONT COLOR=black>One conditional can also be nested within another. We could have
written the trichotomy example like this:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if x == y:
    print 'x and y are equal'
else:
    if x &lt; y:
        print 'x is less than y'
    else:
        print 'x is greater than y'
</FONT></PRE><FONT COLOR=black>The outer conditional contains two branches. The
first branch contains a simple statement. The second branch
contains another <TT>if</TT> statement, which has two branches of its
own. Those two branches are both simple statements,
although they could have been conditional statements as well.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook008.png"></FONT></DIV><FONT COLOR=black>
<BR>
Although the indentation of the statements makes the structure
apparent, <B>nested conditionals</B> become difficult to read very
quickly. In general, it is a good idea to avoid them when you can.<BR>
<BR>
Logical operators often provide a way to simplify nested conditional
statements. For example, we can rewrite the following code using a
single conditional:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if 0 &lt; x:
    if x &lt; 10:
        print 'x is a positive single-digit number.'
</FONT></PRE><FONT COLOR=black>The <TT>print</TT> statement is executed only if we make it past both
conditionals, so we can get the same effect with the <TT>and</TT> operator:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if 0 &lt; x and x &lt; 10:
    print 'x is a positive single-digit number.'
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Catching exceptions using try and except</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc39">3.7</A>&nbsp;&nbsp;Catching exceptions using try and except</FONT></H2><!--SEC END -->

<A NAME="catch1"></A>
<FONT COLOR=black>Earlier we saw a code segment where we used the <CODE>raw_input</CODE> and
<TT>int</TT> functions to read and parse an integer number entered by
the user. We also saw how treacherous doing this could be:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; speed = raw_input(prompt)
What...is the airspeed velocity of an unladen swallow?
What do you mean, an African or a European swallow?
&gt;&gt;&gt; int(speed)
ValueError: invalid literal for int()
&gt;&gt;&gt;
</FONT></PRE><FONT COLOR=black>When we are executing these statements in the Python interpreter, 
we get a new prompt from the interpreter, think ``oops'' and move 
on to our next statement. <BR>
<BR>
However if this code is placed in a 
Python script and this error occurs, your script immediately 
stops in its tracks with a traceback. 
It does not execute the following statement. 
<A NAME="@default163"></A><BR>
<BR>
Here is a sample program to convert a Fahrenheit temperature 
to a Celsius temperature:
</FONT><A NAME="@default164"></A>
<A NAME="@default165"></A>
<A NAME="@default166"></A>
<PRE><FONT SIZE=4 COLOR=blue>
inp = raw_input('Enter Fahrenheit Temperature:')
fahr = float(inp)
cel = (fahr - 32.0) * 5.0 / 9.0
print cel
</FONT></PRE><FONT COLOR=black>If we execute this code and give it invalid input, it simply fails
with an unfriendly error message:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python fahren.py 
Enter Fahrenheit Temperature:72
22.2222222222

python fahren.py 
Enter Fahrenheit Temperature:fred
Traceback (most recent call last):
  File "fahren.py", line 2, in &lt;module&gt;
    fahr = float(inp)
ValueError: invalid literal for float(): fred
</FONT></PRE><FONT COLOR=black>There is a conditional execution structure built into 
Python to handle these types of expected and unexpected
errors called ``try / except''. The idea of <TT>try</TT>
and <TT>except</TT> is that you know that some sequence
of instruction(s) may have a problem and you want to 
add some statements to be executed if an error occurs.
These extra statements (the except block) are ignored
if there is no error.<BR>
<BR>
You can think of the <TT>try</TT> and <TT>except</TT> feature
in Python as an ``insurance policy'' on a sequence of
statements.<BR>
<BR>
We can rewrite our temperature converter as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
inp = raw_input('Enter Fahrenheit Temperature:')
try:
    fahr = float(inp)
    cel = (fahr - 32.0) * 5.0 / 9.0
    print cel
except:
    print 'Please enter a number'
</FONT></PRE>
<FONT COLOR=black>Python starts by executing the 
sequence of statements in the 
<TT>try</TT> block. If all goes
well, it skips the <TT>except</TT> block and proceeds. If an
exception occurs in the <TT>try</TT> block, 
Python jumps out of the <TT>try</TT> block and
executes the sequence of statements in the <TT>except</TT> block.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python fahren2.py 
Enter Fahrenheit Temperature:72
22.2222222222

python fahren2.py 
Enter Fahrenheit Temperature:fred
Please enter a number
</FONT></PRE>
<FONT COLOR=black>Handling an exception with a <TT>try</TT> statement is called <B>catching</B> an exception. In this example, the <TT>except</TT> clause
prints an error message. In general,
catching an exception gives you a chance to fix the problem, or try
again, or at least end the program gracefully.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Short circuit evaluation of logical expressions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc40">3.8</A>&nbsp;&nbsp;Short circuit evaluation of logical expressions</FONT></H2><!--SEC END -->

<A NAME="@default167"></A>
<FONT COLOR=black>When Python is processing a logical expression such as 
<TT>x &gt;= 2 and (x/y) &gt; 2</TT>, it evaluates the expression
from left-to-right. Because of the definition of <TT>and</TT>,
if <TT>x</TT> is less than 2, the expression <TT>x &gt;= 2</TT> is 
<TT>False</TT> and so the whole expression is <TT>False</TT> regardless
of whether <TT>(x/y) &gt; 2</TT> evaluates to <TT>True</TT> or <TT>False</TT>.<BR>
<BR>
When Python detects that there is nothing to be gained by evaluating
the rest of a logical expression, it stops its evaluation and does
not do the computations in the rest of the logical expression. 
When the evaluation of a logical expression stops because the overall
value is already known, it is called <B>short-circuiting</B> 
the evaluation.<BR>
<BR>
<A NAME="@default168"></A>
<A NAME="@default169"></A>
While this may seem like a fine point, the short circuit behavior
leads to a clever technique called the <B>guardian pattern</B>. 
Consider the following code sequence in the Python interpreter:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; x = 6 
&gt;&gt;&gt; y = 2
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2
True
&gt;&gt;&gt; x = 1 
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2
False
&gt;&gt;&gt; x = 6
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ZeroDivisionError: integer division or modulo by zero
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>The third calculation failed because Python was evaluating <TT>(x/y)</TT>
and <TT>y</TT> was zero which causes a runtime error. But the second example
did <EM>not</EM> fail because the first part of the expression <TT>x &gt;= 2</TT> 
evaluated to <TT>False</TT> so the <TT>(x/y)</TT> was not ever executed 
due to the <B>short circuit</B> rule and there was no error.<BR>
<BR>
We can construct the logical expression to strategically place a <B>guard</B>
evaluation just before the evaluation that might cause an error as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; x = 1
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and y != 0 and (x/y) &gt; 2
False
&gt;&gt;&gt; x = 6 
&gt;&gt;&gt; y = 0
&gt;&gt;&gt; x &gt;= 2 and y != 0 and (x/y) &gt; 2
False
&gt;&gt;&gt; x &gt;= 2 and (x/y) &gt; 2 and y != 0
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ZeroDivisionError: integer division or modulo by zero
&gt;&gt;&gt;
</FONT></PRE><FONT COLOR=black>In the first logical expression, <TT>x &gt;= 2</TT> is <TT>False</TT> so the evaluation
stops at the <TT>and</TT>. In the second logical expression <TT>x &gt;= 2</TT> is <TT>True</TT>
but <TT>y != 0</TT> is <TT>False</TT> so we never reach <TT>(x/y)</TT>.<BR>
<BR>
In the third logical expression, the <TT>y != 0</TT> is <EM>after</EM> the 
<TT>(x/y) </TT> calculation so the expression fails with an error.<BR>
<BR>
In the second expression, we say that <TT>y != 0</TT> acts as a <B>guard</B>
to insure that we only execute <TT>(x/y)</TT> if <TT>y</TT> is non-zero.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc41">3.9</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="whitespace"></A>
<A NAME="@default170"></A>
<A NAME="@default171"></A>
<FONT COLOR=black>The traceback Python displays when an error occurs contains
a lot of information, but it can be overwhelming, especially
when there are many frames on the stack. The most
useful parts are usually:
</FONT><UL><LI><FONT COLOR=black>What kind of error it was, and</FONT><BR>
<BR>
<LI><FONT COLOR=black>Where it occurred.</FONT></UL>
<FONT COLOR=black>Syntax errors are usually easy to find, but there are a few
gotchas. Whitespace errors can be tricky because spaces and
tabs are invisible and we are used to ignoring them.</FONT><BR>
<BR>
<A NAME="@default172"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; x = 5
&gt;&gt;&gt;  y = 6
  File "&lt;stdin&gt;", line 1
    y = 6
    ^
SyntaxError: invalid syntax
</FONT></PRE><FONT COLOR=black>In this example, the problem is that the second line is indented by
one space. But the error message points to <TT>y</TT>, which is
misleading. In general, error messages indicate where the problem was
discovered, but the actual error might be earlier in the code,
sometimes on a previous line.<BR>
<BR>
<A NAME="@default173"></A>
<A NAME="@default174"></A><BR>
<BR>
The same is true of runtime errors. Suppose you are trying
to compute a signal-to-noise ratio in decibels. The formula
is <I>SNR<FONT SIZE=2><SUB>db</SUB></FONT></I> = 10 log<FONT SIZE=2><SUB>10</SUB></FONT> (<I>P<FONT SIZE=2><SUB>signal</SUB></FONT></I> / <I>P<FONT SIZE=2><SUB>noise</SUB></FONT></I>). In Python,
you might write something like this:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import math
signal_power = 9
noise_power = 10
ratio = signal_power / noise_power
decibels = 10 * math.log10(ratio)
print decibels
</FONT></PRE><FONT COLOR=black>But when you run it, you get an error message<SUP><A NAME="text6" HREF="#note6">1</A></SUP>:</FONT><BR>
<BR>
<A NAME="@default175"></A>
<A NAME="@default176"></A>
<PRE><FONT SIZE=4 COLOR=blue>
Traceback (most recent call last):
  File "snr.py", line 5, in ?
    decibels = 10 * math.log10(ratio)
OverflowError: math range error
</FONT></PRE><FONT COLOR=black>The error message indicates line 5, but there is nothing
wrong with that line. To find the real error, it might be
useful to print the value of <TT>ratio</TT>, which turns out to
be 0. The problem is in line 4, because dividing two integers
does floor division. The solution is to represent signal power
and noise power with floating-point values.<BR>
<BR>
<A NAME="@default177"></A>
<A NAME="@default178"></A><BR>
<BR>
In general, error messages tell you where the problem was discovered, 
but that is often not where it was caused.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc42">3.10</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>body:</B></FONT><DD><FONT COLOR=black> The sequence of statements within a compound statement.
</FONT><A NAME="@default179"></A><BR>
<BR>
<DT><FONT COLOR=black><B>boolean expression:</B></FONT><DD><FONT COLOR=black> An expression whose value is either 
<TT>True</TT> or <TT>False</TT>.
</FONT><A NAME="@default180"></A>
<A NAME="@default181"></A><BR>
<BR>
<DT><FONT COLOR=black><B>branch:</B></FONT><DD><FONT COLOR=black> One of the alternative sequences of statements in
a conditional statement.
</FONT><A NAME="@default182"></A><BR>
<BR>
<DT><FONT COLOR=black><B>chained conditional:</B></FONT><DD><FONT COLOR=black> A conditional statement with a series
of alternative branches.
</FONT><A NAME="@default183"></A>
<A NAME="@default184"></A><BR>
<BR>
<DT><FONT COLOR=black><B>comparison operator:</B></FONT><DD><FONT COLOR=black> One of the operators that compares
its operands: <TT>==</TT>, <TT>!=</TT>, <TT>&gt;</TT>, <TT>&lt;</TT>, <TT>&gt;=</TT>, and <TT>&lt;=</TT>.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>conditional statement:</B></FONT><DD><FONT COLOR=black> A statement that controls the flow of
execution depending on some condition.
</FONT><A NAME="@default185"></A>
<A NAME="@default186"></A><BR>
<BR>
<DT><FONT COLOR=black><B>condition:</B></FONT><DD><FONT COLOR=black> The boolean expression in a conditional statement
that determines which branch is executed.
</FONT><A NAME="@default187"></A><BR>
<BR>
<DT><FONT COLOR=black><B>compound statement:</B></FONT><DD><FONT COLOR=black> A statement that consists of a header
and a body. The header ends with a colon (:). The body is indented
relative to the header.
</FONT><A NAME="@default188"></A><BR>
<BR>
<DT><FONT COLOR=black><B>guardian pattern:</B></FONT><DD><FONT COLOR=black> Where we construct a logical expression 
with additional
comparisons to take advantage of the short circuit behavior.
</FONT><A NAME="@default189"></A>
<A NAME="@default190"></A><BR>
<BR>
<DT><FONT COLOR=black><B>logical operator:</B></FONT><DD><FONT COLOR=black> One of the operators that combines boolean
expressions: <TT>and</TT>, <TT>or</TT>, and <TT>not</TT>.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>nested conditional:</B></FONT><DD><FONT COLOR=black> A conditional statement that appears
in one of the branches of another conditional statement.
</FONT><A NAME="@default191"></A>
<A NAME="@default192"></A><BR>
<BR>
<DT><FONT COLOR=black><B>traceback:</B></FONT><DD><FONT COLOR=black> A list of the functions that are executing,
printed when an exception occurs.
</FONT><A NAME="@default193"></A><BR>
<BR>
<DT><FONT COLOR=black><B>short circuit:</B></FONT><DD><FONT COLOR=black> When Python is part-way through evaluating a 
logical expression and stops the evaluation because Python 
knows the final value for the expression 
without needing to evaluate the rest of the expression.
</FONT><A NAME="@default194"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc43">3.11</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Rewrite your pay computation to give the employee 1.5 
times the hourly rate for 
hours worked above 40 hours.
</EM></FONT><PRE><FONT COLOR=black><EM>
Enter Hours: 45
Enter Rate: 10
Pay: 475.0
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Rewrite your pay program using <TT>try</TT> and <TT>except</TT> 
so that your program handles non-numeric input gracefully
by printing a message and exiting the program.
The following shows two executions of the program:
</EM></FONT><PRE><FONT COLOR=black><EM>
Enter Hours: 20
Enter Rate: nine
Error, please enter numeric input

Enter Hours: forty
Error, please enter numeric input
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Write a program to prompt for a score between 0.0 and 1.0.
If the score is out of range print an error. If the score
is between 0.0 and 1.0, print a grade using the following 
table:
</EM></FONT><PRE><FONT COLOR=black><EM>
Score   Grade
&gt;= 0.9     A
&gt;= 0.8     B
&gt;= 0.7     C
&gt;= 0.6     D
&lt; 0.6    F

Enter score: 0.95
A

Enter score: perfect
Bad score

Enter score: 10.0
Bad score

Enter score: 0.75
C

Enter score: 0.5
F
</EM></FONT></PRE>
<FONT COLOR=black><EM>Run the program repeatedly as shown above to test the 
various different values for input.
</EM></FONT></DIV><BR>
<!--BEGIN NOTES chapter-->
<HR WIDTH="50%" SIZE=1><DL><DT><FONT SIZE=5 COLOR=black><A NAME="note6" HREF="#text6">1</A></FONT><DD><FONT COLOR=black>In Python 3.0,
 you no longer get an error message; the division operator performs
 floating-point division even with integer operands.
</FONT></DL>
<!--END NOTES-->
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Functions</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc44">Chapter&nbsp;4</A>&nbsp;&nbsp;Functions</FONT></H1><!--SEC END -->

<A NAME="funcchap"></A>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Function calls</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc45">4.1</A>&nbsp;&nbsp;Function calls</FONT></H2><!--SEC END -->

<A NAME="functionchap"></A>
<A NAME="@default195"></A>
<FONT COLOR=black>In the context of programming, a <B>function</B> is a named sequence of
statements that performs a computation. When you define a function,
you specify the name and the sequence of statements. Later, you can
``call'' the function by name. 
We have already seen one example of a <B>function call</B>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; type(32)
&lt;type 'int'&gt;
</FONT></PRE><FONT COLOR=black>The name of the function is <TT>type</TT>. The expression in parentheses
is called the <B>argument</B> of the function. The argument is 
a value or variable that we are passing into the function as input 
to the function. 
The result, for the <TT>type</TT> function, is the type of the argument.<BR>
<BR>
<A NAME="@default196"></A><BR>
<BR>
It is common to say that a function ``takes'' an argument and ``returns''
a result. The result is called the <B>return value</B>.</FONT><BR>
<BR>
<A NAME="@default197"></A>
<A NAME="@default198"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Built-in functions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc46">4.2</A>&nbsp;&nbsp;Built-in functions</FONT></H2><!--SEC END -->

<FONT COLOR=black>Python provides a number of important built-in functions that
we can use without needing to provide the function definition.
The creators of Python wrote a set of functions 
to solve common problems and included them in Python for us to use.<BR>
<BR>
The <TT>max</TT> and <TT>min</TT> functions give us the largest and 
smallest values in a list, respectively:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; max('Hello world')
'w'
&gt;&gt;&gt; min('Hello world')
' '
&gt;&gt;&gt;
</FONT></PRE><FONT COLOR=black>The <TT>max</TT> function tells us the ``largest character'' in the 
string (which turns out to be the letter ``w'') and the <TT>min</TT>
function shows us the smallest character which turns out to be a 
space.<BR>
<BR>
Another very common built-in function is the <TT>len</TT> function
which tells us how many items are in its argument. If the argument
to <TT>len</TT> is a string, it returns the number of characters 
in the string.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; len('Hello world')
11
&gt;&gt;&gt;
</FONT></PRE><FONT COLOR=black>These functions are not limited to looking at strings, they can operate
on any set of values as we will see in later chapters.<BR>
<BR>
You should treat the names of built-in functions as reserved words (i.e.
avoid using ``max'' as a variable name).</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Type conversion functions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc47">4.3</A>&nbsp;&nbsp;Type conversion functions</FONT></H2><!--SEC END -->

<A NAME="@default199"></A>
<A NAME="@default200"></A>
<FONT COLOR=black>Python also provides built-in functions that convert values
from one type to another. The <TT>int</TT> function takes any value and
converts it to an integer, if it can, or complains otherwise:</FONT><BR>
<BR>
<A NAME="@default201"></A>
<A NAME="@default202"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; int('32')
32
&gt;&gt;&gt; int('Hello')
ValueError: invalid literal for int(): Hello
</FONT></PRE><FONT COLOR=black><TT>int</TT> can convert floating-point values to integers, but it
doesn't round off; it chops off the fraction part:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; int(3.99999)
3
&gt;&gt;&gt; int(-2.3)
-2
</FONT></PRE><FONT COLOR=black><TT>float</TT> converts integers and strings to floating-point
numbers:</FONT><BR>
<BR>
<A NAME="@default203"></A>
<A NAME="@default204"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; float(32)
32.0
&gt;&gt;&gt; float('3.14159')
3.14159
</FONT></PRE><FONT COLOR=black>Finally, <TT>str</TT> converts its argument to a string:</FONT><BR>
<BR>
<A NAME="@default205"></A>
<A NAME="@default206"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; str(32)
'32'
&gt;&gt;&gt; str(3.14159)
'3.14159'
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Random numbers</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc48">4.4</A>&nbsp;&nbsp;Random numbers</FONT></H2><!--SEC END -->

<A NAME="@default207"></A>
<A NAME="@default208"></A>
<A NAME="@default209"></A>
<A NAME="@default210"></A>
<FONT COLOR=black>Given the same inputs, most computer programs generate the same
outputs every time, so they are said to be <B>deterministic</B>.
Determinism is usually a good thing, since we expect the same
calculation to yield the same result. For some applications, though,
we want the computer to be unpredictable. Games are an obvious
example, but there are more.<BR>
<BR>
Making a program truly nondeterministic turns out to be not so easy,
but there are ways to make it at least seem nondeterministic. One of
them is to use <B>algorithms</B> that generate <B>pseudorandom</B> numbers.
Pseudorandom numbers are not truly random because they are generated
by a deterministic computation, but just by looking at the numbers it
is all but impossible to distinguish them from random.<BR>
<BR>
<A NAME="@default211"></A>
<A NAME="@default212"></A><BR>
<BR>
The <TT>random</TT> module provides functions that generate
pseudorandom numbers (which I will simply call ``random'' from
here on).<BR>
<BR>
<A NAME="@default213"></A>
<A NAME="@default214"></A><BR>
<BR>
The function <TT>random</TT> returns a random float
between 0.0 and 1.0 (including 0.0 but not 1.0). Each time you
call <TT>random</TT>, you get the next number in a long series. To see a
sample, run this loop:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import random

for i in range(10):
    x = random.random()
    print x
</FONT></PRE><FONT COLOR=black>This program produces the following list of 10 random numbers
between 0.0 and up to but not including 1.0.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
0.301927091705
0.513787075867
0.319470430881
0.285145917252
0.839069045123
0.322027080731
0.550722110248
0.366591677812
0.396981483964
0.838116437404
</FONT></PRE><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Run the program on your system and see what numbers you get.
Run the program more than once and see what numbers you get.
</EM></FONT></DIV><BR>
<FONT COLOR=black>The <TT>random</TT> function is only one of many 
functions which handle random numbers.
The function <TT>randint</TT> takes parameters <TT>low</TT> and
<TT>high</TT> and returns an integer between <TT>low</TT> and
<TT>high</TT> (including both).</FONT><BR>
<BR>
<A NAME="@default215"></A>
<A NAME="@default216"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; random.randint(5, 10)
5
&gt;&gt;&gt; random.randint(5, 10)
9
</FONT></PRE><FONT COLOR=black>To choose an element from a sequence at random, you can use
<TT>choice</TT>:</FONT><BR>
<BR>
<A NAME="@default217"></A>
<A NAME="@default218"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = [1, 2, 3]
&gt;&gt;&gt; random.choice(t)
2
&gt;&gt;&gt; random.choice(t)
3
</FONT></PRE><FONT COLOR=black>The <TT>random</TT> module also provides functions to generate
random values from continuous distributions including
Gaussian, exponential, gamma, and a few more.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Math functions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc49">4.5</A>&nbsp;&nbsp;Math functions</FONT></H2><!--SEC END -->

<A NAME="@default219"></A>
<A NAME="@default220"></A>
<A NAME="@default221"></A>
<A NAME="@default222"></A>
<FONT COLOR=black>Python has a math <B>module</B> that provides most of the familiar
mathematical functions. 
Before we can use the module, we have to import it:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; import math
</FONT></PRE><FONT COLOR=black>This statement creates a <B>module object</B> named math. If
you print the module object, you get some information about it:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print math
&lt;module 'math' from '/usr/lib/python2.5/lib-dynload/math.so'&gt;
</FONT></PRE><FONT COLOR=black>The module object contains the functions and variables defined in the
module. To access one of the functions, you have to specify the name
of the module and the name of the function, separated by a dot (also
known as a period). This format is called <B>dot notation</B>.</FONT><BR>
<BR>
<A NAME="@default223"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; ratio = signal_power / noise_power
&gt;&gt;&gt; decibels = 10 * math.log10(ratio)

&gt;&gt;&gt; radians = 0.7
&gt;&gt;&gt; height = math.sin(radians)
</FONT></PRE><FONT COLOR=black>The first example computes the logarithm base 10 of the
signal-to-noise ratio. The math module also provides a
function called <TT>log</TT> that computes logarithms base <TT>e</TT>.<BR>
<BR>
<A NAME="@default224"></A>
<A NAME="@default225"></A>
<A NAME="@default226"></A>
<A NAME="@default227"></A>
<A NAME="@default228"></A>
<A NAME="@default229"></A><BR>
<BR>
The second example finds the sine of <TT>radians</TT>. The name of the
variable is a hint that <TT>sin</TT> and the other trigonometric
functions (<TT>cos</TT>, <TT>tan</TT>, etc.) take arguments in radians. To
convert from degrees to radians, divide by 360 and multiply by 2
<FONT FACE=symbol>p</FONT>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; degrees = 45
&gt;&gt;&gt; radians = degrees / 360.0 * 2 * math.pi
&gt;&gt;&gt; math.sin(radians)
0.707106781187
</FONT></PRE><FONT COLOR=black>The expression <TT>math.pi</TT> gets the variable <TT>pi</TT> from the math
module. The value of this variable is an approximation
of <FONT FACE=symbol>p</FONT>, accurate to about 15 digits.<BR>
<BR>
<A NAME="@default230"></A><BR>
<BR>
If you know
your trigonometry, you can check the previous result by comparing it to
the square root of two divided by two:</FONT><BR>
<BR>
<A NAME="@default231"></A>
<A NAME="@default232"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; math.sqrt(2) / 2.0
0.707106781187
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Adding new functions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc50">4.6</A>&nbsp;&nbsp;Adding new functions</FONT></H2><!--SEC END -->

<FONT COLOR=black>So far, we have only been using the functions that come with Python,
but it is also possible to add new functions.
A <B>function definition</B> specifies the name of a new function and
the sequence of statements that execute when the function is called.
Once we define a function, we can reuse the function over and over 
throughout our program.<BR>
<BR>
<A NAME="@default233"></A>
<A NAME="@default234"></A>
<A NAME="@default235"></A><BR>
<BR>
Here is an example:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def print_lyrics():
    print "I'm a lumberjack, and I'm okay."
    print 'I sleep all night and I work all day.'
</FONT></PRE><FONT COLOR=black><TT>def</TT> is a keyword that indicates that this is a function
definition. The name of the function is <CODE>print_lyrics</CODE>. The
rules for function names are the same as for variable names: letters,
numbers and some punctuation marks are legal, but the first character
can't be a number. You can't use a keyword as the name of a function,
and you should avoid having a variable and a function with the same
name.<BR>
<BR>
<A NAME="@default236"></A>
<A NAME="@default237"></A>
<A NAME="@default238"></A><BR>
<BR>
The empty parentheses after the name indicate that this function
doesn't take any arguments. Later we will build functions that 
take arguments as their inputs.<BR>
<BR>
<A NAME="@default239"></A>
<A NAME="@default240"></A>
<A NAME="@default241"></A>
<A NAME="@default242"></A>
<A NAME="@default243"></A><BR>
<BR>
The first line of the function definition is called the <B>header</B>;
the rest is called the <B>body</B>. The header has to end with a colon
and the body has to be indented. By convention, the indentation is
always four spaces. The body can contain
any number of statements.<BR>
<BR>
The strings in the print statements are enclosed in double
quotes. Single quotes and double quotes do the same thing;
most people use single quotes except in cases like this where
a single quote (which is also an apostrophe) appears in the string.<BR>
<BR>
<A NAME="@default244"></A><BR>
<BR>
If you type a function definition in interactive mode, the interpreter
prints ellipses (<EM>...</EM>) to let you know that the definition
isn't complete:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; def print_lyrics():
...     print "I'm a lumberjack, and I'm okay."
...     print 'I sleep all night and I work all day.'
...
</FONT></PRE><FONT COLOR=black>To end the function, you have to enter an empty line (this is
not necessary in a script).<BR>
<BR>
Defining a function creates a variable with the same name.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print print_lyrics
&lt;function print_lyrics at 0xb7e99e9c&gt;
&gt;&gt;&gt; print type(print_lyrics)
&lt;type 'function'&gt;
</FONT></PRE><FONT COLOR=black>The value of <CODE>print_lyrics</CODE> is a <B>function object</B>, which
has type <CODE>'function'</CODE>.<BR>
<BR>
<A NAME="@default245"></A>
<A NAME="@default246"></A><BR>
<BR>
The syntax for calling the new function is the same as
for built-in functions:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
</FONT></PRE><FONT COLOR=black>Once you have defined a function, you can use it inside another
function. For example, to repeat the previous refrain, we could write
a function called <CODE>repeat_lyrics</CODE>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def repeat_lyrics():
    print_lyrics()
    print_lyrics()
</FONT></PRE><FONT COLOR=black>And then call <CODE>repeat_lyrics</CODE>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; repeat_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
</FONT></PRE><FONT COLOR=black>But that's not really how the song goes.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Definitions and uses</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc51">4.7</A>&nbsp;&nbsp;Definitions and uses</FONT></H2><!--SEC END -->

<A NAME="@default247"></A>
<FONT COLOR=black>Pulling together the code fragments from the previous section, the
whole program looks like this:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def print_lyrics():
    print "I'm a lumberjack, and I'm okay."
    print 'I sleep all night and I work all day.'

def repeat_lyrics():
    print_lyrics()
    print_lyrics()

repeat_lyrics()
</FONT></PRE><FONT COLOR=black>This program contains two function definitions: <CODE>print_lyrics</CODE> and
<CODE>repeat_lyrics</CODE>. Function definitions get executed just like other
statements, but the effect is to create function objects. The statements
inside the function do not get executed until the function is called, and
the function definition generates no output.<BR>
<BR>
<A NAME="@default248"></A><BR>
<BR>
As you might expect, you have to create a function before you can
execute it. In other words, the function definition has to be
executed before the first time it is called.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Move the last line of this program
to the top, so the function call appears before the definitions. Run 
the program and see what error
message you get.
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Move the function call back to the bottom
and move the definition of <CODE>print_lyrics</CODE> after the definition of
<CODE>repeat_lyrics</CODE>. What happens when you run this program?
</EM></FONT></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Flow of execution</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc52">4.8</A>&nbsp;&nbsp;Flow of execution</FONT></H2><!--SEC END -->

<A NAME="@default249"></A>
<FONT COLOR=black>In order to ensure that a function is defined before its first use,
you have to know the order in which statements are executed, which is
called the <B>flow of execution</B>.<BR>
<BR>
Execution always begins at the first statement of the program.
Statements are executed one at a time, in order from top to bottom.<BR>
<BR>
Function <EM>definitions</EM> do not alter the flow of execution of the
program, but remember that statements inside the function are not
executed until the function is called.<BR>
<BR>
A function call is like a detour in the flow of execution. Instead of
going to the next statement, the flow jumps to the body of
the function, executes all the statements there, and then comes back
to pick up where it left off.<BR>
<BR>
That sounds simple enough, until you remember that one function can
call another. While in the middle of one function, the program might
have to execute the statements in another function. But while
executing that new function, the program might have to execute yet
another function!<BR>
<BR>
Fortunately, Python is good at keeping track of where it is, so each
time a function completes, the program picks up where it left off in
the function that called it. When it gets to the end of the program,
it terminates.<BR>
<BR>
What's the moral of this sordid tale? When you read a program, you
don't always want to read from top to bottom. Sometimes it makes
more sense if you follow the flow of execution.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Parameters and arguments</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc53">4.9</A>&nbsp;&nbsp;Parameters and arguments</FONT></H2><!--SEC END -->

<A NAME="parameters"></A>
<A NAME="@default250"></A>
<A NAME="@default251"></A>
<A NAME="@default252"></A>
<A NAME="@default253"></A>
<FONT COLOR=black>Some of the built-in functions we have seen require arguments. For
example, when you call <TT>math.sin</TT> you pass a number
as an argument. Some functions take more than one argument:
<TT>math.pow</TT> takes two, the base and the exponent.<BR>
<BR>
Inside the function, the arguments are assigned to
variables called <B>parameters</B>. Here is an example of a
user-defined function that takes an argument:</FONT><BR>
<BR>
<A NAME="@default254"></A>
<PRE><FONT SIZE=4 COLOR=blue>
def print_twice(bruce):
    print bruce
    print bruce
</FONT></PRE><FONT COLOR=black>This function assigns the argument to a parameter
named <TT>bruce</TT>. When the function is called, it prints the value of
the parameter (whatever it is) twice.<BR>
<BR>
This function works with any value that can be printed.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print_twice('Spam')
Spam
Spam
&gt;&gt;&gt; print_twice(17)
17
17
&gt;&gt;&gt; print_twice(math.pi)
3.14159265359
3.14159265359
</FONT></PRE><FONT COLOR=black>The same rules of composition that apply to built-in functions also
apply to user-defined functions, so we can use any kind of expression
as an argument for <CODE>print_twice</CODE>:</FONT><BR>
<BR>
<A NAME="@default255"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print_twice('Spam '*4)
Spam Spam Spam Spam
Spam Spam Spam Spam
&gt;&gt;&gt; print_twice(math.cos(math.pi))
-1.0
-1.0
</FONT></PRE><FONT COLOR=black>The argument is evaluated before the function is called, so
in the examples the expressions <CODE>'Spam '*4</CODE> and
<TT>math.cos(math.pi)</TT> are only evaluated once.<BR>
<BR>
<A NAME="@default256"></A><BR>
<BR>
You can also use a variable as an argument:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; michael = 'Eric, the half a bee.'
&gt;&gt;&gt; print_twice(michael)
Eric, the half a bee.
Eric, the half a bee.
</FONT></PRE><FONT COLOR=black>The name of the variable we pass as an argument (<TT>michael</TT>) has
nothing to do with the name of the parameter (<TT>bruce</TT>). It
doesn't matter what the value was called back home (in the caller);
here in <CODE>print_twice</CODE>, we call everybody <TT>bruce</TT>.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Fruitful functions and void functions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc54">4.10</A>&nbsp;&nbsp;Fruitful functions and void functions</FONT></H2><!--SEC END -->

<A NAME="@default257"></A>
<A NAME="@default258"></A>
<A NAME="@default259"></A>
<A NAME="@default260"></A><FONT COLOR=black> 
Some of the functions we are using, such as the math functions, yield
results; for lack of a better name, I call them <B>fruitful
 functions</B>. Other functions, like <CODE>print_twice</CODE>, perform an
action but don't return a value. They are called <B>void
 functions</B>.<BR>
<BR>
When you call a fruitful function, you almost always
want to do something with the result; for example, you might
assign it to a variable or use it as part of an expression:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
x = math.cos(radians)
golden = (math.sqrt(5) + 1) / 2
</FONT></PRE><FONT COLOR=black>When you call a function in interactive mode, Python displays
the result:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; math.sqrt(5)
2.2360679774997898
</FONT></PRE><FONT COLOR=black>But in a script, if you call a fruitful function and do 
not store the result of the function in a variable,
the return value vanishes into the mist!
</FONT><PRE><FONT SIZE=4 COLOR=blue>
math.sqrt(5)
</FONT></PRE><FONT COLOR=black>This script computes the square root of 5, but since it doesn't store
the result in a variable or display the result, it is not very useful.<BR>
<BR>
<A NAME="@default261"></A>
<A NAME="@default262"></A><BR>
<BR>
Void functions might display something on the screen or have some
other effect, but they don't have a return value. If you try to
assign the result to a variable, you get a special value called
<TT>None</TT>.</FONT><BR>
<BR>
<A NAME="@default263"></A>
<A NAME="@default264"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; result = print_twice('Bing')
Bing
Bing
&gt;&gt;&gt; print result
None
</FONT></PRE><FONT COLOR=black>The value <TT>None</TT> is not the same as the string <CODE>'None'</CODE>. 
It is a special value that has its own type:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print type(None)
&lt;type 'NoneType'&gt;
</FONT></PRE><FONT COLOR=black>To return a result from a function, we use the <TT>return</TT> statement 
in our function. For example, we could make a very 
simple function called <TT>addtwo</TT>
that adds two numbers together and return a result.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def addtwo(a, b):
    added = a + b
    return added

x = addtwo(3, 5)
print x
</FONT></PRE><FONT COLOR=black>When this script executes, the <TT>print</TT> statement will print out ``8''
because the <TT>addtwo</TT> function was called with 3 and 5 as arguments.
Within the function the parameters <TT>a</TT> and <TT>b</TT> were 3 and 5 
respectively. The function computed the sum of the two numbers and placed
it in the local function variable named <TT>added</TT> 
and used the <TT>return</TT> statement 
to send the computed value back to the calling code 
as the function result which was assigned
to the variable <TT>x</TT> and printed out.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Why functions?</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc55">4.11</A>&nbsp;&nbsp;Why functions?</FONT></H2><!--SEC END -->

<A NAME="@default265"></A>
<FONT COLOR=black>It may not be clear why it is worth the trouble to divide
a program into functions. There are several reasons:
</FONT><UL><LI><FONT COLOR=black>Creating a new function gives you an opportunity to name a group
of statements, which makes your program easier to read, understand 
and debug.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Functions can make a program smaller by eliminating repetitive
code. Later, if you make a change, you only have
to make it in one place.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Dividing a long program into functions allows you to debug the
parts one at a time and then assemble them into a working whole.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Well-designed functions are often useful for many programs.
Once you write and debug one, you can reuse it.</FONT></UL>
<FONT COLOR=black>Throughout the rest of the book, often we will use a function definition to 
explain a concept. Part of the skill of creating and using functions is
to have a function properly capture an idea such as ``find the smallest
value in a list of values''. Later we will show you code that finds
the smallest in a list of values and we will present it to you as a function
named <TT>min</TT> which takes a list of values as its argument and 
returns the smallest value in the list.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc56">4.12</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="editor"></A>
<A NAME="@default266"></A>
<FONT COLOR=black>If you are using a text editor to write your scripts, you might
run into problems with spaces and tabs. The best way to avoid
these problems is to use spaces exclusively (no tabs). Most text
editors that know about Python do this by default, but some
don't.<BR>
<BR>
<A NAME="@default267"></A><BR>
<BR>
Tabs and spaces are usually invisible, which makes them
hard to debug, so try to find an editor that manages indentation
for you.<BR>
<BR>
Also, don't forget to save your program before you run it. Some
development environments do this automatically, but some don't.
In that case the program you are looking at in the text editor
is not the same as the program you are running.<BR>
<BR>
Debugging can take a long time if you keep running the same,
incorrect, program over and over!<BR>
<BR>
Make sure that the code you are looking at is the code you are running.
If you're not sure, put something like <CODE>print 'hello'</CODE> at the
beginning of the program and run it again. If you don't see
<CODE>hello</CODE>, you're not running the right program!</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc57">4.13</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>algorithm:</B></FONT><DD><FONT COLOR=black> A general process for solving a category of
problems.
</FONT><A NAME="@default268"></A><BR>
<BR>
<DT><FONT COLOR=black><B>argument:</B></FONT><DD><FONT COLOR=black> A value provided to a function when the function is called.
This value is assigned to the corresponding parameter in the function.
</FONT><A NAME="@default269"></A><BR>
<BR>
<DT><FONT COLOR=black><B>body:</B></FONT><DD><FONT COLOR=black> The sequence of statements inside a function definition.
</FONT><A NAME="@default270"></A><BR>
<BR>
<DT><FONT COLOR=black><B>composition:</B></FONT><DD><FONT COLOR=black> Using an expression as part of a larger expression,
or a statement as part of a larger statement.
</FONT><A NAME="@default271"></A><BR>
<BR>
<DT><FONT COLOR=black><B>deterministic:</B></FONT><DD><FONT COLOR=black> Pertaining to a program that does the same
thing each time it runs, given the same inputs.
</FONT><A NAME="@default272"></A><BR>
<BR>
<DT><FONT COLOR=black><B>dot notation:</B></FONT><DD><FONT COLOR=black> The syntax for calling a function in another
module by specifying the module name followed by a dot (period) and
the function name.
</FONT><A NAME="@default273"></A><BR>
<BR>
<DT><FONT COLOR=black><B>flow of execution:</B></FONT><DD><FONT COLOR=black> The order in which statements are executed during
a program run.
</FONT><A NAME="@default274"></A><BR>
<BR>
<DT><FONT COLOR=black><B>fruitful function:</B></FONT><DD><FONT COLOR=black> A function that returns a value.
</FONT><A NAME="@default275"></A><BR>
<BR>
<DT><FONT COLOR=black><B>function:</B></FONT><DD><FONT COLOR=black> A named sequence of statements that performs some
useful operation. Functions may or may not take arguments and may or
may not produce a result.
</FONT><A NAME="@default276"></A><BR>
<BR>
<DT><FONT COLOR=black><B>function call:</B></FONT><DD><FONT COLOR=black> A statement that executes a function. It
consists of the function name followed by an argument list.
</FONT><A NAME="@default277"></A><BR>
<BR>
<DT><FONT COLOR=black><B>function definition:</B></FONT><DD><FONT COLOR=black> A statement that creates a new function,
specifying its name, parameters, and the statements it executes.
</FONT><A NAME="@default278"></A><BR>
<BR>
<DT><FONT COLOR=black><B>function object:</B></FONT><DD><FONT COLOR=black> A value created by a function definition.
The name of the function is a variable that refers to a function
object.
</FONT><A NAME="@default279"></A><BR>
<BR>
<DT><FONT COLOR=black><B>header:</B></FONT><DD><FONT COLOR=black> The first line of a function definition.
</FONT><A NAME="@default280"></A><BR>
<BR>
<DT><FONT COLOR=black><B>import statement:</B></FONT><DD><FONT COLOR=black> A statement that reads a module file and creates
a module object.
</FONT><A NAME="@default281"></A>
<A NAME="@default282"></A><BR>
<BR>
<DT><FONT COLOR=black><B>module object:</B></FONT><DD><FONT COLOR=black> A value created by an <TT>import</TT> statement
that provides access to the data and code defined in a module.
</FONT><A NAME="@default283"></A><BR>
<BR>
<DT><FONT COLOR=black><B>parameter:</B></FONT><DD><FONT COLOR=black> A name used inside a function to refer to the value
passed as an argument.
</FONT><A NAME="@default284"></A><BR>
<BR>
<DT><FONT COLOR=black><B>pseudorandom:</B></FONT><DD><FONT COLOR=black> Pertaining to a sequence of numbers that appear
to be random, but are generated by a deterministic program.
</FONT><A NAME="@default285"></A><BR>
<BR>
<DT><FONT COLOR=black><B>return value:</B></FONT><DD><FONT COLOR=black> The result of a function. If a function call
is used as an expression, the return value is the value of
the expression.
</FONT><A NAME="@default286"></A><BR>
<BR>
<DT><FONT COLOR=black><B>void function:</B></FONT><DD><FONT COLOR=black> A function that doesn't return a value.
</FONT><A NAME="@default287"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc58">4.14</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;4</B>&nbsp;&nbsp;<EM>
What is the purpose of the "def" keyword in Python?<BR>
<BR>
a) It is slang that means "the following code is really cool"<BR>
b) It indicates the start of a function<BR>
c) It indicates that the following indented section of code is to be stored for later<BR>
d) b and c are both true<BR>
e) None of the above
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;5</B>&nbsp;&nbsp;<EM>
What will the following Python program print out?
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
def fred():
   print "Zap"

def jane():
   print "ABC"

jane()
fred()
jane()
</EM></FONT></PRE><FONT COLOR=black><EM>a) Zap ABC jane fred jane<BR>
b) Zap ABC Zap<BR>
c) ABC Zap jane<BR>
d) ABC Zap ABC<BR>
e) Zap Zap Zap
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;6</B>&nbsp;&nbsp;<EM>
Rewrite your pay computation with time-and-a-half for overtime
and create a function called <TT>computepay</TT> which takes
two parameters (<TT>hours</TT> and <TT>rate</TT>).
</EM></FONT><PRE><FONT COLOR=black><EM>
Enter Hours: 45
Enter Rate: 10
Pay: 475.0
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;7</B>&nbsp;&nbsp;<EM>
Rewrite the grade program from the previous chapter 
using a function called <TT>computegrade</TT> that takes
a score as its parameter and returns a grade as a string.
</EM></FONT><PRE><FONT COLOR=black><EM>
Score   Grade
&gt; 0.9     A
&gt; 0.8     B
&gt; 0.7     C
&gt; 0.6     D
&lt;= 0.6    F

Program Execution:

Enter score: 0.95
A

Enter score: perfect
Bad score

Enter score: 10.0
Bad score

Enter score: 0.75
C

Enter score: 0.5
F
</EM></FONT></PRE>
<FONT COLOR=black><EM>Run the program repeatedly to test the various different values
for input.
</EM></FONT></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Iteration</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc59">Chapter&nbsp;5</A>&nbsp;&nbsp;Iteration</FONT></H1><!--SEC END -->

<A NAME="@default288"></A>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Updating variables</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc60">5.1</A>&nbsp;&nbsp;Updating variables</FONT></H2><!--SEC END -->

<A NAME="update"></A>
<A NAME="@default289"></A>
<A NAME="@default290"></A>
<FONT COLOR=black>A common pattern in assignment statements is an assignment statement
that updates a variable - 
where the new value of the variable depends on the old.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
x = x+1
</FONT></PRE><FONT COLOR=black>This means ``get the current value of <TT>x</TT>, add one, and then
update <TT>x</TT> with the new value.''<BR>
<BR>
If you try to update a variable that doesn't exist, you get an
error, because Python evaluates the right side before it assigns
a value to <TT>x</TT>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; x = x+1
NameError: name 'x' is not defined
</FONT></PRE><FONT COLOR=black>Before you can update a variable, you have to <B>initialize</B>
it, usually with a simple assignment:</FONT><BR>
<BR>
<A NAME="@default291"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; x = 0
&gt;&gt;&gt; x = x+1
</FONT></PRE><FONT COLOR=black>Updating a variable by adding 1 is called an <B>increment</B>;
subtracting 1 is called a <B>decrement</B>.</FONT><BR>
<BR>
<A NAME="@default292"></A>
<A NAME="@default293"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>The <TT>while</TT> statement</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc61">5.2</A>&nbsp;&nbsp;The <TT>while</TT> statement</FONT></H2><!--SEC END -->

<A NAME="@default294"></A>
<A NAME="@default295"></A>
<A NAME="@default296"></A>
<A NAME="@default297"></A>
<FONT COLOR=black>Computers are often used to automate repetitive tasks. Repeating
identical or similar tasks without making errors is something that
computers do well and people do poorly.
Because iteration is so common, Python provides several
language features to make it easier. <BR>
<BR>
One form of iteration in Python is the <TT>while</TT> statement. Here is 
a simple program that counts down from five and then says ``Blastoff!''.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
n = 5
while n &gt; 0:
    print n
    n = n-1
print 'Blastoff!'
</FONT></PRE><FONT COLOR=black>You can almost read the <TT>while</TT> statement as if it were English.
It means, ``While <TT>n</TT> is greater than 0,
display the value of <TT>n</TT> and then reduce the value of
<TT>n</TT> by 1. When you get to 0, exit the while statement and
display the word <TT>Blastoff!</TT>''<BR>
<BR>
<A NAME="@default298"></A><BR>
<BR>
More formally, here is the flow of execution for a <TT>while</TT> statement:
</FONT><OL type=1><LI><FONT COLOR=black>Evaluate the condition, yielding <TT>True</TT> or <TT>False</TT>.</FONT><BR>
<BR>
<LI><FONT COLOR=black>If the condition is false, exit the <TT>while</TT> statement
and continue execution at the next statement.</FONT><BR>
<BR>
<LI><FONT COLOR=black>If the condition is true, execute the
body and then go back to step 1.</FONT></OL>
<FONT COLOR=black>This type of flow is called a <B>loop</B> because the third step
loops back around to the top. Each time we execute the body of 
the loop, we call it an <B>iteration</B>. For the above loop, we 
would say, ``It had five iterations'' which means that the body of
of the loop was executed five times.<BR>
<BR>
<A NAME="@default299"></A>
<A NAME="@default300"></A>
<A NAME="@default301"></A><BR>
<BR>
The body of the loop should change the value of one or more variables
so that eventually the condition becomes false and the loop
terminates. 
We call the variable that changes each time the loop
executes and controls when the loop finishes the 
<B>iteration variable</B>.
If there is no iteration variable, the loop will repeat forever, 
resulting in an <B>infinite loop</B>. </FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Infinite loops</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc62">5.3</A>&nbsp;&nbsp;Infinite loops</FONT></H2><!--SEC END -->

<FONT COLOR=black>An endless source of amusement for 
programmers is the observation that the directions on shampoo,
``Lather, rinse, repeat,'' are an infinite loop because 
there is no <B>iteration variable</B> telling you how many times
to execute the loop.<BR>
<BR>
<A NAME="@default302"></A>
<A NAME="@default303"></A><BR>
<BR>
In the case of <TT>countdown</TT>, we can prove that the loop
terminates because we know that the value of <TT>n</TT> is finite, and we
can see that the value of <TT>n</TT> gets smaller each time through the
loop, so eventually we have to get to 0. Other times a loop is obviously
infinite because it has no iteration variable at all.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>``Infinite loops'' and <TT>break</TT></FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc63">5.4</A>&nbsp;&nbsp;``Infinite loops'' and <TT>break</TT></FONT></H2><!--SEC END -->

<A NAME="@default304"></A>
<A NAME="@default305"></A>
<FONT COLOR=black>Sometimes you don't know it's time to end a loop until you get half
way through the body. In that case you can write an infinite loop on purpose
and then use the <TT>break</TT> statement to jump out of the loop.<BR>
<BR>
This loop is obviously an <B>infinite loop</B> because the logical 
expression on the
<TT>while</TT> statement is simply the logical constant <TT>True</TT>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
n = 10
while True:
    print n, 
    n = n - 1
print 'Done!'
</FONT></PRE><FONT COLOR=black>If you make the mistake and run this code, you will learn quickly how
to stop a runaway Python process on your system or find where the power-off
button is on your computer. 
This program will 
run forever or until your battery runs out 
because the logical expression at the top of the loop 
is always true by virtue of the fact that the expression is the 
constant value <TT>True</TT>.<BR>
<BR>
While this is a dysfunctional infinite loop, we can still use this pattern
to build useful loops as long as we carefully add code to the 
body of the loop to explicitly exit the loop using <TT>break</TT> 
when we have reached 
the exit condition.<BR>
<BR>
For example, suppose you want to take input from the user until they
type <TT>done</TT>. You could write:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
while True:
    line = raw_input('&gt; ')
    if line == 'done':
        break
    print line
print 'Done!'
</FONT></PRE><FONT COLOR=black>The loop condition is <TT>True</TT>, which is always true, so the
loop runs repeatedly until it hits the break statement.<BR>
<BR>
Each time through, it prompts the user with an angle bracket.
If the user types <TT>done</TT>, the <TT>break</TT> statement exits
the loop. Otherwise the program echoes whatever the user types
and goes back to the top of the loop. Here's a sample run:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt; hello there
hello there
&gt; finished
finished
&gt; done
Done!
</FONT></PRE><FONT COLOR=black>This way of writing <TT>while</TT> loops is common because you
can check the condition anywhere in the loop (not just at the
top) and you can express the stop condition affirmatively
(``stop when this happens'') rather than negatively (``keep going
until that happens.'').</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Finishing iterations with <TT>continue</TT></FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc64">5.5</A>&nbsp;&nbsp;Finishing iterations with <TT>continue</TT></FONT></H2><!--SEC END -->

<A NAME="@default306"></A>
<A NAME="@default307"></A>
<FONT COLOR=black>Sometimes you are in an iteration of a loop and want to finish the
current iteration and immediately jump to the next iteration.
In that case you can use the <TT>continue</TT>
statement to skip to the next iteration without finishing the
body of the loop for the current iteration.<BR>
<BR>
Here is an example of a loop that copies its input until the user
types ``done'', but treats lines that start with the hash character
as lines not to be printed (kind of like Python comments).
</FONT><PRE><FONT SIZE=4 COLOR=blue>
while True:
    line = raw_input('&gt; ')
    if line[0] == '#' :
        continue
    if line == 'done':
        break
    print line
print 'Done!'
</FONT></PRE><FONT COLOR=black>Here is a sample run of this new program with <TT>continue</TT> added.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt; hello there
hello there
&gt; # don't print this
&gt; print this!
print this!
&gt; done
Done!
</FONT></PRE><FONT COLOR=black>All the lines are printed except the one that starts with the hash
sign because when the <TT>continue</TT> is executed, it ends 
the current iteration and jumps
back to the <TT>while</TT> statement to start the next iteration, thus 
skipping the <TT>print</TT> statement.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Definite loops using <TT>for</TT> </FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc65">5.6</A>&nbsp;&nbsp;Definite loops using <TT>for</TT></FONT> </H2><!--SEC END -->

<A NAME="@default308"></A>
<A NAME="@default309"></A>
<FONT COLOR=black>Sometimes we want to loop through a <B>set</B> of things such 
as a list of words, the lines in a file or a list of numbers.
When we have a list of things to loop through, we can
construct a <EM>definite</EM> loop using a <TT>for</TT> statement.
We call the <TT>while</TT> statement an <EM>indefinite</EM> loop
because it simply loops until some condition becomes <TT>False</TT> 
whereas the <TT>for</TT> loop is looping through a known
set of items so it runs through as many iterations as there
are items in the set.<BR>
<BR>
The syntax of a <TT>for</TT> loop is similar to the <TT>while</TT> loop
in that there is a <TT>for</TT> statement and a loop body:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
friends = ['Joseph', 'Glenn', 'Sally']
for friend in friends:
    print 'Happy New Year:', friend
print 'Done!'
</FONT></PRE><FONT COLOR=black>In Python terms, 
the variable <TT>friends</TT> is a list<SUP><A NAME="text7" HREF="#note7">1</A></SUP> 
of three strings and the <TT>for</TT>
loop goes through the list and executes the body once
for each of the three strings in the list resulting in this output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Happy New Year: Joseph
Happy New Year: Glenn
Happy New Year: Sally
Done!
</FONT></PRE>
<FONT COLOR=black>Translating this <TT>for</TT> loop to English is not as direct as the 
<TT>while</TT>, but if you think of friends as a <B>set</B>,
it goes like this: ``Run the statements in the body of the 
for loop once for each friend <EM>in</EM> the set named friends.''.<BR>
<BR>
Looking at the <TT>for</TT> loop, <B>for</B> and <B>in</B> are reserved
Python keywords, and <TT>friend</TT> and <TT>friends</TT> are variables.<TT><BR>
<BR>
<B>for</B> friend <B>in</B> friends<B>:<BR>
<CODE>    </CODE>print</B> 'Happy New Year', friend </TT><BR>
<BR>
In particular, <TT>friend</TT> is the <B>iteration variable</B> for 
the for loop. The variable <TT>friend</TT> changes for each iteration of
the loop and controls when the <TT>for</TT> loop completes. The 
<B>iteration variable</B> steps successively through the 
three strings stored in the <TT>friends</TT> variable.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Loop patterns</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc66">5.7</A>&nbsp;&nbsp;Loop patterns</FONT></H2><!--SEC END -->

<FONT COLOR=black>Often we use a for or while loop to go through a list of items
or the contents of a file and we are looking for something such as
the largest or smallest value of the data we scan through.<BR>
<BR>
These loops are generally constructed by:
</FONT><UL><LI><FONT COLOR=black>Initializing one or more variables before the loop starts.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Performing some computation on each item in the loop body, 
possibly changing the variables in the body of the loop.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Looking at the resulting variables when the loop completes.</FONT></UL>
<FONT COLOR=black>We will use a list of numbers to demonstrate the concepts and construction
of these loop patterns. </FONT><BR>
<BR>
<!--TOC subsection <FONT COLOR=black><FONT SIZE=3>Counting and summing loops</FONT></FONT>-->

<H3><FONT COLOR=black><A NAME="htoc67">5.7.1</A>&nbsp;&nbsp;Counting and summing loops</FONT></H3><!--SEC END -->

<FONT COLOR=black>For example, to count the number of items
in a list, we would write the following <TT>for</TT> loop:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
count = 0
for itervar in [3, 41, 12, 9, 74, 15]:
    count = count + 1
print 'Count: ', count
</FONT></PRE><FONT COLOR=black>We set the variable <TT>count</TT> to zero before the loop starts,
then we write a <TT>for</TT> loop to run through the list of numbers.
Our <B>iteration</B> variable is named <TT>itervar</TT> and while we do
not use <TT>itervar</TT> in the loop, it does control the loop and cause
the loop body to be executed once for each of the values in the list.<BR>
<BR>
In the body of the loop, we add one to the current value of <TT>count</TT>
for each of the values in the list. While the loop is executing, the 
value of <TT>count</TT> is the number of values we have seen ``so far''.<BR>
<BR>
Once the loop completes, the value of <TT>count</TT> is the total number
of items. The total number ``falls in our lap'' at the end of the 
loop. We construct the loop so that we have what we want when the loop
finishes.<BR>
<BR>
Another similar loop that computes the total of a set of numbers
is as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
total = 0
for itervar in [3, 41, 12, 9, 74, 15]:
    total = total + itervar
print 'Total: ', total
</FONT></PRE><FONT COLOR=black>In this loop we <EM>do</EM> use the <B>iteration variable</B>.
Instead of simply adding one to the <TT>count</TT> as in the previous loop, 
we add the actual number (3, 41, 12, etc.) to the running 
total during each loop iteration.
If you think about the variable <TT>total</TT>, it contains the 
``running total of the values so far''. So before the loop
starts <TT>total</TT> is zero because we have not yet seen any values,
during the loop <TT>total</TT> is the running total, and at the end of 
the loop <TT>total</TT> is the overall total of all the values 
in the list.<BR>
<BR>
As the loop executes, <TT>total</TT> accumulates the sum of the
elements; a variable used this way is sometimes called an
<B>accumulator</B>.
<A NAME="@default310"></A><BR>
<BR>
Neither the counting loop nor the summing loop are particularly 
useful in practice because there are built-in functions 
<TT>len()</TT> and <TT>sum()</TT> that compute the number of 
items in a list and the total of the items in the list
respectively.</FONT><BR>
<BR>
<!--TOC subsection <FONT COLOR=black><FONT SIZE=3>Maximum and minimum loops</FONT></FONT>-->

<H3><FONT COLOR=black><A NAME="htoc68">5.7.2</A>&nbsp;&nbsp;Maximum and minimum loops</FONT></H3><!--SEC END -->

<A NAME="@default311"></A>
<A NAME="@default312"></A>
<A NAME="@default313"></A>
<A NAME="@default314"></A>
<A NAME="maximumloop"></A><FONT COLOR=black>
To find the largest value in a list or sequence, we construct the
following loop:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
largest = None
print 'Before:', largest
for itervar in [3, 41, 12, 9, 74, 15]:
    if largest is None or itervar &gt; largest :
        largest = itervar
    print 'Loop:', itervar, largest
print 'Largest:', largest
</FONT></PRE><FONT COLOR=black>When the program executes, the output is as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Before: None
Loop: 3 3
Loop: 41 41
Loop: 12 41
Loop: 9 41
Loop: 74 74
Loop: 15 74
Largest: 74
</FONT></PRE><FONT COLOR=black>The variable <TT>largest</TT> is best thought of as 
the ``largest value we have seen so far''.
Before the loop, we set <TT>largest</TT> to the constant <TT>None</TT>. 
<TT>None</TT> is a special constant value which we can 
store in a variable to mark 
the variable as ``empty''. <BR>
<BR>
Before the loop starts, the largest value we have seen so far 
is <TT>None</TT> since we have not yet seen any values. While the 
loop is executing, if <TT>largest</TT> is <TT>None</TT> then we take
the first value we see as the largest so far. You can see in 
the first iteration when the value of <TT>itervar</TT> is 3,
since <TT>largest</TT> is <TT>None</TT>, we immediately set 
<TT>largest</TT> to be 3.<BR>
<BR>
After the first iteration, <TT>largest</TT> is no longer <TT>None</TT>,
so the second part of the compound logical expression that checks
<TT>itervar &gt; largest</TT> triggers only when we see a value that is
larger than the ``largest so far''. When we see a new ``even larger''
value we take that new value for <TT>largest</TT>. You can see in the 
program output that <TT>largest</TT> progresses from 3 to 41 to 74.<BR>
<BR>
At the end of the loop, we have scanned all of the values and
the variable <TT>largest</TT> now does contain the largest value
in the list.<BR>
<BR>
To compute the smallest number, the code is very similar with one
small change:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
smallest = None
print 'Before:', smallest
for itervar in [3, 41, 12, 9, 74, 15]:
    if smallest is None or itervar &lt; smallest:
        smallest = itervar
    print 'Loop:', itervar, smallest
print 'Smallest:', smallest
</FONT></PRE><FONT COLOR=black>Again, <TT>smallest</TT> is the ``smallest so far'' before, during, and after the 
loop executes. When the loop has completed, <TT>smallest</TT> contains the
minimum value in the list.<BR>
<BR>
Again as in counting and summing, the built-in functions 
<TT>max()</TT> and <TT>min()</TT> make writing these exact loops
unnecessary.<BR>
<BR>
The following is a simple version of the Python built-in
<TT>min()</TT> function:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def min(values):
    smallest = None
    for value in values:
        if smallest is None or value &lt; smallest:
            smallest = value
    return smallest
</FONT></PRE><FONT COLOR=black>In the function version of the smallest code, we removed all of the 
<TT>print</TT> statements so as to be equivalent to the <TT>min</TT> 
function which is already built-in to Python.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc69">5.8</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<FONT COLOR=black>As you start writing bigger programs, you might find yourself
spending more time debugging. More code means more chances to
make an error and more places for bugs to hide.<BR>
<BR>
<A NAME="@default315"></A>
<A NAME="@default316"></A><BR>
<BR>
One way to cut your debugging time is ``debugging by bisection.''
For example, if there are 100 lines in your program and you
check them one at a time, it would take 100 steps.<BR>
<BR>
Instead, try to break the problem in half. Look at the middle
of the program, or near it, for an intermediate value you
can check. Add a <TT>print</TT> statement (or something else
that has a verifiable effect) and run the program.<BR>
<BR>
If the mid-point check is incorrect, the problem must be in the
first half of the program. If it is correct, the problem is
in the second half.<BR>
<BR>
Every time you perform a check like this, you halve the number
of lines you have to search. After six steps (which is much
less than 100), you would be down to one or two lines of code,
at least in theory.<BR>
<BR>
In practice it is not always clear what
the ``middle of the program'' is and not always possible to
check it. It doesn't make sense to count lines and find the
exact midpoint. Instead, think about places
in the program where there might be errors and places where it
is easy to put a check. Then choose a spot where you
think the chances are about the same that the bug is before
or after the check.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc70">5.9</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>accumulator:</B></FONT><DD><FONT COLOR=black> A variable used in a loop to add up or
accumulate a result.
</FONT><A NAME="@default317"></A><BR>
<BR>
<DT><FONT COLOR=black><B>counter:</B></FONT><DD><FONT COLOR=black> A variable used in a loop to count the number
of times something happened. We initialize a counter to 
zero and then increment the counter each time we want to
``count'' something.
</FONT><A NAME="@default318"></A><BR>
<BR>
<DT><FONT COLOR=black><B>decrement:</B></FONT><DD><FONT COLOR=black> An update that decreases the value of a variable.
</FONT><A NAME="@default319"></A><BR>
<BR>
<DT><FONT COLOR=black><B>initialize:</B></FONT><DD><FONT COLOR=black> An assignment that gives an initial value to
a variable that will be updated.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>increment:</B></FONT><DD><FONT COLOR=black> An update that increases the value of a variable
(often by one).
</FONT><A NAME="@default320"></A><BR>
<BR>
<DT><FONT COLOR=black><B>infinite loop:</B></FONT><DD><FONT COLOR=black> A loop in which the terminating condition is
never satisfied or for which there is no termination condition.
</FONT><A NAME="@default321"></A><BR>
<BR>
<DT><FONT COLOR=black><B>iteration:</B></FONT><DD><FONT COLOR=black> Repeated execution of a set of statements using
either a recursive function call or a loop.
</FONT><A NAME="@default322"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc71">5.10</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Write a program which repeatedly reads numbers until the user
enters ``done''.
Once ``done'' is entered, print out the total, count, and average
of the numbers. If the user enters anything other than a number, 
detect their mistake using <TT>try</TT> and <TT>except</TT> and 
print an error message and skip to the next number.
</EM></FONT><PRE><FONT COLOR=black><EM>
Enter a number: 4
Enter a number: 5
Enter a number: bad data
Invalid input
Enter a number: 7
Enter a number: done
16 3 5.33333333333
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Write another program that prompts for a list of numbers as above
and at the end prints out both the maximum and minimum of the numbers instead of the average.
</EM></FONT></DIV><BR>
<!--BEGIN NOTES chapter-->
<HR WIDTH="50%" SIZE=1><DL><DT><FONT SIZE=5 COLOR=black><A NAME="note7" HREF="#text7">1</A></FONT><DD><FONT COLOR=black>We will 
examine lists in more detail in a later chapter
</FONT></DL>
<!--END NOTES-->
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Strings</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc72">Chapter&nbsp;6</A>&nbsp;&nbsp;Strings</FONT></H1><!--SEC END -->

<A NAME="strings"></A>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>A string is a sequence</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc73">6.1</A>&nbsp;&nbsp;A string is a sequence</FONT></H2><!--SEC END -->

<A NAME="@default323"></A>
<A NAME="@default324"></A>
<A NAME="@default325"></A>
<A NAME="@default326"></A>
<FONT COLOR=black>A string is a <B>sequence</B> of characters. 
You can access the characters one at a time with the
bracket operator:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; letter = fruit[1]
</FONT></PRE><A NAME="@default327"></A><FONT COLOR=black>
The second statement extracts the character at index position 1 from the 
<TT>fruit</TT> variable and assigns it to <TT>letter</TT> variable. <BR>
<BR>
The expression in brackets is called an <B>index</B>. 
The index indicates which character in the sequence you
want (hence the name).<BR>
<BR>
But you might not get what you expect:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print letter
a
</FONT></PRE><FONT COLOR=black>For most people, the first letter of <CODE>'banana'</CODE> is <TT>b</TT>, not
<TT>a</TT>. But in Python, the index is an offset from the
beginning of the string, and the offset of the first letter is zero.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; letter = fruit[0]
&gt;&gt;&gt; print letter
b
</FONT></PRE><FONT COLOR=black>So <TT>b</TT> is the 0th letter (``zero-eth'') of <CODE>'banana'</CODE>, <TT>a</TT>
is the 1th letter (``one-eth''), and <TT>n</TT> is the 2th (``two-eth'')
letter.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook009.png"></FONT></DIV>
<BR>
<A NAME="@default328"></A>
<A NAME="@default329"></A><BR>
<FONT COLOR=black>You can use any expression, including variables and operators, as an
index, but the value of the index has to be an integer. Otherwise you
get:</FONT><BR>
<BR>
<A NAME="@default330"></A>
<A NAME="@default331"></A>
<A NAME="@default332"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; letter = fruit[1.5]
TypeError: string indices must be integers
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Getting the length of a string using <TT>len</TT></FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc74">6.2</A>&nbsp;&nbsp;Getting the length of a string using <TT>len</TT></FONT></H2><!--SEC END -->

<A NAME="@default333"></A>
<A NAME="@default334"></A>
<FONT COLOR=black><TT>len</TT> is a built-in function that returns the number of characters
in a string:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; len(fruit)
6
</FONT></PRE><FONT COLOR=black>To get the last letter of a string, you might be tempted to try something
like this:</FONT><BR>
<BR>
<A NAME="@default335"></A>
<A NAME="@default336"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; length = len(fruit)
&gt;&gt;&gt; last = fruit[length]
IndexError: string index out of range
</FONT></PRE><FONT COLOR=black>The reason for the <TT>IndexError</TT> is that there is no letter in <TT>'banana'</TT> with the index 6. Since we started counting at zero, the
six letters are numbered 0 to 5. To get the last character, you have
to subtract 1 from <TT>length</TT>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; last = fruit[length-1]
&gt;&gt;&gt; print last
a
</FONT></PRE><FONT COLOR=black>Alternatively, you can use negative indices, which count backward from
the end of the string. The expression <TT>fruit[-1]</TT> yields the last
letter, <TT>fruit[-2]</TT> yields the second to last, and so on.</FONT><BR>
<BR>
<A NAME="@default337"></A>
<A NAME="@default338"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Traversal through a string with a loop</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc75">6.3</A>&nbsp;&nbsp;Traversal through a string with a loop</FONT></H2><!--SEC END -->

<A NAME="for"></A>
<A NAME="@default339"></A>
<A NAME="@default340"></A>
<A NAME="@default341"></A>
<A NAME="@default342"></A>
<A NAME="@default343"></A>
<A NAME="@default344"></A>
<FONT COLOR=black>A lot of computations involve processing a string one character at a
time. Often they start at the beginning, select each character in
turn, do something to it, and continue until the end. This pattern of
processing is called a <B>traversal</B>. One way to write a traversal
is with a <TT>while</TT> loop:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
index = 0
while index &lt; len(fruit):
    letter = fruit[index]
    print letter
    index = index + 1
</FONT></PRE><FONT COLOR=black>This loop traverses the string and displays each letter on a line by
itself. The loop condition is <TT>index &lt; len(fruit)</TT>, so
when <TT>index</TT> is equal to the length of the string, the
condition is false, and the body of the loop is not executed. The
last character accessed is the one with the index <TT>len(fruit)-1</TT>,
which is the last character in the string.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Write a <TT>while</TT> loop that starts at the last character in the string
and works its way backwards to the first character in the string, 
printing each letter on a separate line, except backwards.
</EM></FONT></DIV><BR>
<FONT COLOR=black>Another way to write a traversal is with a <TT>for</TT> loop:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
for char in fruit:
    print char
</FONT></PRE><FONT COLOR=black>Each time through the loop, the next character in the string is assigned
to the variable <TT>char</TT>. The loop continues until no characters are
left.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>String slices</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc76">6.4</A>&nbsp;&nbsp;String slices</FONT></H2><!--SEC END -->

<A NAME="slice"></A>
<A NAME="@default345"></A>
<A NAME="@default346"></A>
<A NAME="@default347"></A>
<A NAME="@default348"></A>
<A NAME="@default349"></A>
<FONT COLOR=black>A segment of a string is called a <B>slice</B>. Selecting a slice is
similar to selecting a character:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; s = 'Monty Python'
&gt;&gt;&gt; print s[0:5]
Monty
&gt;&gt;&gt; print s[6:13]
Python
</FONT></PRE><FONT COLOR=black>The operator <TT>[n:m]</TT> returns the part of the string from the 
``n-eth'' character to the ``m-eth'' character, including the first but
excluding the last. <BR>
<BR>
If you omit the first index (before the colon), the slice starts at
the beginning of the string. If you omit the second index, the slice
goes to the end of the string:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; fruit[:3]
'ban'
&gt;&gt;&gt; fruit[3:]
'ana'
</FONT></PRE><FONT COLOR=black>If the first index is greater than or equal to the second the result
is an <B>empty string</B>, represented by two quotation marks:</FONT><BR>
<BR>
<A NAME="@default350"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fruit = 'banana'
&gt;&gt;&gt; fruit[3:3]
''
</FONT></PRE><FONT COLOR=black>An empty string contains no characters and has length 0, but other
than that, it is the same as any other string.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Given that <TT>fruit</TT> is a string, what does
<TT>fruit[:]</TT> mean?</EM></FONT><BR>
<BR>
<A NAME="@default351"></A>
<A NAME="@default352"></A></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Strings are immutable</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc77">6.5</A>&nbsp;&nbsp;Strings are immutable</FONT></H2><!--SEC END -->

<A NAME="@default353"></A>
<A NAME="@default354"></A>
<A NAME="@default355"></A>
<FONT COLOR=black>It is tempting to use the <TT>[]</TT> operator on the left side of an
assignment, with the intention of changing a character in a string.
For example:</FONT><BR>
<BR>
<A NAME="@default356"></A>
<A NAME="@default357"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; greeting = 'Hello, world!'
&gt;&gt;&gt; greeting[0] = 'J'
TypeError: object does not support item assignment
</FONT></PRE><FONT COLOR=black>The ``object'' in this case is the string and the ``item'' is
the character you tried to assign. For now, an <B>object</B> is
the same thing as a value, but we will refine that definition
later. An <B>item</B> is one of the values in a sequence.<BR>
<BR>
<A NAME="@default358"></A>
<A NAME="@default359"></A>
<A NAME="@default360"></A>
<A NAME="@default361"></A><BR>
<BR>
The reason for the error is that
strings are <B>immutable</B>, which means you can't change an
existing string. The best you can do is create a new string
that is a variation on the original:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; greeting = 'Hello, world!'
&gt;&gt;&gt; new_greeting = 'J' + greeting[1:]
&gt;&gt;&gt; print new_greeting
Jello, world!
</FONT></PRE><FONT COLOR=black>This example concatenates a new first letter onto
a slice of <TT>greeting</TT>. It has no effect on
the original string.</FONT><BR>
<BR>
<A NAME="@default362"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Looping and counting</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc78">6.6</A>&nbsp;&nbsp;Looping and counting</FONT></H2><!--SEC END -->

<A NAME="counter"></A>
<A NAME="@default363"></A>
<A NAME="@default364"></A>
<A NAME="@default365"></A>
<A NAME="@default366"></A>
<FONT COLOR=black>The following program counts the number of times the letter <TT>a</TT>
appears in a string:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
word = 'banana'
count = 0
for letter in word:
    if letter == 'a':
        count = count + 1
print count
</FONT></PRE><FONT COLOR=black>This program demonstrates another pattern of computation called a <B>counter</B>. The variable <TT>count</TT> is initialized to 0 and then
incremented each time an <TT>a</TT> is found.
When the loop exits, <TT>count</TT>
contains the result---the total number of <TT>a</TT>'s.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;
<A NAME="@default367"></A><BR>
<BR>
<EM>Encapsulate this code in a function named <TT>count</TT>, and generalize it so that it accepts the string and the
letter as arguments.
</EM></FONT></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>The <TT>in</TT> operator</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc79">6.7</A>&nbsp;&nbsp;The <TT>in</TT> operator</FONT></H2><!--SEC END -->

<A NAME="inboth"></A>
<A NAME="@default368"></A>
<A NAME="@default369"></A>
<A NAME="@default370"></A>
<A NAME="@default371"></A>
<FONT COLOR=black>The word <TT>in</TT> is a boolean operator that takes two strings and
returns <TT>True</TT> if the first appears as a substring in the second:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 'a' in 'banana'
True
&gt;&gt;&gt; 'seed' in 'banana'
False
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>String comparison</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc80">6.8</A>&nbsp;&nbsp;String comparison</FONT></H2><!--SEC END -->

<A NAME="@default372"></A>
<A NAME="@default373"></A>
<FONT COLOR=black>The comparison operators work on strings. To see if two strings are equal:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if word == 'banana':
    print  'All right, bananas.'
</FONT></PRE><FONT COLOR=black>Other comparison operations are useful for putting words in alphabetical
order:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
if word &lt; 'banana':
    print 'Your word,' + word + ', comes before banana.'
elif word &gt; 'banana':
    print 'Your word,' + word + ', comes after banana.'
else:
    print 'All right, bananas.'
</FONT></PRE><FONT COLOR=black>Python does not handle uppercase and lowercase letters the same way
that people do. All the uppercase letters come before all the
lowercase letters, so:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Your word, Pineapple, comes before banana.
</FONT></PRE><FONT COLOR=black>A common way to address this problem is to convert strings to a
standard format, such as all lowercase, before performing the
comparison. Keep that in mind in case you have to defend yourself
against a man armed with a Pineapple.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3><TT>string</TT> methods</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc81">6.9</A>&nbsp;&nbsp;<TT>string</TT> methods</FONT></H2><!--SEC END -->

<FONT COLOR=black>Strings are an example of Python <B>objects</B>. An object contains
both data (the actual string itself) as well as <B>methods</B>, which
are effectively functions which that are built into the object and 
are available to any <B>instance</B> of the object.<BR>
<BR>
Python has a function called <TT>dir</TT> that lists the methods available
for an object. The <TT>type</TT> function shows the type of an object 
and the <TT>dir</TT> function shows the available methods.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; stuff = 'Hello world'
&gt;&gt;&gt; type(stuff)
&lt;type 'str'&gt;
&gt;&gt;&gt; dir(stuff)
['capitalize', 'center', 'count', 'decode', 'encode', 
'endswith', 'expandtabs', 'find', 'format', 'index', 
'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 
'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 
'partition', 'replace', 'rfind', 'rindex', 'rjust', 
'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 
'startswith', 'strip', 'swapcase', 'title', 'translate', 
'upper', 'zfill']
&gt;&gt;&gt; help(str.capitalize)
Help on method_descriptor:

capitalize(...)
    S.capitalize() -&gt; string
    
    Return a copy of the string S with only its first character
    capitalized.
&gt;&gt;&gt;
</FONT></PRE>
<FONT COLOR=black>While the <TT>dir</TT> function lists the methods, and you 
can use <TT>help</TT> to get some simple documentation on a method, 
a better source of documentation for string methods would be
<TT>docs.python.org/library/string.html</TT>.<BR>
<BR>
Calling a <B>method</B> is similar to calling a function---it 
takes arguments and
returns a value---but the syntax is different. We call a method
by appending the method name to the variable name using the period 
as a delimiter.<BR>
<BR>
For example, the
method <TT>upper</TT> takes a string and returns a new string with
all uppercase letters:<BR>
<BR>
<A NAME="@default374"></A>
<A NAME="@default375"></A><BR>
<BR>
Instead of the function syntax <TT>upper(word)</TT>, it uses
the method syntax <TT>word.upper()</TT>.</FONT><BR>
<BR>
<A NAME="@default376"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; word = 'banana'
&gt;&gt;&gt; new_word = word.upper()
&gt;&gt;&gt; print new_word
BANANA
</FONT></PRE><FONT COLOR=black>This form of dot notation specifies the name of the method, <TT>upper</TT>, and the name of the string to apply the method to, <TT>word</TT>. The empty parentheses indicate that this method takes no
argument.<BR>
<BR>
<A NAME="@default377"></A><BR>
<BR>
A method call is called an <B>invocation</B>; in this case, we would
say that we are invoking <TT>upper</TT> on the <TT>word</TT>.<BR>
<BR>
<A NAME="@default378"></A><BR>
<BR>
As it turns out, there is a string method named <TT>find</TT> that
is remarkably similar to the function we wrote:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; word = 'banana'
&gt;&gt;&gt; index = word.find('a')
&gt;&gt;&gt; print index
1
</FONT></PRE><FONT COLOR=black>In this example, we invoke <TT>find</TT> on <TT>word</TT> and pass
the letter we are looking for as a parameter.<BR>
<BR>
Actually, the <TT>find</TT> method is more general than our function;
it can find substrings, not just characters:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; word.find('na')
2
</FONT></PRE><FONT COLOR=black>It can take as a second argument the index where it should start:</FONT><BR>
<BR>
<A NAME="@default379"></A>
<A NAME="@default380"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; word.find('na', 3)
4
</FONT></PRE><FONT COLOR=black>One common task is to remove white space (spaces, tabs, or newlines) from
the beginning and end of a string using the <TT>strip</TT> method:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; line = '  Here we go  '
&gt;&gt;&gt; line.strip()
'Here we go'
</FONT></PRE><FONT COLOR=black>Some methods such as <B>startswith</B> return boolean values.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; line = 'Please have a nice day'
&gt;&gt;&gt; line.startswith('Please')
True
&gt;&gt;&gt; line.startswith('p')
False
</FONT></PRE><FONT COLOR=black>You will note that <TT>startswith</TT> requires case to match so sometimes
we take a line and map it all to lowercase before we do any checking
using the <TT>lower</TT> method.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; line = 'Please have a nice day'
&gt;&gt;&gt; line.startswith('p')
False
&gt;&gt;&gt; line.lower()
'please have a nice day'
&gt;&gt;&gt; line.lower().startswith('p')
True
</FONT></PRE><FONT COLOR=black>In the last example, the method <TT>lower</TT> is called
and then we use <TT>startswith</TT>
to check to see if the resulting lowercase string
starts with the letter ``p''. As long as we are careful
with the order, we can make multiple method calls in a
single expression.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;4</B>&nbsp;&nbsp;
<A NAME="@default381"></A>
<A NAME="@default382"></A><BR>
<BR>
<EM>There is a string method called <TT>count</TT> that is similar
to the function in the previous exercise. Read the documentation
of this method at
<TT>docs.python.org/library/string.html</TT>
and write an invocation that counts the number of times the 
letter a occurs
in <CODE>'banana'</CODE>.
</EM></FONT></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Parsing strings</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc82">6.10</A>&nbsp;&nbsp;Parsing strings</FONT></H2><!--SEC END -->

<FONT COLOR=black>Often, we want to look into a string and find a substring. For example
if we were presented a series of lines formatted as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From stephen.marquard@<B> uct.ac.za</B> Sat Jan  5 09:14:16 2008
</FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black>And we wanted to pull out only the second half of the address (i.e.
<TT>uct.ac.za</TT>) from each line. We can do this by using the <TT>find</TT>
method and string slicing. <BR>
<BR>
First, we will find the position of the at-sign in the string. Then we will
find the position of the first space <EM>after</EM> the at-sign. And then we
will use string slicing to extract the portion of the string which we 
are looking for.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; data = 'From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008'
&gt;&gt;&gt; atpos = data.find('@')
&gt;&gt;&gt; print atpos
21
&gt;&gt;&gt; sppos = data.find(' ',atpos)
&gt;&gt;&gt; print sppos
31
&gt;&gt;&gt; host = data[atpos+1:sppos]
&gt;&gt;&gt; print host
uct.ac.za
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>We use a version of the <TT>find</TT> method which allows us to specify
a position in the string where we want <TT>find</TT> to start looking.
When we slice, we extract the characters 
from ``one beyond the at-sign through up to <EM>but not including</EM> the 
space character''. <BR>
<BR>
The documentation for the <TT>find</TT> method is available at
<TT>docs.python.org/library/string.html</TT>.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Format operator</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc83">6.11</A>&nbsp;&nbsp;Format operator</FONT></H2><!--SEC END -->

<A NAME="@default383"></A>
<A NAME="@default384"></A>
<FONT COLOR=black>The <B>format operator</B>, <TT>%</TT>
allows us to construct strings, replacing parts of the strings
with the data stored in variables.
When applied to integers, <TT>%</TT> is the modulus operator. But
when the first operand is a string, <TT>%</TT> is the format operator.<BR>
<BR>
<A NAME="@default385"></A><BR>
<BR>
The first operand is the <B>format string</B>, which contains
one or more <B>format sequences</B> that
specify how
the second operand is formatted. The result is a string.<BR>
<BR>
<A NAME="@default386"></A><BR>
<BR>
For example, the format sequence <CODE>'%d'</CODE> means that
the second operand should be formatted as an
integer (<TT>d</TT> stands for ``decimal''):
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; camels = 42
&gt;&gt;&gt; '%d' % camels
'42'
</FONT></PRE><FONT COLOR=black>The result is the string <CODE>'42'</CODE>, which is not to be confused
with the integer value <TT>42</TT>.<BR>
<BR>
A format sequence can appear anywhere in the string,
so you can embed a value in a sentence:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; camels = 42
&gt;&gt;&gt; 'I have spotted %d camels.' % camels
'I have spotted 42 camels.'
</FONT></PRE><FONT COLOR=black>If there is more than one format sequence in the string,
the second argument has to be a tuple. Each format sequence is
matched with an element of the tuple, in order.<BR>
<BR>
The following example uses <CODE>'%d'</CODE> to format an integer,
<CODE>'%g'</CODE> to format
a floating-point number (don't ask why), and <CODE>'%s'</CODE> to format
a string:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 'In %d years I have spotted %g %s.' % (3, 0.1, 'camels')
'In 3 years I have spotted 0.1 camels.'
</FONT></PRE><FONT COLOR=black>The number of elements in the tuple has to match the number
of format sequences in the string. Also, the types of the
elements have to match the format sequences:</FONT><BR>
<BR>
<A NAME="@default387"></A>
<A NAME="@default388"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; '%d %d %d' % (1, 2)
TypeError: not enough arguments for format string
&gt;&gt;&gt; '%d' % 'dollars'
TypeError: illegal argument type for built-in operation
</FONT></PRE><FONT COLOR=black>In the first example, there aren't enough elements; in the
second, the element is the wrong type.<BR>
<BR>
The format operator is powerful, but it can be difficult to use. You
can read more about it at
<TT>docs.python.org/lib/typesseq-strings.html</TT>.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc84">6.12</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="@default389"></A>
<FONT COLOR=black>A skill that you should cultivate as you program is always
asking yourself, ``What could go wrong here?'' or alternatively,
``What crazy thing might our user do to crash our (seemingly) 
perfect program?''.<BR>
<BR>
For example, look at the program which we used to demonstrate
the <TT>while</TT> loop in the chapter on iteration:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
while True:
    line = raw_input('&gt; ')
    if line[0] == '#' :
        continue
    if line == 'done':
        break
    print line

print 'Done!'
</FONT></PRE><FONT COLOR=black>Look what happens when the user enters an empty line of input:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt; hello there
hello there
&gt; # don't print this
&gt; print this!
print this!
&gt; 
Traceback (most recent call last):
  File "copytildone.py", line 3, in &lt;module&gt;
    if line[0] == '#' :
</FONT></PRE><FONT COLOR=black>The code works fine until it is presented an empty line. Then
there is no zeroth character so we get a traceback. There are two
solutions to this to make line three ``safe'' even if the line is 
empty.<BR>
<BR>
One possibility is to simply use the <TT>startswith</TT> method
which returns <TT>False</TT> if the string is empty.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
    if line.startswith('#') :
</FONT></PRE><A NAME="@default390"></A>
<A NAME="@default391"></A><FONT COLOR=black>
Another way to safely write the <TT>if</TT> statement using the <B>guardian</B>
pattern and make sure the second logical expression is evaluated 
only where there is at least one character in the string.:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
    if len(line) &gt; 0 and line[0] == '#' :
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc85">6.13</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>counter:</B></FONT><DD><FONT COLOR=black> A variable used to count something, usually initialized
to zero and then incremented.
</FONT><A NAME="@default392"></A><BR>
<BR>
<DT><FONT COLOR=black><B>empty string:</B></FONT><DD><FONT COLOR=black> A string with no characters and length 0, represented
by two quotation marks.
</FONT><A NAME="@default393"></A><BR>
<BR>
<DT><FONT COLOR=black><B>format operator:</B></FONT><DD><FONT COLOR=black> An operator, <TT>%</TT>, that takes a format
string and a tuple and generates a string that includes
the elements of the tuple formatted as specified by the format string.
</FONT><A NAME="@default394"></A>
<A NAME="@default395"></A><BR>
<BR>
<DT><FONT COLOR=black><B>format sequence:</B></FONT><DD><FONT COLOR=black> A sequence of characters in a format string,
like <TT>%d</TT>, that specifies how a value should be formatted.
</FONT><A NAME="@default396"></A><BR>
<BR>
<DT><FONT COLOR=black><B>format string:</B></FONT><DD><FONT COLOR=black> A string, used with the format operator, that
contains format sequences.
</FONT><A NAME="@default397"></A><BR>
<BR>
<DT><FONT COLOR=black><B>flag:</B></FONT><DD><FONT COLOR=black> A boolean variable used to indicate whether a condition
is true.
</FONT><A NAME="@default398"></A><BR>
<BR>
<DT><FONT COLOR=black><B>invocation:</B></FONT><DD><FONT COLOR=black> A statement that calls a method.
</FONT><A NAME="@default399"></A><BR>
<BR>
<DT><FONT COLOR=black><B>immutable:</B></FONT><DD><FONT COLOR=black> The property of a sequence whose items cannot
be assigned.
</FONT><A NAME="@default400"></A><BR>
<BR>
<DT><FONT COLOR=black><B>index:</B></FONT><DD><FONT COLOR=black> An integer value used to select an item in
a sequence, such as a character in a string.
</FONT><A NAME="@default401"></A><BR>
<BR>
<DT><FONT COLOR=black><B>item:</B></FONT><DD><FONT COLOR=black> One of the values in a sequence.
</FONT><A NAME="@default402"></A><BR>
<BR>
<DT><FONT COLOR=black><B>method:</B></FONT><DD><FONT COLOR=black> A function that is associated with an object and called
using dot notation.
</FONT><A NAME="@default403"></A><BR>
<BR>
<DT><FONT COLOR=black><B>object:</B></FONT><DD><FONT COLOR=black> Something a variable can refer to. For now,
you can use ``object'' and ``value'' interchangeably.
</FONT><A NAME="@default404"></A><BR>
<BR>
<DT><FONT COLOR=black><B>search:</B></FONT><DD><FONT COLOR=black> A pattern of traversal that stops
when it finds what it is looking for.
</FONT><A NAME="@default405"></A>
<A NAME="@default406"></A><BR>
<BR>
<DT><FONT COLOR=black><B>sequence:</B></FONT><DD><FONT COLOR=black> An ordered set; that is, a set of
values where each value is identified by an integer index.
</FONT><A NAME="@default407"></A><BR>
<BR>
<DT><FONT COLOR=black><B>slice:</B></FONT><DD><FONT COLOR=black> A part of a string specified by a range of indices.
</FONT><A NAME="@default408"></A><BR>
<BR>
<DT><FONT COLOR=black><B>traverse:</B></FONT><DD><FONT COLOR=black> To iterate through the items in a sequence,
performing a similar operation on each.
</FONT><A NAME="@default409"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc86">6.14</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;5</B>&nbsp;&nbsp;<EM>
Take the following Python code that stores a string:`
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
str = 'X-DSPAM-Confidence: <B> 0.8475</B>'
</EM></FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black><EM>Use <TT>find</TT> and string slicing to extract the portion
of the string after the colon character and then use the 
<TT>float</TT> function to convert the extracted string 
into a floating point number.</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;6</B>&nbsp;&nbsp;
<A NAME="@default410"></A>
<A NAME="@default411"></A><BR>
<BR>
<EM>Read the documentation of the string methods at
<TT>docs.python.org/lib/string-methods.html</TT>. You
might want to experiment with some of them to make sure
you understand how they work. <TT>strip</TT> and
<TT>replace</TT> are particularly useful.<BR>
<BR>
The documentation uses a syntax that might be confusing.
For example, in <CODE>find(sub[, start[, end]])</CODE>, the brackets
indicate optional arguments. So <TT>sub</TT> is required, but
<TT>start</TT> is optional, and if you include <TT>start</TT>,
then <TT>end</TT> is optional.
</EM></FONT></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Files</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc87">Chapter&nbsp;7</A>&nbsp;&nbsp;Files</FONT></H1><!--SEC END -->

<A NAME="@default412"></A>
<A NAME="@default413"></A>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Persistence</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc88">7.1</A>&nbsp;&nbsp;Persistence</FONT></H2><!--SEC END -->

<A NAME="@default414"></A>
<A NAME="@default415"></A>
<FONT COLOR=black>So far, we have learned how to write programs and communicate 
our intentions to the <B>Central Processing Unit</B> using conditional
execution, functions, and iterations. We have learned how to 
create and use data structures in the <B>Main Memory</B>. The CPU 
and memory are where our software works and runs. It is where 
all of the ``thinking'' happens. <BR>
<BR>
But if you recall from our hardware architecture discussions,
once the power is turned off, anything stored in either
the CPU or main memory is erased. So up to now, our
programs have just been transient fun exercises to learn Python.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook010.png"></FONT></DIV><FONT COLOR=black>
<BR>
In this chapter, we start to work with <B>Secondary Memory</B> 
(or files).
Secondary memory is not erased even when the power is turned off. 
Or in the case of a USB flash drive, the
data can we write from our programs can be removed from the 
system and transported to another system.<BR>
<BR>
We will primarily focus on reading and writing text files such as 
those we create in a text editor. Later we will see how to work
with database files which are binary files, specifically designed to be read
and written through database software.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Opening files</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc89">7.2</A>&nbsp;&nbsp;Opening files</FONT></H2><!--SEC END -->

<A NAME="@default416"></A>
<A NAME="@default417"></A>
<A NAME="@default418"></A>
<FONT COLOR=black>When we want to read or write a file (say on your hard drive), we first
must <B>open</B> the file. Opening the file communicates with your operating
system which knows where the data for each file is stored. When you open
a file, you are asking the operating system to find the file by name
and make sure the file exists. In this example, we open the file 
<TT>mbox.txt</TT> which should be stored in the same folder that you
are in when you 
start Python.
You can download this file from 
<TT>www.py4inf.com/code/mbox.txt</TT></FONT>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fhand = open('mbox.txt')
&gt;&gt;&gt; print fhand
&lt;open file 'mbox.txt', mode 'r' at 0x1005088b0&gt;
</FONT></PRE><A NAME="@default419"></A><FONT COLOR=black>
If the <TT>open</TT> is successful, the operating system returns us a 
<B>file handle</B>. The file handle is not the actual data contained
in the file, but instead it is a ``handle'' that we can use to 
read the data. You are given a handle if the requested file
exists and you have the proper permissions to read the file.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook011.png"></FONT></DIV><FONT COLOR=black>
<BR>
If the file does not exist, <TT>open</TT> will fail with a traceback and you 
will not get a handle to access the contents of the file:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fhand = open('stuff.txt')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
IOError: [Errno 2] No such file or directory: 'stuff.txt'
</FONT></PRE><FONT COLOR=black>Later we will use <TT>try</TT> and <TT>except</TT> to deal more gracefully
with the situation where we attempt to open a file that does 
not exist.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Text files and lines</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc90">7.3</A>&nbsp;&nbsp;Text files and lines</FONT></H2><!--SEC END -->

<FONT COLOR=black>A text file can be thought of as a sequence of lines, much like a Python
string can be thought of as a sequence of characters. For example, this
is a sample of a text file which records mail activity from various
individuals in an open source project development team:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
Return-Path: &lt;postmaster@collab.sakaiproject.org&gt;
Date: Sat, 5 Jan 2008 09:12:18 -0500
To: source@collab.sakaiproject.org
From: stephen.marquard@uct.ac.za
Subject: [sakai] svn commit: r39772 - content/branches/
Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772
...
</FONT></PRE><FONT SIZE=4>

</FONT><FONT COLOR=black><FONT SIZE=3>The entire file of mail interactions is available from 
<TT>www.py4inf.com/code/mbox.txt</TT></FONT> 
and a shortened version of the file is available from
<TT>www.py4inf.com/code/mbox-short.txt</TT>.
These files are in a standard format for a file containing 
multiple mail messages. The lines which start with 
``From '' separate the messages and the lines which start 
with ``From:'' are part of the messages. 
For more information, see 
<TT>en.wikipedia.org/wiki/Mbox</TT>. <BR>
<BR>
To break the file into lines, there is a special character that 
represents the ``end of the line'' called the <B>newline</B> character.<BR>
<BR>
<A NAME="@default420"></A>
In Python, we represent the <B>newline</B> character as a backslash-n in 
string constants. Even though this looks like two characters, it
is actually a single character. When we look at the variable by entering
``stuff'' in the interpreter, it shows us the <CODE>\n</CODE> in the string, 
but when we use <TT>print</TT> to show the string, we see the string broken
into two lines by the newline character.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; stuff = 'Hello\nWorld!'
&gt;&gt;&gt; stuff
'Hello\nWorld!'
&gt;&gt;&gt; print stuff
Hello
World!
&gt;&gt;&gt; stuff = 'X\nY'
&gt;&gt;&gt; print stuff
X
Y
&gt;&gt;&gt; len(stuff)
3
</FONT></PRE>
<FONT COLOR=black>You can also see that the length of the string <CODE>'X\nY'</CODE> is <EM>three</EM>
characters because the newline character is a single character.<BR>
<BR>
So when we look at the lines in a file, we need to <EM>imagine</EM>
that there is a special invisible character at the end of each line
that marks the end of the line called the newline. <BR>
<BR>
So the newline character separates the characters 
in the file into lines.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Reading files</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc91">7.4</A>&nbsp;&nbsp;Reading files</FONT></H2><!--SEC END -->

<A NAME="@default421"></A>
<A NAME="@default422"></A><FONT COLOR=black>
While the <B>file handle</B> does not contain the data for the file,
it is quite easy to construct a <TT>for</TT> loop to read through 
and count each of the lines in a file:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox.txt')
count = 0
for line in fhand:
    count = count + 1
print 'Line Count:', count

python open.py 
Line Count: 132045
</FONT></PRE><FONT COLOR=black>We can use the file handle as the sequence in our <TT>for</TT> loop. 
Our <TT>for</TT> loop simply counts the number of lines in the 
file and prints them out. The rough translation of the <TT>for</TT>
loop into English is, ``for each line in the file represented by the file
handle, add one to the <TT>count</TT> variable.''<BR>
<BR>
The reason that the <TT>open</TT> function does not read the entire file
is that the file might be quite large with many gigabytes of data.
The <TT>open</TT> statement takes the same amount of time regardless of the
size of the file. The <TT>for</TT> loop actually causes the data to be 
read from the file.<BR>
<BR>
When the file is read using a <TT>for</TT> loop in this manner, Python
takes care of splitting the data in the file into separate lines using
the newline character. Python reads each line through 
the newline and includes
the newline as the last character in the <TT>line</TT> variable for each 
iteration of the <TT>for</TT> loop.<BR>
<BR>
Because the for loop reads the data one line at a time, it can efficiently
read and count the lines in very large files without running 
out of main memory to store the data. The above program can 
count the lines in any size file using very little memory since 
each line is read, counted, and then discarded.<BR>
<BR>
If you know the file is relatively small compared to the size of 
your main memory, you can read the whole file into one string
using the <TT>read</TT> method on the file handle.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fhand = open('mbox-short.txt')
&gt;&gt;&gt; inp = fhand.read()
&gt;&gt;&gt; print len(inp)
94626
&gt;&gt;&gt; print inp[:20]
From stephen.marquar
</FONT></PRE><FONT COLOR=black>In this example, the entire contents (all 94,626 characters) 
of the file <TT>mbox-short.txt</TT> are read directly into the 
variable <TT>inp</TT>. We use string slicing to print out the first
20 characters of the string data stored in <TT>inp</TT>.<BR>
<BR>
When the file is read in this manner, all the characters including 
all of the lines and newline characters are one big string 
in the variable <B>inp</B>. 
Remember that this form of the <TT>open</TT> function should only be used
if the file data will fit comfortably in the main memory 
of your computer.<BR>
<BR>
If the file is too large to fit in main memory, you should write
your program to read the file in chunks using a <TT>for</TT> or <TT>while</TT>
loop.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Searching through a file</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc92">7.5</A>&nbsp;&nbsp;Searching through a file</FONT></H2><!--SEC END -->

<FONT COLOR=black>When you are searching through data in a file, it
is a very common pattern to read through a file, ignoring most
of the lines and only processing lines which meet a particular criteria.
We can combine the pattern for reading a file with string <B>methods</B>
to build simple search mechanisms.<BR>
<BR>
<A NAME="@default423"></A>
<A NAME="@default424"></A>
For example, if we wanted to read a file and only print out lines
which started with the prefix ``From:'', we could use the 
string method <B>startswith</B> to select only those lines with
the desired prefix:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox-short.txt')
for line in fhand:
    if line.startswith('From:') :
        print line
</FONT></PRE><FONT COLOR=black>When this program runs, we get the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From: stephen.marquard@uct.ac.za

From: louis@media.berkeley.edu

From: zqian@umich.edu

From: rjlowe@iupui.edu
...
</FONT></PRE><FONT COLOR=black>The output looks great since the only lines we are seeing are those 
which start with ``From:'', but why are we seeing the extra blank
lines? This is due to that invisible <B>newline</B> character.
Each of the lines ends with a newline, so the <TT>print</TT> 
statement prints the string in the variable <B>line</B> which includes
a newline and then <TT>print</TT> adds <EM>another</EM> newline, resulting
in the double spacing effect we see.<BR>
<BR>
We could use line slicing to print all but the last character, but 
a simpler approach is to use the <B>rstrip</B> method which strips
whitespace from the right side of a string as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    if line.startswith('From:') :
        print line
</FONT></PRE><FONT COLOR=black>When this program runs, we get the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From: stephen.marquard@uct.ac.za
From: louis@media.berkeley.edu
From: zqian@umich.edu
From: rjlowe@iupui.edu
From: zqian@umich.edu
From: rjlowe@iupui.edu
From: cwen@iupui.edu
...
</FONT></PRE><FONT COLOR=black>As your file processing programs get more complicated, you may want 
to structure your search loops using <TT>continue</TT>. The basic idea 
of the search loop is that you are looking for ``interesting'' lines
and effectively skipping ``uninteresting'' lines. And then when we
find an interesting line, we do something with that line.<BR>
<BR>
We can structure the loop to follow the
pattern of skipping uninteresting lines as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    # Skip 'uninteresting lines'
    if not line.startswith('From:') :
        continue
    # Process our 'interesting' line
    print line
</FONT></PRE><FONT COLOR=black>The output of the program is the same. In English, the 
uninteresting lines are those which do not start 
with ``From:'', which we skip using <TT>continue</TT>.
For the ``interesting'' lines (i.e. those that start with ``From:'')
we perform the processing on those lines.<BR>
<BR>
We can use the <TT>find</TT> string method to simulate a text editor
search which finds lines where the search string is anywhere in the line. 
Since <TT>find</TT> looks for an occurrence of a string within another
string and either returns the position of the string or -1 if the string
was not found, we can write the following loop to show lines which
contain the string ``@uct.ac.za'' (i.e. they come from the University 
of Cape Town in South Africa):
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    if line.find('@uct.ac.za') == -1 : 
        continue
    print line
</FONT></PRE><FONT COLOR=black>Which produces the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
X-Authentication-Warning: set sender to stephen.marquard@uct.ac.za using -f
From: stephen.marquard@uct.ac.za
Author: stephen.marquard@uct.ac.za
From david.horwitz@uct.ac.za Fri Jan  4 07:02:32 2008
X-Authentication-Warning: set sender to david.horwitz@uct.ac.za using -f
From: david.horwitz@uct.ac.za
Author: david.horwitz@uct.ac.za
...
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Letting the user choose the file name</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc93">7.6</A>&nbsp;&nbsp;Letting the user choose the file name</FONT></H2><!--SEC END -->

<FONT COLOR=black>We really do not want to have to edit our Python code
every time we want to process a different file. It would 
be more usable to ask the user to enter the file name string 
each time the program runs so they can use our 
program on different files without changing the Python code.<BR>
<BR>
This is quite simple to do by reading the file name from
the user using <CODE>raw_input</CODE> as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fname = raw_input('Enter the file name: ')
fhand = open(fname)
count = 0
for line in fhand:
    if line.startswith('Subject:') :
        count = count + 1
print 'There were', count, 'subject lines in', fname
</FONT></PRE><FONT COLOR=black>We read the file name from the user and place it in a variable
named <TT>fname</TT> and open that file. Now we can run the program 
repeatedly on different files.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python search6.py 
Enter the file name: mbox.txt
There were 1797 subject lines in mbox.txt

python search6.py 
Enter the file name: mbox-short.txt
There were 27 subject lines in mbox-short.txt
</FONT></PRE><FONT COLOR=black>Before peeking at the next section, take a look at the above program
and ask yourself, ``What could go possibly wrong here?'' or ``What might our
friendly user do that would cause our nice little program to 
ungracefully exit with a traceback, making us look not-so-cool 
in the eyes of our users?''.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Using <TT>try, except,</TT> and <TT>open</TT></FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc94">7.7</A>&nbsp;&nbsp;Using <TT>try, except,</TT> and <TT>open</TT></FONT></H2><!--SEC END -->

<FONT COLOR=black>I told you not to peek. This is your last chance.<BR>
<BR>
What if our user types something that is not a file name?
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python search6.py 
Enter the file name: missing.txt
Traceback (most recent call last):
  File "search6.py", line 2, in &lt;module&gt;
    fhand = open(fname)
IOError: [Errno 2] No such file or directory: 'missing.txt'

python search6.py 
Enter the file name: na na boo boo
Traceback (most recent call last):
  File "search6.py", line 2, in &lt;module&gt;
    fhand = open(fname)
IOError: [Errno 2] No such file or directory: 'na na boo boo'
</FONT></PRE><FONT COLOR=black>Do not laugh, users will eventually do every possible thing they can do 
to break your programs --- either on purpose or with malicious intent.
As a matter of fact, an important part of any software development
team is a person or group called <B>Quality Assurance</B> (or QA for short)
whose very job it is to do the craziest things possible in an attempt
to break the software that the programmer has created.<BR>
<BR>
<A NAME="@default425"></A>
<A NAME="@default426"></A>
The QA team is responsible for finding the flaws in programs before 
we have delivered the program to the end-users who may be purchasing the
software or paying our salary to write the software. So the QA team
is the programmer's best friend.<BR>
<BR>
<A NAME="@default427"></A>
<A NAME="@default428"></A>
<A NAME="@default429"></A>
<A NAME="@default430"></A>
<A NAME="@default431"></A>
<A NAME="@default432"></A>
So now that we see the flaw in the program, we can elegantly fix it using
the <TT>try</TT>/<TT>except</TT> structure. We need to assume that the <TT>open</TT>
call might fail and add recovery code when the <TT>open</TT> fails
as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fname = raw_input('Enter the file name: ')
try:
    fhand = open(fname)
except:
    print 'File cannot be opened:', fname
    exit()

count = 0
for line in fhand:
    if line.startswith('Subject:') : 
        count = count + 1
print 'There were', count, 'subject lines in', fname
</FONT></PRE><FONT COLOR=black>The <TT>exit</TT> function terminates the program. It is a function
that we call that never returns. Now when our user (or 
QA team) types in silliness or bad file names, 
we ``catch'' them and recover gracefully:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python search7.py
Enter the file name: mbox.txt
There were 1797 subject lines in mbox.txt

python search7.py
Enter the file name: na na boo boo
File cannot be opened: na na boo boo
</FONT></PRE><A NAME="@default433"></A><FONT COLOR=black>
Protecting the <TT>open</TT> call is a good example 
of the proper use of <TT>try</TT>
and <TT>except</TT> in a Python program. We use the term
``Pythonic'' when we are doing something the ``Python
way''. We might say that the above example is 
the Pythonic way to open a file.<BR>
<BR>
Once you become more skilled in Python, you can engage
in repartee' with other Python programmers to decide
which of two equivalent solutions to a problem is 
``more Pythonic''. The goal to be ``more Pythonic'' 
captures the notion that programming is part engineering
and part art. We are not always interested
in just making something work, we also want
our solution to be elegant and to be appreciated as 
elegant by our peers.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Writing files</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc95">7.8</A>&nbsp;&nbsp;Writing files</FONT></H2><!--SEC END -->

<A NAME="@default434"></A>
<FONT COLOR=black>To write a file, you have to open it with mode
<CODE>'w'</CODE> as a second parameter:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fout = open('output.txt', 'w')
&gt;&gt;&gt; print fout
&lt;open file 'output.txt', mode 'w' at 0xb7eb2410&gt;
</FONT></PRE><FONT COLOR=black>If the file already exists, opening it in write mode clears out
the old data and starts fresh, so be careful!
If the file doesn't exist, a new one is created.<BR>
<BR>
The <TT>write</TT> method of the file handle object 
puts data into the file.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; line1 = 'This here's the wattle,\n'
&gt;&gt;&gt; fout.write(line1)
</FONT></PRE><A NAME="@default435"></A><FONT COLOR=black>
Again, the file object keeps track of where it is, so if
you call <TT>write</TT> again, it adds the new data to the end.<BR>
<BR>
We must make sure to manage the ends of lines as we write
to the file by explicitly inserting the newline character
when we want to end a line. The <TT>print</TT> statement 
automatically appends a newline, but the <TT>write</TT> 
method does not add the newline automatically.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; line2 = 'the emblem of our land.\n'
&gt;&gt;&gt; fout.write(line2)
</FONT></PRE><FONT COLOR=black>When you are done writing, you have to close the file
to make sure that the last bit of data is physically written
to the disk so it will not be lost if the power goes off.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; fout.close()
</FONT></PRE><FONT COLOR=black>We could close the files which we open for read as well, 
but we can be a little sloppy if we are only opening a few
files since Python makes sure that all open files are 
closed when the program ends. When we are writing files, 
we want to explicitly close the files so as to leave nothing
to chance.</FONT><BR>
<BR>
<A NAME="@default436"></A>
<A NAME="@default437"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc96">7.9</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="@default438"></A>
<A NAME="@default439"></A>
<FONT COLOR=black>When you are reading and writing files, you might run into problems
with whitespace. These errors can be hard to debug because spaces,
tabs and newlines are normally invisible:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; s = '1 2\t 3\n 4'
&gt;&gt;&gt; print s
1 2  3
 4
</FONT></PRE>
<A NAME="@default440"></A>
<A NAME="@default441"></A>
<A NAME="@default442"></A>
<FONT COLOR=black>The built-in function <TT>repr</TT> can help. It takes any object as an
argument and returns a string representation of the object. For
strings, it represents whitespace
characters with backslash sequences:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print repr(s)
'1 2\t 3\n 4'
</FONT></PRE>
<FONT COLOR=black>This can be helpful for debugging.<BR>
<BR>
One other problem you might run into is that different systems
use different characters to indicate the end of a line. Some
systems use a newline, represented <CODE>\n</CODE>. Others use
a return character, represented <CODE>\r</CODE>. Some use both.
If you move files between different systems, these inconsistencies
might cause problems.<BR>
<BR>
<A NAME="@default443"></A><BR>
<BR>
For most systems, there are applications to convert from one
format to another. You can find them (and read more about this
issue) at <TT>wikipedia.org/wiki/Newline</TT>. Or, of course, you
could write one yourself.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc97">7.10</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>catch:</B></FONT><DD><FONT COLOR=black> To prevent an exception from terminating
a program using the <TT>try</TT>
and <TT>except</TT> statements.
</FONT><A NAME="@default444"></A><BR>
<BR>
<DT><FONT COLOR=black><B>newline:</B></FONT><DD><FONT COLOR=black> A special character used in files and strings to indicate
the end of a line.
</FONT><A NAME="@default445"></A><BR>
<BR>
<DT><FONT COLOR=black><B>Pythonic:</B></FONT><DD><FONT COLOR=black> A technique that works elegantly in Python.
``Using try and except is the <EM>Pythonic</EM> way to recover from 
missing files.''.
</FONT><A NAME="@default446"></A><BR>
<BR>
<DT><FONT COLOR=black><B>Quality Assurance:</B></FONT><DD><FONT COLOR=black> A person or team focused on insuring the 
overall quality of a software product. QA is often involved 
in testing a product and identifying problems before the product 
is released.
</FONT><A NAME="@default447"></A>
<A NAME="@default448"></A><BR>
<BR>
<DT><FONT COLOR=black><B>text file:</B></FONT><DD><FONT COLOR=black> A sequence of characters stored in permanent
storage like a hard drive.
</FONT><A NAME="@default449"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc98">7.11</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Write a program to read through a file and print the contents 
of the file (line by line) all in upper case. Executing the program 
will look as follows:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
python shout.py
Enter a file name: mbox-short.txt
FROM STEPHEN.MARQUARD@UCT.AC.ZA SAT JAN  5 09:14:16 2008
RETURN-PATH: &lt;POSTMASTER@COLLAB.SAKAIPROJECT.ORG&gt;
RECEIVED: FROM MURDER (MAIL.UMICH.EDU [141.211.14.90])
  BY FRANKENSTEIN.MAIL.UMICH.EDU (CYRUS V2.3.8) WITH LMTPA;
  SAT, 05 JAN 2008 09:14:16 -0500
</EM></FONT></PRE><FONT COLOR=black><EM>You can download the file from
<TT>www.py4inf.com/code/mbox-short.txt</TT></EM></FONT>
</DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Write a program 
to prompt for a file name, and then read through the file 
and look for lines of the form:
</EM></FONT><PRE><FONT COLOR=blue SIZE=4><EM>
X-DSPAM-Confidence: <B> 0.8475</B>
</EM></FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black><EM>When you encounter a line that starts with 
``X-DSPAM-Confidence:'' pull apart the line to extract the
floating point number on the line. Count these 
lines and the compute the total of the spam confidence 
values from these lines.
When you reach the end of the file, print out the average
spam confidence.
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Enter the file name: mbox.txt
Average spam confidence: 0.894128046745

Enter the file name: mbox-short.txt
Average spam confidence: 0.750718518519
</EM></FONT></PRE><FONT COLOR=black><EM>Test your file on the <TT>mbox.txt</TT> and <TT>mbox-short.txt</TT> files.
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Sometimes when programmers get bored or want to have a bit of fun,
they add a harmless <B>Easter Egg</B> to their program 
(<TT>en.wikipedia.org/wiki/Easter_egg_(media)</TT>). Modify the program
that prompts the user for the file name so that it prints a funny
message when the user types in the exact file name 'na na boo boo'. 
The program should behave normally for all other files which exist
and don't exist. Here is a sample execution of the program:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
python egg.py 
Enter the file name: mbox.txt
There were 1797 subject lines in mbox.txt

python egg.py 
Enter the file name: missing.tyxt
File cannot be opened: missing.tyxt

python egg.py 
Enter the file name: na na boo boo
NA NA BOO BOO TO YOU - You have been punk'd!
</EM></FONT></PRE><FONT COLOR=black><EM>We are not encouraging you to put Easter Eggs in your programs -
this is just an exercise.</EM></FONT></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Lists</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc99">Chapter&nbsp;8</A>&nbsp;&nbsp;Lists</FONT></H1><!--SEC END -->

<A NAME="@default450"></A>
<A NAME="@default451"></A>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>A list is a sequence</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc100">8.1</A>&nbsp;&nbsp;A list is a sequence</FONT></H2><!--SEC END -->

<FONT COLOR=black>Like a string, a <B>list</B> is a sequence of values. In a string, the
values are characters; in a list, they can be any type. The values in
list are called <B>elements</B> or sometimes <B>items</B>.<BR>
<BR>
<A NAME="@default452"></A>
<A NAME="@default453"></A>
<A NAME="@default454"></A><BR>
<BR>
There are several ways to create a new list; the simplest is to
enclose the elements in square brackets (<CODE>[</CODE> and <CODE>]</CODE>):
</FONT><PRE><FONT SIZE=4 COLOR=blue>
[10, 20, 30, 40]
['crunchy frog', 'ram bladder', 'lark vomit']
</FONT></PRE><FONT COLOR=black>The first example is a list of four integers. The second is a list of
three strings. The elements of a list don't have to be the same type.
The following list contains a string, a float, an integer, and
(lo!) another list:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
['spam', 2.0, 5, [10, 20]]
</FONT></PRE><FONT COLOR=black>A list within another list is <B>nested</B>.<BR>
<BR>
<A NAME="@default455"></A>
<A NAME="@default456"></A><BR>
<BR>
A list that contains no elements is
called an empty list; you can create one with empty
brackets, <CODE>[]</CODE>.<BR>
<BR>
<A NAME="@default457"></A>
<A NAME="@default458"></A><BR>
<BR>
As you might expect, you can assign list values to variables:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; cheeses = ['Cheddar', 'Edam', 'Gouda']
&gt;&gt;&gt; numbers = [17, 123]
&gt;&gt;&gt; empty = []
&gt;&gt;&gt; print cheeses, numbers, empty
['Cheddar', 'Edam', 'Gouda'] [17, 123] []
</FONT></PRE>
<A NAME="@default459"></A>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Lists are mutable</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc101">8.2</A>&nbsp;&nbsp;Lists are mutable</FONT></H2><!--SEC END -->

<A NAME="@default460"></A>
<A NAME="@default461"></A>
<A NAME="@default462"></A>
<A NAME="@default463"></A>
<A NAME="@default464"></A>
<FONT COLOR=black>The syntax for accessing the elements of a list is the same as for
accessing the characters of a string---the bracket operator. The
expression inside the brackets specifies the index. Remember that the
indices start at 0:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print cheeses[0]
Cheddar
</FONT></PRE><FONT COLOR=black>Unlike strings, lists are mutable because you can change the order 
of items in a list or reassign an item in a list. 
When the bracket operator appears on the left side of an assignment, 
it identifies the element of the list that will be assigned.</FONT><BR>
<BR>
<A NAME="@default465"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; numbers = [17, 123]
&gt;&gt;&gt; numbers[1] = 5
&gt;&gt;&gt; print numbers
[17, 5]
</FONT></PRE><FONT COLOR=black>The one-eth element of <TT>numbers</TT>, which
used to be 123, is now 5.<BR>
<BR>
<A NAME="@default466"></A>
<A NAME="@default467"></A><BR>
<BR>
You can think of a list as a relationship between indices and
elements. This relationship is called a <B>mapping</B>; each index
``maps to'' one of the elements. <BR>
<BR>
<A NAME="@default468"></A>
<A NAME="@default469"></A><BR>
<BR>
List indices work the same way as string indices:
</FONT><UL><LI><FONT COLOR=black>Any integer expression can be used as an index.</FONT><BR>
<BR>
<LI><FONT COLOR=black>If you try to read or write an element that does not exist, you
get an <TT>IndexError</TT>.</FONT><BR>
<BR>
<A NAME="@default470"></A>
<A NAME="@default471"></A><BR>
<BR>
<LI><FONT COLOR=black>If an index has a negative value, it counts backward from the
end of the list.</FONT></UL>
<A NAME="@default472"></A>
<A NAME="@default473"></A>
<A NAME="@default474"></A>
<A NAME="@default475"></A>
<A NAME="@default476"></A>
<FONT COLOR=black>The <TT>in</TT> operator also works on lists.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; cheeses = ['Cheddar', 'Edam', 'Gouda']
&gt;&gt;&gt; 'Edam' in cheeses
True
&gt;&gt;&gt; 'Brie' in cheeses
False
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Traversing a list</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc102">8.3</A>&nbsp;&nbsp;Traversing a list</FONT></H2><!--SEC END -->

<A NAME="@default477"></A>
<A NAME="@default478"></A>
<A NAME="@default479"></A>
<A NAME="@default480"></A>
<A NAME="@default481"></A>
<FONT COLOR=black>The most common way to traverse the elements of a list is
with a <TT>for</TT> loop. The syntax is the same as for strings:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
for cheese in cheeses:
    print cheese
</FONT></PRE><FONT COLOR=black>This works well if you only need to read the elements of the
list. But if you want to write or update the elements, you
need the indices. A common way to do that is to combine
the functions <TT>range</TT> and <TT>len</TT>:</FONT><BR>
<BR>
<A NAME="@default482"></A>
<A NAME="@default483"></A>
<PRE><FONT SIZE=4 COLOR=blue>
for i in range(len(numbers)):
    numbers[i] = numbers[i] * 2
</FONT></PRE><FONT COLOR=black>This loop traverses the list and updates each element. <TT>len</TT>
returns the number of elements in the list. <TT>range</TT> returns
a list of indices from 0 to <I>n</I>-1, where <I>n</I> is the length of
the list. Each time through the loop <TT>i</TT> gets the index
of the next element. The assignment statement in the body uses
<TT>i</TT> to read the old value of the element and to assign the
new value.<BR>
<BR>
<A NAME="@default484"></A>
<A NAME="@default485"></A><BR>
<BR>
A <TT>for</TT> loop over an empty list never executes the body:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
for x in empty:
    print 'This never happens.'
</FONT></PRE><FONT COLOR=black>Although a list can contain another list, the nested
list still counts as a single element. The length of this list is
four:</FONT><BR>
<BR>
<A NAME="@default486"></A>
<A NAME="@default487"></A>
<PRE><FONT SIZE=4 COLOR=blue>
['spam', 1, ['Brie', 'Roquefort', 'Pol le Veq'], [1, 2, 3]]
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>List operations</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc103">8.4</A>&nbsp;&nbsp;List operations</FONT></H2><!--SEC END -->

<A NAME="@default488"></A>
<FONT COLOR=black>The <TT>+</TT> operator concatenates lists:</FONT><BR>
<BR>
<A NAME="@default489"></A>
<A NAME="@default490"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; a = [1, 2, 3]
&gt;&gt;&gt; b = [4, 5, 6]
&gt;&gt;&gt; c = a + b
&gt;&gt;&gt; print c
[1, 2, 3, 4, 5, 6]
</FONT></PRE><FONT COLOR=black>Similarly, the <TT>*</TT> operator repeats a list a given number of times:</FONT><BR>
<BR>
<A NAME="@default491"></A>
<A NAME="@default492"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; [0] * 4
[0, 0, 0, 0]
&gt;&gt;&gt; [1, 2, 3] * 3
[1, 2, 3, 1, 2, 3, 1, 2, 3]
</FONT></PRE><FONT COLOR=black>The first example repeats <TT>[0]</TT> four times. The second example
repeats the list <TT>[1, 2, 3]</TT> three times.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>List slices</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc104">8.5</A>&nbsp;&nbsp;List slices</FONT></H2><!--SEC END -->

<A NAME="@default493"></A>
<A NAME="@default494"></A>
<A NAME="@default495"></A>
<A NAME="@default496"></A>
<A NAME="@default497"></A>
<FONT COLOR=black>The slice operator also works on lists:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['a', 'b', 'c', 'd', 'e', 'f']
&gt;&gt;&gt; t[1:3]
['b', 'c']
&gt;&gt;&gt; t[:4]
['a', 'b', 'c', 'd']
&gt;&gt;&gt; t[3:]
['d', 'e', 'f']
</FONT></PRE><FONT COLOR=black>If you omit the first index, the slice starts at the beginning.
If you omit the second, the slice goes to the end. So if you
omit both, the slice is a copy of the whole list.</FONT><BR>
<BR>
<A NAME="@default498"></A>
<A NAME="@default499"></A>
<A NAME="@default500"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t[:]
['a', 'b', 'c', 'd', 'e', 'f']
</FONT></PRE><FONT COLOR=black>Since lists are mutable, it is often useful to make a copy
before performing operations that fold, spindle or mutilate
lists.<BR>
<BR>
<A NAME="@default501"></A><BR>
<BR>
A slice operator on the left side of an assignment
can update multiple elements:</FONT><BR>
<BR>
<A NAME="@default502"></A>
<A NAME="@default503"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['a', 'b', 'c', 'd', 'e', 'f']
&gt;&gt;&gt; t[1:3] = ['x', 'y']
&gt;&gt;&gt; print t
['a', 'x', 'y', 'd', 'e', 'f']
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>List methods</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc105">8.6</A>&nbsp;&nbsp;List methods</FONT></H2><!--SEC END -->

<A NAME="@default504"></A>
<A NAME="@default505"></A>
<FONT COLOR=black>Python provides methods that operate on lists. For example,
<TT>append</TT> adds a new element to the end of a list:</FONT><BR>
<BR>
<A NAME="@default506"></A>
<A NAME="@default507"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; t.append('d')
&gt;&gt;&gt; print t
['a', 'b', 'c', 'd']
</FONT></PRE><FONT COLOR=black><TT>extend</TT> takes a list as an argument and appends all of
the elements:</FONT><BR>
<BR>
<A NAME="@default508"></A>
<A NAME="@default509"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t1 = ['a', 'b', 'c']
&gt;&gt;&gt; t2 = ['d', 'e']
&gt;&gt;&gt; t1.extend(t2)
&gt;&gt;&gt; print t1
['a', 'b', 'c', 'd', 'e']
</FONT></PRE><FONT COLOR=black>This example leaves <TT>t2</TT> unmodified.<BR>
<BR>
<TT>sort</TT> arranges the elements of the list from low to high:</FONT><BR>
<BR>
<A NAME="@default510"></A>
<A NAME="@default511"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['d', 'c', 'e', 'b', 'a']
&gt;&gt;&gt; t.sort()
&gt;&gt;&gt; print t
['a', 'b', 'c', 'd', 'e']
</FONT></PRE><FONT COLOR=black>Most list methods are void; they modify the list and return <TT>None</TT>.
If you accidentally write <TT>t = t.sort()</TT>, you will be disappointed
with the result.</FONT><BR>
<BR>
<A NAME="@default512"></A>
<A NAME="@default513"></A>
<A NAME="@default514"></A>
<A NAME="@default515"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Deleting elements</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc106">8.7</A>&nbsp;&nbsp;Deleting elements</FONT></H2><!--SEC END -->

<A NAME="@default516"></A>
<A NAME="@default517"></A>
<FONT COLOR=black>There are several ways to delete elements from a list. If you
know the index of the element you want, you can use
<TT>pop</TT>:</FONT><BR>
<BR>
<A NAME="@default518"></A>
<A NAME="@default519"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; x = t.pop(1)
&gt;&gt;&gt; print t
['a', 'c']
&gt;&gt;&gt; print x
b
</FONT></PRE><FONT COLOR=black><TT>pop</TT> modifies the list and returns the element that was removed.
If you don't provide an index, it deletes and returns the
last element.<BR>
<BR>
If you don't need the removed value, you can use the <TT>del</TT>
operator:</FONT><BR>
<BR>
<A NAME="@default520"></A>
<A NAME="@default521"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; del t[1]
&gt;&gt;&gt; print t
['a', 'c']
</FONT></PRE>
<FONT COLOR=black>If you know the element you want to remove (but not the index), you
can use <TT>remove</TT>:</FONT><BR>
<BR>
<A NAME="@default522"></A>
<A NAME="@default523"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['a', 'b', 'c']
&gt;&gt;&gt; t.remove('b')
&gt;&gt;&gt; print t
['a', 'c']
</FONT></PRE><FONT COLOR=black>The return value from <TT>remove</TT> is <TT>None</TT>.<BR>
<BR>
<A NAME="@default524"></A>
<A NAME="@default525"></A><BR>
<BR>
To remove more than one element, you can use <TT>del</TT> with
a slice index:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['a', 'b', 'c', 'd', 'e', 'f']
&gt;&gt;&gt; del t[1:5]
&gt;&gt;&gt; print t
['a', 'f']
</FONT></PRE><FONT COLOR=black>As usual, the slice selects all the elements up to, but not
including, the second index.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Lists and functions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc107">8.8</A>&nbsp;&nbsp;Lists and functions</FONT></H2><!--SEC END -->

<FONT COLOR=black>There are a number of built-in functions that can be used on lists
that allow you to quickly look through a list without
writing your own loops:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; nums = [3, 41, 12, 9, 74, 15]
&gt;&gt;&gt; print len(nums)
6
&gt;&gt;&gt; print max(nums)
74
&gt;&gt;&gt; print min(nums)
3
&gt;&gt;&gt; print sum(nums)
154
&gt;&gt;&gt; print sum(nums)/len(nums)
25
</FONT></PRE><FONT COLOR=black>The <TT>sum()</TT> function only works when the list elements are numbers.
The other functions (<TT>max()</TT>, <TT>len()</TT>, etc.) work with lists of
strings and other types that can be comparable.<BR>
<BR>
We could rewrite an earlier program that computed the average of 
a list of numbers entered by the user using a list.<BR>
<BR>
First, the program to compute an average without a list:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
total = 0
count = 0
while ( True ) :
    inp = raw_input('Enter a number: ')
    if inp == 'done' : break
    value = float(inp)
    total = total + value
    count = count + 1

average = total / count
print 'Average:', average
</FONT></PRE><FONT COLOR=black>In this program, we have <TT>count</TT> and <TT>sum</TT> variables to 
keep the number and running total of the user's numbers as 
we repeatedly prompt the user for a number.<BR>
<BR>
We could simply remember each number as the user entered it 
and use built-in functions to compute the sum and count at
the end.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
numlist = list()
while ( True ) :
    inp = raw_input('Enter a number: ')
    if inp == 'done' : break
    value = float(inp)
    numlist.append(value)

average = sum(numlist) / len(numlist)
print 'Average:', average
</FONT></PRE><FONT COLOR=black>We make an empty list before the loop starts, and then each time we have 
a number, we append it to the list. At the end of
the program, we simply compute the sum of the numbers in the 
list and divide it by the count of the numbers in the
list to come up with the average.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Lists and strings</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc108">8.9</A>&nbsp;&nbsp;Lists and strings</FONT></H2><!--SEC END -->

<A NAME="@default526"></A>
<A NAME="@default527"></A>
<A NAME="@default528"></A>
<FONT COLOR=black>A string is a sequence of characters and a list is a sequence
of values, but a list of characters is not the same as a
string. To convert from a string to a list of characters,
you can use <TT>list</TT>:</FONT><BR>
<BR>
<A NAME="@default529"></A>
<A NAME="@default530"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; s = 'spam'
&gt;&gt;&gt; t = list(s)
&gt;&gt;&gt; print t
['s', 'p', 'a', 'm']
</FONT></PRE><FONT COLOR=black>Because <TT>list</TT> is the name of a built-in function, you should
avoid using it as a variable name. I also avoid <TT>l</TT> because
it looks too much like <TT>1</TT>. So that's why I use <TT>t</TT>.<BR>
<BR>
The <TT>list</TT> function breaks a string into individual letters. If
you want to break a string into words, you can use the <TT>split</TT>
method:</FONT><BR>
<BR>
<A NAME="@default531"></A>
<A NAME="@default532"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; s = 'pining for the fjords'
&gt;&gt;&gt; t = s.split()
&gt;&gt;&gt; print t
['pining', 'for', 'the', 'fjords']
&gt;&gt;&gt; print t[2]
the
</FONT></PRE><FONT COLOR=black>Once you have used <TT>split</TT> to break the string into 
a list of tokens, you can use the index operator (square
bracket) to look at a particular word in the list.<BR>
<BR>
You can call <TT>split</TT> with 
an optional argument called a <B>delimiter</B> specifies which
characters to use as word boundaries.
The following example
uses a hyphen as a delimiter:</FONT><BR>
<BR>
<A NAME="@default533"></A>
<A NAME="@default534"></A>
<A NAME="@default535"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; s = 'spam-spam-spam'
&gt;&gt;&gt; delimiter = '-'
&gt;&gt;&gt; s.split(delimiter)
['spam', 'spam', 'spam']
</FONT></PRE><FONT COLOR=black><TT>join</TT> is the inverse of <TT>split</TT>. It
takes a list of strings and
concatenates the elements. <TT>join</TT> is a string method,
so you have to invoke it on the delimiter and pass the
list as a parameter:</FONT><BR>
<BR>
<A NAME="@default536"></A>
<A NAME="@default537"></A>
<A NAME="@default538"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ['pining', 'for', 'the', 'fjords']
&gt;&gt;&gt; delimiter = ' '
&gt;&gt;&gt; delimiter.join(t)
'pining for the fjords'
</FONT></PRE><FONT COLOR=black>In this case the delimiter is a space character, so
<TT>join</TT> puts a space between words. To concatenate
strings without spaces, you can use the empty string,
<CODE>''</CODE>, as a delimiter. </FONT><BR>
<BR>
<A NAME="@default539"></A>
<A NAME="@default540"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Parsing lines</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc109">8.10</A>&nbsp;&nbsp;Parsing lines</FONT></H2><!--SEC END -->

<FONT COLOR=black>Usually when we are reading a file 
we want to do something to the lines other than just 
printing the whole line. Often we want to find the ``interesting
lines'' and then <B>parse</B> the line to find some interesting
<EM>part</EM> of the line. What if we wanted to print out the day of the 
week from those lines that start with ``From ''.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From stephen.marquard@uct.ac.za <B> Sat</B> Jan  5 09:14:16 2008
</FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black>The <TT>split</TT> method is very effective when faced with this 
kind of problem.
We can write a small program that looks for lines where the 
line starts with ``From '' and then <TT>split</TT> those lines 
and then print out the third word in the line:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox-short.txt')
for line in fhand:
    line = line.rstrip()
    if not line.startswith('From ') : continue
    words = line.split()
    print words[2]
</FONT></PRE><FONT COLOR=black>We also use the contracted form of the <TT>if</TT>
statement where we put the <TT>continue </TT> on the
same line as the <TT>if</TT>. This contracted form
of the <TT>if</TT> functions the same as if the
<TT>continue</TT> were on the next line and indented.<BR>
<BR>
The program produces the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Sat
Fri
Fri
Fri
    ...
</FONT></PRE><FONT COLOR=black>Later, we will learn increasingly sophisticated techniques for
picking the lines to work on and how we pull those lines apart
to find the exact bit of information we are looking for.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Objects and values</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc110">8.11</A>&nbsp;&nbsp;Objects and values</FONT></H2><!--SEC END -->

<A NAME="@default541"></A>
<A NAME="@default542"></A>
<FONT COLOR=black>If we execute these assignment statements:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
a = 'banana'
b = 'banana'
</FONT></PRE><FONT COLOR=black>We know that <TT>a</TT> and <TT>b</TT> both refer to a
string, but we don't
know whether they refer to the <EM>same</EM> string.
There are two possible states:</FONT><BR>
<BR>
<A NAME="@default543"></A><BR>
<DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook012.png"></FONT></DIV><FONT COLOR=black>
<BR>
In one case, <TT>a</TT> and <TT>b</TT> refer to two different objects that
have the same value. In the second case, they refer to the same
object.<BR>
<BR>
<A NAME="@default544"></A>
<A NAME="@default545"></A><BR>
<BR>
To check whether two variables refer to the same object, you can
use the <TT>is</TT> operator.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; a = 'banana'
&gt;&gt;&gt; b = 'banana'
&gt;&gt;&gt; a is b
True
</FONT></PRE><FONT COLOR=black>In this example, Python only created one string object,
and both <TT>a</TT> and <TT>b</TT> refer to it.<BR>
<BR>
But when you create two lists, you get two objects:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; a = [1, 2, 3]
&gt;&gt;&gt; b = [1, 2, 3]
&gt;&gt;&gt; a is b
False
</FONT></PRE>
<FONT COLOR=black>In this case we would say that the two lists are <B>equivalent</B>,
because they have the same elements, but not <B>identical</B>, because
they are not the same object. If two objects are identical, they are
also equivalent, but if they are equivalent, they are not necessarily
identical.<BR>
<BR>
<A NAME="@default546"></A>
<A NAME="@default547"></A><BR>
<BR>
Until now, we have been using ``object'' and ``value''
interchangeably, but it is more precise to say that an object has a
value. If you execute <TT>a = [1,2,3]</TT>, <TT>a</TT> refers to a list
object whose value is a particular sequence of elements. If another
list has the same elements, we would say it has the same value.</FONT><BR>
<BR>
<A NAME="@default548"></A>
<A NAME="@default549"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Aliasing</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc111">8.12</A>&nbsp;&nbsp;Aliasing</FONT></H2><!--SEC END -->

<A NAME="@default550"></A>
<A NAME="@default551"></A>
<FONT COLOR=black>If <TT>a</TT> refers to an object and you assign <TT>b = a</TT>,
then both variables refer to the same object:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; a = [1, 2, 3]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; b is a
True
</FONT></PRE>
<FONT COLOR=black>The association of a variable with an object is called a <B>reference</B>. In this example, there are two references to the same
object.<BR>
<BR>
<A NAME="@default552"></A><BR>
<BR>
An object with more than one reference has more
than one name, so we say that the object is <B>aliased</B>.<BR>
<BR>
<A NAME="@default553"></A><BR>
<BR>
If the aliased object is mutable, 
changes made with one alias affect
the other:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; b[0] = 17
&gt;&gt;&gt; print a
[17, 2, 3]
</FONT></PRE><FONT COLOR=black>Although this behavior can be useful, it is error-prone. In general,
it is safer to avoid aliasing when you are working with mutable
objects.<BR>
<BR>
<A NAME="@default554"></A><BR>
<BR>
For immutable objects like strings, aliasing is not as much of a
problem. In this example:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
a = 'banana'
b = 'banana'
</FONT></PRE><FONT COLOR=black>It almost never makes a difference whether <TT>a</TT> and <TT>b</TT> refer
to the same string or not.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>List arguments</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc112">8.13</A>&nbsp;&nbsp;List arguments</FONT></H2><!--SEC END -->

<A NAME="@default555"></A>
<A NAME="@default556"></A>
<A NAME="@default557"></A>
<A NAME="@default558"></A>
<A NAME="@default559"></A>
<FONT COLOR=black>When you pass a list to a function, the function gets a reference
to the list.
If the function modifies a list parameter, the caller sees the change.
For example, <CODE>delete_head</CODE> removes the first element from a list:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def delete_head(t):
    del t[0]
</FONT></PRE><FONT COLOR=black>Here's how it is used:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; letters = ['a', 'b', 'c']
&gt;&gt;&gt; delete_head(letters)
&gt;&gt;&gt; print letters
['b', 'c']
</FONT></PRE><FONT COLOR=black>The parameter <TT>t</TT> and the variable <TT>letters</TT> are
aliases for the same object. <BR>
<BR>
It is important to distinguish between operations that
modify lists and operations that create new lists. For
example, the <TT>append</TT> method modifies a list, but the
<TT>+</TT> operator creates a new list:</FONT><BR>
<BR>
<A NAME="@default560"></A>
<A NAME="@default561"></A>
<A NAME="@default562"></A>
<A NAME="@default563"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t1 = [1, 2]
&gt;&gt;&gt; t2 = t1.append(3)
&gt;&gt;&gt; print t1
[1, 2, 3]
&gt;&gt;&gt; print t2
None

&gt;&gt;&gt; t3 = t1 + [3]
&gt;&gt;&gt; print t3
[1, 2, 3]
&gt;&gt;&gt; t2 is t3
False
</FONT></PRE>
<FONT COLOR=black>This difference is important when you write functions that
are supposed to modify lists. For example, this function
<EM>does not</EM> delete the head of a list:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def bad_delete_head(t):
    t = t[1:]              # WRONG!
</FONT></PRE>
<FONT COLOR=black>The slice operator creates a new list and the assignment
makes <TT>t</TT> refer to it, but none of that has any effect
on the list that was passed as an argument.<BR>
<BR>
<A NAME="@default564"></A>
<A NAME="@default565"></A><BR>
<BR>
An alternative is to write a function that creates and
returns a new list. For
example, <TT>tail</TT> returns all but the first
element of a list:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def tail(t):
    return t[1:]
</FONT></PRE><FONT COLOR=black>This function leaves the original list unmodified.
Here's how it is used:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; letters = ['a', 'b', 'c']
&gt;&gt;&gt; rest = tail(letters)
&gt;&gt;&gt; print rest
['b', 'c']
</FONT></PRE><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<BR>
<BR>
<EM>Write a function called <TT>chop</TT> that takes a list and modifies
it, removing the first and last elements, and returns <TT>None</TT>.<BR>
<BR>
Then write a function called <TT>middle</TT> that takes a list and
returns a new list that contains all but the first and last
elements.</EM></FONT></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc113">8.14</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="@default566"></A>
<FONT COLOR=black>Careless use of lists (and other mutable objects)
can lead to long hours of debugging. Here are some common
pitfalls and ways to avoid them:
</FONT><OL type=1><LI><FONT COLOR=black>Don't forget that most list methods modify the argument and
 return <TT>None</TT>. This is the opposite of the string methods,
 which return a new string and leave the original alone.<BR>
<BR>
If you are used to writing string code like this:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
word = word.strip()
</FONT></PRE>
<FONT COLOR=black>It is tempting to write list code like this:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
t = t.sort()           # WRONG!
</FONT></PRE>
<A NAME="@default567"></A>
<A NAME="@default568"></A>
<FONT COLOR=black>Because <TT>sort</TT> returns <TT>None</TT>, the
next operation you perform with <TT>t</TT> is likely to fail.<BR>
<BR>
Before using list methods and operators, you should read the
documentation carefully and then test them in interactive mode. The
methods and operators that lists share with other sequences (like
strings) are documented at
<TT>docs.python.org/lib/typesseq.html</TT>. The
methods and operators that only apply to mutable sequences
are documented at <TT>docs.python.org/lib/typesseq-mutable.html</TT>.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Pick an idiom and stick with it.<BR>
<BR>
Part of the problem with lists is that there are too many
ways to do things. For example, to remove an element from
a list, you can use <TT>pop</TT>, <TT>remove</TT>, <TT>del</TT>,
or even a slice assignment.<BR>
<BR>
To add an element, you can use the <TT>append</TT> method or
the <TT>+</TT> operator. But don't forget that these are right: 
</FONT><PRE><FONT SIZE=4 COLOR=blue>
t.append(x)
t = t + [x]
</FONT></PRE>
<FONT COLOR=black>And these are wrong:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
t.append([x])          # WRONG!
t = t.append(x)        # WRONG!
t + [x]                # WRONG!
t = t + x              # WRONG!
</FONT></PRE>
<FONT COLOR=black>Try out each of these examples in interactive mode to make sure
you understand what they do. Notice that only the last
one causes a runtime error; the other three are legal, but they
do the wrong thing.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Make copies to avoid aliasing.<BR>
<BR>
<A NAME="@default569"></A>
<A NAME="@default570"></A><BR>
<BR>
If you want to use a method like <TT>sort</TT> that modifies
the argument, but you need to keep the original list as
well, you can make a copy.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
orig = t[:]
t.sort()
</FONT></PRE>
<FONT COLOR=black>In this example you could also use the built-in function <TT>sorted</TT>,
which returns a new, sorted list and leaves the original alone.
But in that case you should avoid using <TT>sorted</TT> as a variable
name!</FONT><BR>
<BR>
<LI><FONT COLOR=black>Lists, <TT>split</TT>, and files<BR>
<BR>
When we read and parse files, there are many opportunities
to encounter input that can crash our program so it is a good 
idea to revisit the <B>guardian</B> pattern when it comes
writing programs that read through a file 
and look for a ``needle in the haystack''.<BR>
<BR>
Let's revisit our program that is looking for the day of the
week on the from lines of our file:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From stephen.marquard@uct.ac.za <B> Sat</B> Jan  5 09:14:16 2008
</FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black>Since we are breaking this line into words, we could dispense
with the use of <TT>startswith</TT> and simply look at the 
first word of the line to determine if we are interested
in the line at all. We can use <TT>continue</TT> to skip lines
that don't have ``From'' as the first word as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox-short.txt')
for line in fhand:
    words = line.split()
    if words[0] != 'From' : continue
    print words[2]
</FONT></PRE><FONT COLOR=black>This looks much simpler and we don't even need to do the 
<TT>rstrip</TT> to remove the newline at the end of the file.
But is it better?
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python search8.py 
Sat
Traceback (most recent call last):
  File "search8.py", line 5, in &lt;module&gt;
    if words[0] != 'From' : continue
IndexError: list index out of range
</FONT></PRE><FONT COLOR=black>It kind of works and we see the day from the first line
(Sat) but then the program fails with a traceback error.
What went wrong? What messed-up data caused our elegant, 
clever and very Pythonic program to fail?<BR>
<BR>
You could stare at it for a long time and puzzle through
it or ask someone for help, but the quicker and smarter
approach is to add a <TT>print</TT> statement. The best place
to add the print statement is right before the line where
the program failed and print out the data that seems to be causing
the failure.<BR>
<BR>
Now this approach may generate a lot of lines of output but at 
least you will immediately have some clue as to the 
problem at hand. So we add a print of the variable
<TT>words</TT> right before line five. We even 
add a prefix ``Debug:'' to the line so we can keep
our regular output separate from our debug output.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
for line in fhand:
    words = line.split()
    print 'Debug:', words
    if words[0] != 'From' : continue
    print words[2]
</FONT></PRE><FONT COLOR=black>When we run the program, a lot of output scrolls off the screen
but at the end, we see our debug output and the traceback so 
we know what happened just before the traceback.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Debug: ['X-DSPAM-Confidence:', '0.8475']
Debug: ['X-DSPAM-Probability:', '0.0000']
Debug: []
Traceback (most recent call last):
  File "search9.py", line 6, in &lt;module&gt;
    if words[0] != 'From' : continue
IndexError: list index out of range
</FONT></PRE><FONT COLOR=black>Each debug line is printing the list of words which we get
when we <TT>split</TT> the line into words. When the program fails
the list of words is empty <CODE>[]</CODE>. If we open the file in a text editor
and look at the file, at that point it looks as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
X-DSPAM-Result: Innocent
X-DSPAM-Processed: Sat Jan  5 09:14:16 2008
X-DSPAM-Confidence: 0.8475
X-DSPAM-Probability: 0.0000

Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772
</FONT></PRE><FONT COLOR=black>The error occurs when our program encounters a blank line! Of course there
are ``zero words'' on a blank line. Why didn't we think of that 
when we were writing the code. When the code looks for the first
word (<CODE>word[0]</CODE>) to check to see if it matches ``From'', 
we get an ``index out of range'' error.<BR>
<BR>
This of course is the perfect place to add some <B>guardian</B> code 
to avoid checking the first word if the first word is not there.
There are many ways to protect this code, we will choose to 
check the number of words we have before we look at the first word:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fhand = open('mbox-short.txt')
count = 0
for line in fhand:
    words = line.split()
    # print 'Debug:', words
    if len(words) == 0 : continue
    if words[0] != 'From' : continue
    print words[2]
</FONT></PRE><FONT COLOR=black>First we commented out the debug print statement instead of removing it 
in case our modification fails and we need to debug again. Then we added
a guardian statement that checks to see if we have zero words, and if so, 
we use <TT>continue</TT> to skip to the next line in the file.<BR>
<BR>
We can think of the two <TT>continue</TT> statements as helping us refine
the set of lines which are ``interesting'' to us and which we want 
to process some more. A line which has no words is ``uninteresting'' to 
us so we skip to the next line. A line which does not have ``From''
as its first word is uninteresting to us so we skip it.<BR>
<BR>
The program as modified runs successfully so perhaps it is correct. Our
guardian statement does make sure that the <TT>words[0]</TT> will never fail, 
but perhaps it is not enough. When we are programming, we must always be 
thinking, ``What might go wrong?''.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Figure out which line of the above program is still not properly guarded.
See if you can construct a text file which causes the program to fail
and then modify the program so that the line is properly guarded and 
test it to make sure it handles your new text file.
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Rewrite the guardian code in the above example without two
<TT>if</TT> statements. Instead use a compound logical expression using the
<TT>and</TT> logical operator with a single <TT>if</TT> statement.
</EM></FONT></DIV></OL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc114">8.15</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>aliasing:</B></FONT><DD><FONT COLOR=black> A circumstance where two or more variables refer to the same
object.
</FONT><A NAME="@default571"></A><BR>
<BR>
<DT><FONT COLOR=black><B>delimiter:</B></FONT><DD><FONT COLOR=black> A character or string used to indicate where a
string should be split.
</FONT><A NAME="@default572"></A><BR>
<BR>
<DT><FONT COLOR=black><B>element:</B></FONT><DD><FONT COLOR=black> One of the values in a list (or other sequence),
also called items.
</FONT><A NAME="@default573"></A><BR>
<BR>
<DT><FONT COLOR=black><B>equivalent:</B></FONT><DD><FONT COLOR=black> Having the same value.
</FONT><A NAME="@default574"></A><BR>
<BR>
<DT><FONT COLOR=black><B>index:</B></FONT><DD><FONT COLOR=black> An integer value that indicates an element in a list.
</FONT><A NAME="@default575"></A><BR>
<BR>
<DT><FONT COLOR=black><B>identical:</B></FONT><DD><FONT COLOR=black> Being the same object (which implies equivalence).
</FONT><A NAME="@default576"></A><BR>
<BR>
<DT><FONT COLOR=black><B>list:</B></FONT><DD><FONT COLOR=black> A sequence of values.
</FONT><A NAME="@default577"></A><BR>
<BR>
<DT><FONT COLOR=black><B>list traversal:</B></FONT><DD><FONT COLOR=black> The sequential accessing of each element in a list.
</FONT><A NAME="@default578"></A><BR>
<BR>
<DT><FONT COLOR=black><B>nested list:</B></FONT><DD><FONT COLOR=black> A list that is an element of another list.
</FONT><A NAME="@default579"></A><BR>
<BR>
<DT><FONT COLOR=black><B>object:</B></FONT><DD><FONT COLOR=black> Something a variable can refer to. An object
has a type and a value.
</FONT><A NAME="@default580"></A><BR>
<BR>
<DT><FONT COLOR=black><B>reference:</B></FONT><DD><FONT COLOR=black> The association between a variable and its value.
</FONT><A NAME="@default581"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc115">8.16</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;4</B>&nbsp;&nbsp;<EM>
Download a copy of the file from 
<TT>www.py4inf.com/code/romeo.txt</TT><BR>
<BR>
Write a program to open the file <TT>romeo.txt</TT> and read it
line by line. For each line, split the line into a list of 
words using the <TT>split</TT> function.<BR>
<BR>
For each word, check to see if the word is already in a list. 
If the word is not in the list, add it to the list. <BR>
<BR>
When the program completes, sort and print the resulting words
in alphabetical order.
</EM></FONT><PRE><FONT COLOR=black><EM>
Enter file: romeo.txt
['Arise', 'But', 'It', 'Juliet', 'Who', 'already', 
'and', 'breaks', 'east', 'envious', 'fair', 'grief', 
'is', 'kill', 'light', 'moon', 'pale', 'sick', 'soft', 
'sun', 'the', 'through', 'what', 'window', 
'with', 'yonder']
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;5</B>&nbsp;&nbsp;<EM>
Write a program to read through the mail box data and when you find 
line that starts with ``From'', you will split the line into 
words using the <TT>split</TT> function. We are interested in 
who sent the message which is the second word on the From line.<BR>
<BR>
<TT>From stephen.marquard@uct.ac.za Sat Jan 5 09:14:16 2008 </TT><BR>
<BR>
You will parse the From line and print out the second word for 
each From line and then you will also count the number of 
From (not From:) lines and print out a count at the end.<BR>
<BR>
This is a sample good output with a few lines removed:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
python fromcount.py 
Enter a file name: mbox-short.txt
stephen.marquard@uct.ac.za
louis@media.berkeley.edu
zqian@umich.edu

[...some output removed...]

ray@media.berkeley.edu
cwen@iupui.edu
cwen@iupui.edu
cwen@iupui.edu
There were 27 lines in the file with From as the first word
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;6</B>&nbsp;&nbsp;<EM>
Rewrite the program that prompts the user for a list of 
numbers and prints out the maximum and minimum of the
numbers at the end when the user enters ``done''. Write
the program to store the numbers the user enters in a list
and use the <TT>max()</TT> and <TT>min()</TT> fuctions to 
compute the maximum and minimum numbers after the 
loop completes.
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Enter a number: 6
Enter a number: 2
Enter a number: 9
Enter a number: 3
Enter a number: 5
Enter a number: done
Maximum: 9.0
Minimum: 2.0
</EM></FONT></PRE></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Dictionaries</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc116">Chapter&nbsp;9</A>&nbsp;&nbsp;Dictionaries</FONT></H1><!--SEC END -->

<A NAME="@default582"></A>
<A NAME="@default583"></A>
<A NAME="@default584"></A>
<A NAME="@default585"></A>
<A NAME="@default586"></A>
<A NAME="@default587"></A>
<FONT COLOR=black>A <B>dictionary</B> is like a list, but more general. In a list,
the positions (a.k.a. indices) have to be integers; in a dictionary 
the indices can be (almost) any type.<BR>
<BR>
You can think of a dictionary as a mapping between a set of indices
(which are called <B>keys</B>) and a set of values. Each key maps to a
value. The association of a key and a value is called a <B>key-value pair</B> or sometimes an <B>item</B>.<BR>
<BR>
As an example, we'll build a dictionary that maps from English
to Spanish words, so the keys and the values are all strings.<BR>
<BR>
The function <TT>dict</TT> creates a new dictionary with no items.
Because <TT>dict</TT> is the name of a built-in function, you
should avoid using it as a variable name.</FONT><BR>
<BR>
<A NAME="@default588"></A>
<A NAME="@default589"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; eng2sp = dict()
&gt;&gt;&gt; print eng2sp
{}
</FONT></PRE>
<FONT COLOR=black>The squiggly-brackets, <CODE>{}</CODE>, represent an empty dictionary.
To add items to the dictionary, you can use square brackets:</FONT><BR>
<BR>
<A NAME="@default590"></A>
<A NAME="@default591"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; eng2sp['one'] = 'uno'
</FONT></PRE><FONT COLOR=black>This line creates an item that maps from the key
<TT>'one'</TT> to the value <CODE>'uno'</CODE>. If we print the
dictionary again, we see a key-value pair with a colon
between the key and value:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print eng2sp
{'one': 'uno'}
</FONT></PRE><FONT COLOR=black>This output format is also an input format. For example,
you can create a new dictionary with three items:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; eng2sp = {'one': 'uno', 'two': 'dos', 'three': 'tres'}
</FONT></PRE><FONT COLOR=black>But if you print <TT>eng2sp</TT>, you might be surprised:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print eng2sp
{'one': 'uno', 'three': 'tres', 'two': 'dos'}
</FONT></PRE><FONT COLOR=black>The order of the key-value pairs is not the same. In fact, if
you type the same example on your computer, you might get a
different result. In general, the order of items in
a dictionary is unpredictable.<BR>
<BR>
But that's not a problem because
the elements of a dictionary are never indexed with integer indices.
Instead, you use the keys to look up the corresponding values:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print eng2sp['two']
'dos'
</FONT></PRE><FONT COLOR=black>The key <TT>'two'</TT> always maps to the value <CODE>'dos'</CODE> so the order
of the items doesn't matter.<BR>
<BR>
If the key isn't in the dictionary, you get an exception:</FONT><BR>
<BR>
<A NAME="@default592"></A>
<A NAME="@default593"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print eng2sp['four']
KeyError: 'four'
</FONT></PRE><FONT COLOR=black>The <TT>len</TT> function works on dictionaries; it returns the
number of key-value pairs:</FONT><BR>
<BR>
<A NAME="@default594"></A>
<A NAME="@default595"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; len(eng2sp)
3
</FONT></PRE><FONT COLOR=black>The <TT>in</TT> operator works on dictionaries; it tells you whether
something appears as a <EM>key</EM> in the dictionary (appearing
as a value is not good enough).</FONT><BR>
<BR>
<A NAME="@default596"></A>
<A NAME="@default597"></A>
<A NAME="@default598"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; 'one' in eng2sp
True
&gt;&gt;&gt; 'uno' in eng2sp
False
</FONT></PRE><FONT COLOR=black>To see whether something appears as a value in a dictionary, you
can use the method <TT>values</TT>, which returns the values as
a list, and then use the <TT>in</TT> operator:</FONT><BR>
<BR>
<A NAME="@default599"></A>
<A NAME="@default600"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; vals = eng2sp.values()
&gt;&gt;&gt; 'uno' in vals
True
</FONT></PRE><FONT COLOR=black>The <TT>in</TT> operator uses different algorithms for lists and
dictionaries. For lists, it uses a linear search algorithm.
As the list gets longer, the search time gets
longer in direct proportion to the length of the list. 
For dictionaries, Python uses an
algorithm called a <B>hash table</B> that has a remarkable property; the
<TT>in</TT> operator takes about the same amount of time no matter how
many items there are in a dictionary. I won't explain 
why hash functions are so magical,
but you can read more about it at
<TT>wikipedia.org/wiki/Hash_table</TT>.</FONT><BR>
<BR>
<A NAME="@default601"></A><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;
<A NAME="wordlist2"></A><BR>
<BR>
<A NAME="@default602"></A>
<A NAME="@default603"></A><BR>
<BR>
<EM>Write a function that reads the words in <TT>words.txt</TT> and
stores them as keys in a dictionary. It doesn't matter what the
values are. Then you can use the <TT>in</TT> operator
as a fast way to check whether a string is in
the dictionary.</EM></FONT></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Dictionary as a set of counters</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc117">9.1</A>&nbsp;&nbsp;Dictionary as a set of counters</FONT></H2><!--SEC END -->

<A NAME="histogram"></A>
<A NAME="@default604"></A>
<FONT COLOR=black>Suppose you are given a string and you want to count how many
times each letter appears. There are several ways you could do it:
</FONT><OL type=1><LI><FONT COLOR=black>You could create 26 variables, one for each letter of the
alphabet. Then you could traverse the string and, for each
character, increment the corresponding counter, probably using
a chained conditional.</FONT><BR>
<BR>
<LI><FONT COLOR=black>You could create a list with 26 elements. Then you could
convert each character to a number (using the built-in function
<TT>ord</TT>), use the number as an index into the list, and increment
the appropriate counter.</FONT><BR>
<BR>
<LI><FONT COLOR=black>You could create a dictionary with characters as keys
and counters as the corresponding values. The first time you
see a character, you would add an item to the dictionary. After
that you would increment the value of an existing item.</FONT></OL>
<FONT COLOR=black>Each of these options performs the same computation, but each
of them implements that computation in a different way.<BR>
<BR>
<A NAME="@default605"></A><BR>
<BR>
An <B>implementation</B> is a way of performing a computation;
some implementations are better than others. For example,
an advantage of the dictionary implementation is that we don't
have to know ahead of time which letters appear in the string
and we only have to make room for the letters that do appear.<BR>
<BR>
Here is what the code might look like:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def histogram(s):
    d = dict()
    for c in s:
        if c not in d:
            d[c] = 1
        else:
            d[c] = d[c] + 1
    return d
</FONT></PRE><FONT COLOR=black>The name of the function is <B>histogram</B>, which is a statistical
term for a set of counters (or frequencies). <BR>
<BR>
<A NAME="@default606"></A>
<A NAME="@default607"></A>
<A NAME="@default608"></A><BR>
<BR>
The first line of the
function creates an empty dictionary. The <TT>for</TT> loop traverses
the string. Each time through the loop, if the character <TT>c</TT> is
not in the dictionary, we create a new item with key <TT>c</TT> and the
initial value 1 (since we have seen this letter once). If <TT>c</TT> is
already in the dictionary we increment <TT>d[c]</TT>.<BR>
<BR>
<A NAME="@default609"></A><BR>
<BR>
Here's how it works:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; h = histogram('brontosaurus')
&gt;&gt;&gt; print h
{'a': 1, 'b': 1, 'o': 2, 'n': 1, 's': 2, 'r': 2, 'u': 2, 't': 1}
</FONT></PRE><FONT COLOR=black>The histogram indicates that the letters <TT>'a'</TT> and <CODE>'b'</CODE>
appear once; <CODE>'o'</CODE> appears twice, and so on.<BR>
</FONT><DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<BR>
<BR>
<A NAME="@default610"></A>
<A NAME="@default611"></A><BR>
<BR>
<EM>Dictionaries have a method called <TT>get</TT> that takes a key
and a default value. If the key appears in the dictionary,
<TT>get</TT> returns the corresponding value; otherwise it returns
the default value. For example:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
&gt;&gt;&gt; h = histogram('a')
&gt;&gt;&gt; print h
{'a': 1}
&gt;&gt;&gt; h.get('a', 0)
1
&gt;&gt;&gt; h.get('b', 0)
0
</EM></FONT></PRE><FONT COLOR=black><EM>Use <TT>get</TT> to write <TT>histogram</TT> more concisely. You
should be able to eliminate the <TT>if</TT> statement.
</EM></FONT></DIV><BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Dictionaries and files</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc118">9.2</A>&nbsp;&nbsp;Dictionaries and files</FONT></H2><!--SEC END -->

<FONT COLOR=black>One of the common uses of a dictionary is to count the occurrence
of words in a file with some written text. 
Let's start with a very simple file of
words taken from the text of <EM>Romeo and Juliet</EM>
thanks to 
<TT>http://shakespeare.mit.edu/Tragedy/romeoandjuliet/romeo_juliet.2.2.html</TT>.<BR>
<BR>
For the first set of examples, we will use a shortened and simplified version
of the text with no punctuation. Later we will work with the text of the 
scene with punctuation included.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
But soft what light through yonder window breaks
It is the east and Juliet is the sun
Arise fair sun and kill the envious moon
Who is already sick and pale with grief
</FONT></PRE><FONT COLOR=black>We will write a Python program to read through the lines of the file, 
break each line into a list of words, and then loop through each 
of the words in the line, and count each word using a dictionary.<BR>
<BR>
<A NAME="@default612"></A>
<A NAME="@default613"></A>
You will see that we have two <TT>for</TT> loops. The outer loop is reading the
lines of the file and the inner loop is iterating through each
of the words on that particular line. This is an example
of a pattern called <B>nested loops</B> because one of the loops
is the <EM>outer</EM> loop and the other loop is the <EM>inner</EM>
loop. <BR>
<BR>
Because the inner loop executes all of its iterations each time
the outer loop makes a single iteration, we think of the inner
loop as iterating ``more quickly'' and the outer loop as iterating 
more slowly.<BR>
<BR>
The combination of the two nested loops ensures that we will count
every word on every line of the input file.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
fname = raw_input('Enter the file name: ')
try:
    fhand = open(fname)
except:
    print 'File cannot be opened:', fname
    exit()

counts = dict()
for line in fhand:
    words = line.split()
    for word in words:
        if word not in counts:
            counts[word] = 1
        else:
            counts[word] += 1

print counts
</FONT></PRE><FONT COLOR=black>When we run the program, we see a raw dump of all of the counts in unsorted
hash order.
(the <TT>romeo.txt</TT> file is available at
<TT>www.py4inf.com/code/romeo.txt</TT>)
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python count1.py 
Enter the file name: romeo.txt
{'and': 3, 'envious': 1, 'already': 1, 'fair': 1, 
'is': 3, 'through': 1, 'pale': 1, 'yonder': 1, 
'what': 1, 'sun': 2, 'Who': 1, 'But': 1, 'moon': 1, 
'window': 1, 'sick': 1, 'east': 1, 'breaks': 1, 
'grief': 1, 'with': 1, 'light': 1, 'It': 1, 'Arise': 1, 
'kill': 1, 'the': 3, 'soft': 1, 'Juliet': 1}
</FONT></PRE><FONT COLOR=black>It is a bit inconvenient to look through the dictionary to find the
most common words and their counts, so we need to add some more 
Python code to get us the output that will be more helpful.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Looping and dictionaries</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc119">9.3</A>&nbsp;&nbsp;Looping and dictionaries</FONT></H2><!--SEC END -->

<A NAME="@default614"></A>
<A NAME="@default615"></A>
<A NAME="@default616"></A>
<FONT COLOR=black>If you use a dictionary as the sequence 
in a <TT>for</TT> statement, it traverses
the keys of the dictionary. For example, <CODE>print_hist</CODE>
prints each key and the corresponding value:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def print_hist(h):
    for c in h:
        print c, h[c]
</FONT></PRE><FONT COLOR=black>Here's what the output looks like:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; h = histogram('parrot')
&gt;&gt;&gt; print_hist(h)
a 1
p 1
r 2
t 1
o 1
</FONT></PRE><FONT COLOR=black>Again, the keys are in no particular order.<BR>
<BR>
<A NAME="@default617"></A>
<A NAME="@default618"></A>
If you want to print the keys in alphabetical order, you first 
make a list of the keys in the dictionary using the 
<TT>keys</TT> method available in dictionary objects,
and then sort that list
and loop through the sorted list, looking up each
key printing out key/value pairs in sorted order as follows
as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def print_sorted_hist(h):
    lst = h.keys()
    lst.sort()
    for c in lst:
        print c, h[c]
</FONT></PRE><FONT COLOR=black>Here's what the output looks like:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; h = histogram('parrot')
&gt;&gt;&gt; print_sorted_hist(h)
a 1
o 1
p 1
r 2
t 1
</FONT></PRE><FONT COLOR=black>So now the keys are in alphabetical order.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Advanced text parsing</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc120">9.4</A>&nbsp;&nbsp;Advanced text parsing</FONT></H2><!--SEC END -->

<FONT COLOR=black>In the above example using the file <TT>romeo.txt</TT>,
we made the file as simple as possible by removing 
any and all punctuation by hand. The real text 
has lots of punctuation as shown below:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
But, soft! what light through yonder window breaks?
It is the east, and Juliet is the sun.
Arise, fair sun, and kill the envious moon,
Who is already sick and pale with grief,
</FONT></PRE><FONT COLOR=black>Since the Python <TT>split</TT> function looks for spaces and
treats words as tokens separated by spaces, we would treat the
words ``soft!'' and ``soft'' as <EM>different</EM> words and create
a separate dictionary entry for each word.<BR>
<BR>
Also since the file has capitalization, we would treat
``who'' and ``Who'' as different words with different 
counts.<BR>
<BR>
We can solve both these problems by using the string
methods <TT>lower</TT>, <TT>punctuation</TT>, and <TT>translate</TT>. The 
<TT>translate</TT> is the most subtle of the methods. 
Here is the documentation for <TT>translate</TT>:<BR>
<BR>
<CODE>string.translate(s, table[, deletechars])</CODE><BR>
<BR>
<EM>Delete all characters from s that are in deletechars (if present), 
and then translate the characters using table, which must 
be a 256-character string giving the translation for each 
character value, indexed by its ordinal. If table is None, 
then only the character deletion step is performed.</EM><BR>
<BR>
We will not specify the <TT>table</TT> but we will use 
the <TT>deletechars</TT> parameter to delete all of the punctuation.
We will even let Python tell us the list of characters
that it considers ``punctuation'':
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; import string
&gt;&gt;&gt; string.punctuation
'!"#$%&amp;\'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~'
</FONT></PRE><FONT COLOR=black>We make the following modifications to our program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import string                                          # New Code

fname = raw_input('Enter the file name: ')
try:
    fhand = open(fname)
except:
    print 'File cannot be opened:', fname
    exit()

counts = dict()
for line in fhand:
    line = line.translate(None, string.punctuation)    # New Code
    line = line.lower()                                # New Code
    words = line.split()
    for word in words:
        if word not in counts:
            counts[word] = 1
        else:
            counts[word] += 1

print counts
</FONT></PRE><FONT COLOR=black>We use <TT>translate</TT> to remove all punctuation and <TT>lower</TT> to 
force the line to lowercase. Otherwise the program is unchanged.
Note for Python 2.5 and earlier, <TT>translate</TT> does not 
accept <TT>None</TT> as the first parameter so use this code for the translate 
call:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
print a.translate(string.maketrans(' ',' '), string.punctuation
</FONT></PRE><FONT COLOR=black>Part of learning the ``Art of Python'' or ``Thinking Pythonically''
is realizing that Python
often has built-in capabilities for many common data-analysis
problems. Over time, you will see enough example code and read
enough of the documentation to know where to look to see if someone
has already written something that makes your job much easier.<BR>
<BR>
The following is an abbreviated version of the output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Enter the file name: romeo-full.txt
{'swearst': 1, 'all': 6, 'afeard': 1, 'leave': 2, 'these': 2, 
'kinsmen': 2, 'what': 11, 'thinkst': 1, 'love': 24, 'cloak': 1, 
a': 24, 'orchard': 2, 'light': 5, 'lovers': 2, 'romeo': 40, 
'maiden': 1, 'whiteupturned': 1, 'juliet': 32, 'gentleman': 1, 
'it': 22, 'leans': 1, 'canst': 1, 'having': 1, ...}
</FONT></PRE><FONT COLOR=black>Looking through this output is still unwieldy and we can use
Python to gives us exactly what we are looking for, but to do 
so, we need to learn about Python <B>tuples</B>. We
will pick up this example once we learn about tuples.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc121">9.5</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="@default619"></A>
<FONT COLOR=black>As you work with bigger datasets it can become unwieldy to
debug by printing and checking data by hand. Here are some
suggestions for debugging large datasets:
</FONT><DL COMPACT=compact><DT><FONT COLOR=black><B>Scale down the input:</B></FONT><DD><FONT COLOR=black> If possible, reduce the size of the
dataset. For example if the program reads a text file, start with
just the first 10 lines, or with the smallest example you can find.
You can either edit the files themselves, or (better) modify the
program so it reads only the first <TT>n</TT> lines.<BR>
<BR>
If there is an error, you can reduce <TT>n</TT> to the smallest
value that manifests the error, and then increase it gradually
as you find and correct errors.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>Check summaries and types:</B></FONT><DD><FONT COLOR=black> Instead of printing and checking the
entire dataset, consider printing summaries of the data: for example,
the number of items in a dictionary or the total of a list of numbers.<BR>
<BR>
A common cause of runtime errors is a value that is not the right
type. For debugging this kind of error, it is often enough to print
the type of a value.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>Write self-checks:</B></FONT><DD><FONT COLOR=black> Sometimes you can write code to check
for errors automatically. For example, if you are computing the
average of a list of numbers, you could check that the result is
not greater than the largest element in the list or less than
the smallest. This is called a ``sanity check'' because it detects
results that are ``insane.''<BR>
<BR>
<A NAME="@default620"></A>
<A NAME="@default621"></A><BR>
<BR>
Another kind of check compares the results of two different
computations to see if they are consistent. This is called a
``consistency check.''</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>Pretty print the output:</B></FONT><DD><FONT COLOR=black> Formatting debugging output
can make it easier to spot an error. </FONT></DL>
<FONT COLOR=black>Again, time you spend building scaffolding can reduce
the time you spend debugging.</FONT><BR>
<BR>
<A NAME="@default622"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc122">9.6</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>dictionary:</B></FONT><DD><FONT COLOR=black> A mapping from a set of keys to their
corresponding values.
</FONT><A NAME="@default623"></A><BR>
<BR>
<DT><FONT COLOR=black><B>hashtable:</B></FONT><DD><FONT COLOR=black> The algorithm used to implement Python
dictionaries.
</FONT><A NAME="@default624"></A><BR>
<BR>
<DT><FONT COLOR=black><B>hash function:</B></FONT><DD><FONT COLOR=black> A function used by a hashtable to compute the
location for a key.
</FONT><A NAME="@default625"></A><BR>
<BR>
<DT><FONT COLOR=black><B>histogram:</B></FONT><DD><FONT COLOR=black> A set of counters.
</FONT><A NAME="@default626"></A><BR>
<BR>
<DT><FONT COLOR=black><B>implementation:</B></FONT><DD><FONT COLOR=black> A way of performing a computation.
</FONT><A NAME="@default627"></A><BR>
<BR>
<DT><FONT COLOR=black><B>item:</B></FONT><DD><FONT COLOR=black> Another name for a key-value pair.
</FONT><A NAME="@default628"></A><BR>
<BR>
<DT><FONT COLOR=black><B>key:</B></FONT><DD><FONT COLOR=black> An object that appears in a dictionary as the
first part of a key-value pair.
</FONT><A NAME="@default629"></A><BR>
<BR>
<DT><FONT COLOR=black><B>key-value pair:</B></FONT><DD><FONT COLOR=black> The representation of the mapping from
a key to a value.
</FONT><A NAME="@default630"></A><BR>
<BR>
<DT><FONT COLOR=black><B>lookup:</B></FONT><DD><FONT COLOR=black> A dictionary operation that takes a key and finds
the corresponding value.
</FONT><A NAME="@default631"></A><BR>
<BR>
<DT><FONT COLOR=black><B>nested loops:</B></FONT><DD><FONT COLOR=black> When there is one or more loops ``inside'' of 
another loop. The inner loop runs to completion each time the outer
loop runs once.
</FONT><A NAME="@default632"></A>
<A NAME="@default633"></A><BR>
<BR>
<DT><FONT COLOR=black><B>value:</B></FONT><DD><FONT COLOR=black> An object that appears in a dictionary as the
second part of a key-value pair. This is more specific than
our previous use of the word ``value.''
</FONT><A NAME="@default634"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc123">9.7</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Write a program that categorizes each mail message by which 
day of the week the commit was done. To do this look for 
lines which start with ``From'', then look for the 
third word and then keep a running count of each of the 
days of the week. At the end of the program print out the 
contents of your dictionary (order does not matter).
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Sample Line:
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008

Sample Execution:
python dow.py
Enter a file name: mbox-short.txt
{'Fri': 20, 'Thu': 6, 'Sat': 1}
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;4</B>&nbsp;&nbsp;<EM>
Write a program to read through a mail log, and figure 
out who had the most messages in the file. The program looks 
for ``From'' lines and takes the second parameter on those 
lines as the person who sent the mail.<BR>
<BR>
The program creates a Python dictionary that maps 
the sender's address to the total number of messages for that person.<BR>
<BR>
After all the data has been read the program looks 
through the dictionary using a maximum loop
 (see Section&nbsp;<A HREF="#maximumloop">5.7.2</A>)
to find who has the most 
messages and how many messages the person has.
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Enter a file name: mbox-short.txt
cwen@iupui.edu 5

Enter a file name: mbox.txt
zqian@umich.edu 195
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;5</B>&nbsp;&nbsp;<EM>
This program records the domain name (instead of the address) 
where the message was sent from instead of who the mail 
came from (i.e. the whole e-mail address). At the end 
of the program print out the contents of your dictionary. 
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
python schoolcount.py
Enter a file name: mbox-short.txt
{'media.berkeley.edu': 4, 'uct.ac.za': 6, 'umich.edu': 7, 
'gmail.com': 1, 'caret.cam.ac.uk': 1, 'iupui.edu': 8}
</EM></FONT></PRE></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Tuples</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc124">Chapter&nbsp;10</A>&nbsp;&nbsp;Tuples</FONT></H1><!--SEC END -->

<A NAME="tuplechap"></A>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Tuples are immutable</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc125">10.1</A>&nbsp;&nbsp;Tuples are immutable</FONT></H2><!--SEC END -->

<A NAME="@default635"></A>
<A NAME="@default636"></A>
<A NAME="@default637"></A>
<FONT COLOR=black>A tuple<SUP><A NAME="text8" HREF="#note8">1</A></SUP>
is a sequence of values much like a list. 
The values stored in a tuple can be any type, and
they are indexed by integers.
The important difference is that tuples are <B>immutable</B>.
Tuples are also <B>comparable</B> and <B>hashable</B> so we can 
sort lists of them and use tuples as key values in Python
dictionaries.<BR>
<BR>
<A NAME="@default638"></A>
<A NAME="@default639"></A>
<A NAME="@default640"></A>
<A NAME="@default641"></A><BR>
<BR>
Syntactically, a tuple is a comma-separated list of values:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = 'a', 'b', 'c', 'd', 'e'
</FONT></PRE><FONT COLOR=black>Although it is not necessary, it is common to enclose tuples in
parentheses to help us quickly identify tuples when we look at
Python code:</FONT><BR>
<BR>
<A NAME="@default642"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ('a', 'b', 'c', 'd', 'e')
</FONT></PRE><FONT COLOR=black>To create a tuple with a single element, you have to include the final
comma:</FONT><BR>
<BR>
<A NAME="@default643"></A>
<A NAME="@default644"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t1 = ('a',)
&gt;&gt;&gt; type(t1)
&lt;type 'tuple'&gt;
</FONT></PRE><FONT COLOR=black>Without the comma Python treats <CODE>('a')</CODE> as an expression 
with a string in parentheses that evaluates to a string:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t2 = ('a')
&gt;&gt;&gt; type(t2)
&lt;type 'str'&gt;
</FONT></PRE><FONT COLOR=black>Another way to construct a tuple is the built-in function <TT>tuple</TT>.
With no argument, it creates an empty tuple:</FONT><BR>
<BR>
<A NAME="@default645"></A>
<A NAME="@default646"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = tuple()
&gt;&gt;&gt; print t
()
</FONT></PRE><FONT COLOR=black>If the argument is a sequence (string, list or tuple), the result
of the call to <TT>tuple</TT>
is a tuple with the elements of the sequence:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = tuple('lupins')
&gt;&gt;&gt; print t
('l', 'u', 'p', 'i', 'n', 's')
</FONT></PRE><FONT COLOR=black>Because <TT>tuple</TT> is the name of a constructor, you should
avoid using it as a variable name.<BR>
<BR>
Most list operators also work on tuples. The bracket operator
indexes an element:</FONT><BR>
<BR>
<A NAME="@default647"></A>
<A NAME="@default648"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ('a', 'b', 'c', 'd', 'e')
&gt;&gt;&gt; print t[0]
'a'
</FONT></PRE><FONT COLOR=black>And the slice operator selects a range of elements.</FONT><BR>
<BR>
<A NAME="@default649"></A>
<A NAME="@default650"></A>
<A NAME="@default651"></A>
<A NAME="@default652"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print t[1:3]
('b', 'c')
</FONT></PRE><FONT COLOR=black>But if you try to modify one of the elements of the tuple, you get
an error:</FONT><BR>
<BR>
<A NAME="@default653"></A>
<A NAME="@default654"></A>
<A NAME="@default655"></A>
<A NAME="@default656"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t[0] = 'A'
TypeError: object doesn't support item assignment
</FONT></PRE><FONT COLOR=black>You can't modify the elements of a tuple, but you can replace
one tuple with another:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; t = ('A',) + t[1:]
&gt;&gt;&gt; print t
('A', 'b', 'c', 'd', 'e')
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Comparing tuples</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc126">10.2</A>&nbsp;&nbsp;Comparing tuples</FONT></H2><!--SEC END -->

<A NAME="@default657"></A>
<A NAME="@default658"></A>
<A NAME="@default659"></A>
<A NAME="@default660"></A>
<FONT COLOR=black>The comparison operators work with tuples and other sequences;
Python starts by comparing the first element from each
sequence. If they are equal, it goes on to the next element,
and so on, until it finds elements that differ. Subsequent
elements are not considered (even if they are really big).
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; (0, 1, 2) &lt; (0, 3, 4)
True
&gt;&gt;&gt; (0, 1, 2000000) &lt; (0, 3, 4)
True
</FONT></PRE><FONT COLOR=black>The <TT>sort</TT> function works the same way. It sorts 
primarily by first element, but in the case of a tie, it sorts
by second element, and so on. <BR>
<BR>
This feature lends itself to a pattern called <B>DSU</B> for 
</FONT><DL COMPACT=compact><DT><FONT COLOR=black><B>Decorate</B></FONT><DD><FONT COLOR=black> a sequence by building a list of tuples
with one or more sort keys preceding the elements from the sequence,</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>Sort</B></FONT><DD><FONT COLOR=black> the list of tuples uring the Python built-in <TT>sort</TT>, and</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>Undecorate</B></FONT><DD><FONT COLOR=black> by extracting the sorted elements of the sequence.</FONT></DL>
<A NAME="DSU"></A>
<A NAME="@default661"></A>
<A NAME="@default662"></A>
<A NAME="@default663"></A>
<A NAME="@default664"></A>
<FONT COLOR=black>For example, suppose you have a list of words and you want to
sort them from longest to shortest:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
def sort_by_length(words):
    t = list()
    for word in words:
       t.append((len(word), word))

    t.sort(reverse=True)

    res = list()
    for length, word in t:
        res.append(word)
    return res
</FONT></PRE><FONT COLOR=black>The first loop builds a list of tuples, where each
tuple is a word preceded by its length.<BR>
<BR>
<TT>sort</TT> compares the first element, length, first, and
only considers the second element to break ties. The keyword argument
<TT>reverse=True</TT> tells <TT>sort</TT> to go in decreasing order.<BR>
<BR>
<A NAME="@default665"></A>
<A NAME="@default666"></A>
<A NAME="@default667"></A><BR>
<BR>
The second loop traverses the list of tuples and builds a list of
words in descending order of length.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Tuple assignment</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc127">10.3</A>&nbsp;&nbsp;Tuple assignment</FONT></H2><!--SEC END -->

<A NAME="tuple assignment"></A>
<A NAME="@default668"></A>
<A NAME="@default669"></A>
<A NAME="@default670"></A>
<A NAME="@default671"></A>
<FONT COLOR=black>One of the unique syntactic features of the Python language
is the ability to have a tuple on the left hand
side of an assignment statement. This allows you to assign
more than one variable at a time when the left hand side is a 
sequence.<BR>
<BR>
In this example we have a two element list (which is a sequence) and
assign the first and second elements of the sequence
to the variables <TT>x</TT> and <TT>y</TT> in a single statement.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; m = [ 'have', 'fun' ]
&gt;&gt;&gt; x, y = m
&gt;&gt;&gt; x
'have'
&gt;&gt;&gt; y
'fun'
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>It is not magic, Python <EM>roughly</EM> translates the 
tuple assignment syntax
to be the following:<SUP><A NAME="text9" HREF="#note9">2</A></SUP></FONT>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; m = [ 'have', 'fun' ]
&gt;&gt;&gt; x = m[0]
&gt;&gt;&gt; y = m[1]
&gt;&gt;&gt; x
'have'
&gt;&gt;&gt; y
'fun'
&gt;&gt;&gt; 
</FONT></PRE>
<FONT COLOR=black>Stylistically when we use a tuple on the left hand side of the assignment
statement, we omit the parentheses, but the following is an equally 
valid syntax:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; m = [ 'have', 'fun' ]
&gt;&gt;&gt; (x, y) = m
&gt;&gt;&gt; x
'have'
&gt;&gt;&gt; y
'fun'
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>A particularly clever application of tuple assignment allows
us to <B>swap</B> the values of two variables in a single statement:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; a, b = b, a
</FONT></PRE><FONT COLOR=black>Both sides of this statement are tuples, but
the left side is a tuple of variables; the right side is a tuple of
expressions. Each value on the right side 
is assigned to its respective variable on the left side. 
All the expressions on the right side are evaluated before any
of the assignments.<BR>
<BR>
The number of variables on the left and the number of
values on the right have to be the same:</FONT><BR>
<BR>
<A NAME="@default672"></A>
<A NAME="@default673"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; a, b = 1, 2, 3
ValueError: too many values to unpack
</FONT></PRE><FONT COLOR=black>More generally, the right side can be any kind of sequence
(string, list or tuple). For example, to split an email address
into a user name and a domain, you could write:</FONT><BR>
<BR>
<A NAME="@default674"></A>
<A NAME="@default675"></A>
<A NAME="@default676"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; addr = 'monty@python.org'
&gt;&gt;&gt; uname, domain = addr.split('@')
</FONT></PRE><FONT COLOR=black>The return value from <TT>split</TT> is a list with two elements;
the first element is assigned to <TT>uname</TT>, the second to
<TT>domain</TT>.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; print uname
monty
&gt;&gt;&gt; print domain
python.org
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Dictionaries and tuples</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc128">10.4</A>&nbsp;&nbsp;Dictionaries and tuples</FONT></H2><!--SEC END -->

<A NAME="@default677"></A>
<A NAME="@default678"></A>
<A NAME="@default679"></A>
<A NAME="@default680"></A>
<FONT COLOR=black>Dictionaries have a method called <TT>items</TT> that returns a list of
tuples, where each tuple is a key-value 
pair<SUP><A NAME="text10" HREF="#note10">3</A></SUP>.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; d = {'a':10, 'b':1, 'c':22}
&gt;&gt;&gt; t = d.items()
&gt;&gt;&gt; print t
[('a', 10), ('c', 22), ('b', 1)]
</FONT></PRE><FONT COLOR=black>As you should expect from a dictionary, the items are in no
particular order.<BR>
<BR>
However, since the list of tuples is a list, and tuples are comparable,
we can now sort the list of tuples. Converting a dictionary
to a list of tuples is a way for us to output the contents of a 
dictionary sorted by key:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; d = {'a':10, 'b':1, 'c':22}
&gt;&gt;&gt; t = d.items()
&gt;&gt;&gt; t
[('a', 10), ('c', 22), ('b', 1)]
&gt;&gt;&gt; t.sort()
&gt;&gt;&gt; t
[('a', 10), ('b', 1), ('c', 22)]
</FONT></PRE><FONT COLOR=black>The new list is sorted in ascending alphabetical order by the key value.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Multiple assignment with dictionaries</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc129">10.5</A>&nbsp;&nbsp;Multiple assignment with dictionaries</FONT></H2><!--SEC END -->

<A NAME="@default681"></A>
<A NAME="@default682"></A>
<FONT COLOR=black>Combining <TT>items</TT>, tuple assignment and <TT>for</TT>, you
can see a nice code pattern for traversing the keys and values of a dictionary
in a single loop:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
for key, val in d.items():
    print val, key
</FONT></PRE><FONT COLOR=black>This loop has two <B>iteration variables</B> because <TT>items</TT> returns
a list of tuples and <TT>key, val</TT> is a tuple assignment
that successively iterates through each of the key/value pairs in the dictionary. <BR>
<BR>
For each iteration
through the loop, both <TT>key</TT> and <TT>value</TT> are advanced to the
next key/value pair in the dictionary (still in hash order).<BR>
<BR>
The output of this loop is:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
0 a
2 c
1 b
</FONT></PRE><FONT COLOR=black>Again in hash key order (i.e. no particular order).<BR>
<BR>
If we combine these two techniques, we can print out the contents
of a dictionary sorted by the <EM>value</EM> stored in each key/value
pair.<BR>
<BR>
To do this, we first make a list of tuples where each tuple is 
<TT>(value, key)</TT>. The <TT>items</TT> method would give us a list of 
<TT>(key, value)</TT> tuples--but this time we want to sort by value not key.
Once we have constructed the list with the value/key tuples, it is a simple
matter to sort the list in reverse order and print out the new, sorted list.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; d = {'a':10, 'b':1, 'c':22}
&gt;&gt;&gt; l = list()
&gt;&gt;&gt; for key, val in d.items() :
...     l.append( (val, key) )
... 
&gt;&gt;&gt; l
[(10, 'a'), (22, 'c'), (1, 'b')]
&gt;&gt;&gt; l.sort(reverse=True)
&gt;&gt;&gt; l
[(22, 'c'), (10, 'a'), (1, 'b')]
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>By hand-constructing the list of tuples to have the value as the first
element of each tuple, we can sort the list of tuples and get our dictionary
contents sorted by value.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>The most common words</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc130">10.6</A>&nbsp;&nbsp;The most common words</FONT></H2><!--SEC END -->

<FONT COLOR=black>Coming back to our running example of the text from <EM>Romeo and Juliet</EM> 
Act 2, Scene 2, we can augment our program to use this technique to 
print the ten most common words in the text as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import string
fhand = open('romeo-full.txt')
counts = dict()
for line in fhand:
    line = line.translate(None, string.punctuation)
    line = line.lower()
    words = line.split()
    for word in words:
        if word not in counts:
            counts[word] = 1
        else:
            counts[word] += 1

# Sort the dictionary by value
lst = list()
for key, val in counts.items():
    lst.append( (val, key) )

lst.sort(reverse=True)

for key, val in lst[:10] :
    print key, val
</FONT></PRE><FONT COLOR=black>The first part of the program which reads the file and computes 
the dictionary that maps each word to the count of words in the 
document is unchanged. But instead of simply printing out 
<TT>counts</TT> and ending the program, we construct a list 
of <TT>(val, key)</TT> tuples and then sort the list in reverse order.<BR>
<BR>
Since the value is first, it will be used for the comparisons and 
if there is more than one tuple with the same value, it will look
at the second element (the key) so tuples where the value is the
same will be further sorted by the alphabetical order of the key.<BR>
<BR>
At the end we write a nice <TT>for loop</TT> which does a multiple
assignment iteration and prints out the ten most common words
by iterating through a slice of the list (<TT>lst[:10]</TT>).<BR>
<BR>
So now the output finally looks like what we want for our word 
frequency analysis.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
61 i
42 and
40 romeo
34 to
34 the
32 thou
32 juliet
30 that
29 my
24 thee
</FONT></PRE><FONT COLOR=black>The fact that this complex data parsing and analysis 
can be done with an easy-to-understand 19 line Python
program is one reason why Python is a good choice as a language 
for exploring information.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Using tuples as keys in dictionaries</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc131">10.7</A>&nbsp;&nbsp;Using tuples as keys in dictionaries</FONT></H2><!--SEC END -->

<A NAME="@default683"></A>
<A NAME="@default684"></A>
<FONT COLOR=black>Because tuples are <B>hashable</B> and lists are not, if we want to 
create a <B>composite</B> key to use in a dictionary we must use a tuple as
the key.<BR>
<BR>
We would encounter a composite key if we wanted to create a 
telephone directory that maps
from last-name, first-name pairs to telephone numbers. Assuming
that we have defined the variables 
<TT>last</TT>, <TT>first</TT> and <TT>number</TT>, we could write
a dictionary assignment statement as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
directory[last,first] = number
</FONT></PRE><FONT COLOR=black>The expression in brackets is a tuple. We could use tuple
assignment in a <TT>for</TT> loop to traverse this dictionary.</FONT><BR>
<BR>
<A NAME="@default685"></A>
<PRE><FONT SIZE=4 COLOR=blue>
for last, first in directory:
    print first, last, directory[last,first]
</FONT></PRE><FONT COLOR=black>This loop traverses the keys in <TT>directory</TT>, which are tuples. It
assigns the elements of each tuple to <TT>last</TT> and <TT>first</TT>, then
prints the name and corresponding telephone number.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Sequences: strings, lists, and tuples--Oh My!</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc132">10.8</A>&nbsp;&nbsp;Sequences: strings, lists, and tuples--Oh My!</FONT></H2><!--SEC END -->

<A NAME="@default686"></A>
<FONT COLOR=black>I have focused on lists of tuples, but almost all of the examples in
this chapter also work with lists of lists, tuples of tuples, and
tuples of lists. To avoid enumerating the possible combinations, it
is sometimes easier to talk about sequences of sequences.<BR>
<BR>
In many contexts, the different kinds of sequences (strings, lists and
tuples) can be used interchangeably. So how and why do you choose one
over the others?<BR>
<BR>
<A NAME="@default687"></A>
<A NAME="@default688"></A>
<A NAME="@default689"></A>
<A NAME="@default690"></A>
<A NAME="@default691"></A><BR>
<BR>
To start with the obvious, strings are more limited than other
sequences because the elements have to be characters. They are
also immutable. If you need the ability to change the characters
in a string (as opposed to creating a new string), you might
want to use a list of characters instead.<BR>
<BR>
Lists are more common than tuples, mostly because they are mutable.
But there are a few cases where you might prefer tuples:
</FONT><OL type=1><LI><FONT COLOR=black>In some contexts, like a <TT>return</TT> statement, it is
syntactically simpler to create a tuple than a list. In other
contexts, you might prefer a list.</FONT><BR>
<BR>
<LI><FONT COLOR=black>If you want to use a sequence as a dictionary key, you
have to use an immutable type like a tuple or string.</FONT><BR>
<BR>
<LI><FONT COLOR=black>If you are passing a sequence as an argument to a function,
using tuples reduces the potential for unexpected behavior
due to aliasing.</FONT></OL>
<FONT COLOR=black>Because tuples are immutable, they don't provide methods
like <TT>sort</TT> and <TT>reverse</TT>, which modify existing lists.
However Python provides the built-in functions <TT>sorted</TT>
and <TT>reversed</TT>, which take any sequence as a parameter
and return a new list with the same elements in a different
order.</FONT><BR>
<BR>
<A NAME="@default692"></A>
<A NAME="@default693"></A>
<A NAME="@default694"></A>
<A NAME="@default695"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc133">10.9</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<A NAME="@default696"></A>
<A NAME="@default697"></A>
<A NAME="@default698"></A>
<A NAME="@default699"></A>
<FONT COLOR=black>Lists, dictionaries and tuples are known generically as <B>data
 structures</B>; in this chapter we are starting to see compound data
structures, like lists of tuples, and dictionaries that contain tuples
as keys and lists as values. Compound data structures are useful, but
they are prone to what I call <B>shape errors</B>; that is, errors
caused when a data structure has the wrong type, size or composition
or perhaps you write some code and forget the shape of your data
and introduce an error.<BR>
<BR>
For example, if you are expecting a list with one integer and I
give you a plain old integer (not in a list), it won't work.<BR>
<BR>
When you are debugging a program, and especially if you are
working on a hard bug, there are four things to try:
</FONT><DL COMPACT=compact><DT><FONT COLOR=black><B>reading:</B></FONT><DD><FONT COLOR=black> Examine your code, read it back to yourself, and
check that it says what you meant to say.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>running:</B></FONT><DD><FONT COLOR=black> Experiment by making changes and running different
versions. Often if you display the right thing at the right place
in the program, the problem becomes obvious, but sometimes you have to
spend some time to build scaffolding.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>ruminating:</B></FONT><DD><FONT COLOR=black> Take some time to think! What kind of error
is it: syntax, runtime, semantic? What information can you get from
the error messages, or from the output of the program? What kind of
error could cause the problem you're seeing? What did you change
last, before the problem appeared?</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>retreating:</B></FONT><DD><FONT COLOR=black> At some point, the best thing to do is back
off, undoing recent changes, until you get back to a program that
works and that you understand. Then you can start rebuilding.</FONT></DL>
<FONT COLOR=black>Beginning programmers sometimes get stuck on one of these activities
and forget the others. Each activity comes with its own failure
mode.<BR>
<BR>
<A NAME="@default700"></A><BR>
<BR>
For example, reading your code might help if the problem is a
typographical error, but not if the problem is a conceptual
misunderstanding. If you don't understand what your program does, you
can read it 100 times and never see the error, because the error is in
your head.<BR>
<BR>
<A NAME="@default701"></A><BR>
<BR>
Running experiments can help, especially if you run small, simple
tests. But if you run experiments without thinking or reading your
code, you might fall into a pattern I call ``random walk programming,''
which is the process of making random changes until the program
does the right thing. Needless to say, random walk programming
can take a long time.<BR>
<BR>
<A NAME="@default702"></A>
<A NAME="@default703"></A><BR>
<BR>
You have to take time to think. Debugging is like an
experimental science. You should have at least one hypothesis about
what the problem is. If there are two or more possibilities, try to
think of a test that would eliminate one of them.<BR>
<BR>
Taking a break helps with the thinking. So does talking.
If you explain the problem to someone else (or even yourself), you
will sometimes find the answer before you finish asking the question.<BR>
<BR>
But even the best debugging techniques will fail if there are too many
errors, or if the code you are trying to fix is too big and
complicated. Sometimes the best option is to retreat, simplifying the
program until you get to something that works and that you
understand.<BR>
<BR>
Beginning programmers are often reluctant to retreat because
they can't stand to delete a line of code (even if it's wrong).
If it makes you feel better, copy your program into another file
before you start stripping it down. Then you can paste the pieces
back in a little bit at a time.<BR>
<BR>
Finding a hard bug requires reading, running, ruminating, and
sometimes retreating. If you get stuck on one of these activities,
try the others.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc134">10.10</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>comparable:</B></FONT><DD><FONT COLOR=black> A type where one value can be checked to see if it is
greater than, less than or equal to another value of the same type.
Types which are comparable can be put in a list and sorted.
</FONT><A NAME="@default704"></A><BR>
<BR>
<DT><FONT COLOR=black><B>data structure:</B></FONT><DD><FONT COLOR=black> A collection of related values, often
organized in lists, dictionaries, tuples, etc.
</FONT><A NAME="@default705"></A><BR>
<BR>
<DT><FONT COLOR=black><B>DSU:</B></FONT><DD><FONT COLOR=black> Abbreviation of ``decorate-sort-undecorate,'' a
pattern that involves building a list of tuples, sorting, and
extracting part of the result.
</FONT><A NAME="@default706"></A><BR>
<BR>
<DT><FONT COLOR=black><B>gather:</B></FONT><DD><FONT COLOR=black> The operation of assembling a variable-length
argument tuple.
</FONT><A NAME="@default707"></A><BR>
<BR>
<DT><FONT COLOR=black><B>hashable:</B></FONT><DD><FONT COLOR=black> A type that has a hash function. Immutable
types like integers,
floats and strings are hashable; mutable types like lists and
dictionaries are not.
</FONT><A NAME="@default708"></A><BR>
<BR>
<DT><FONT COLOR=black><B>scatter:</B></FONT><DD><FONT COLOR=black> The operation of treating a sequence as a list of
arguments.
</FONT><A NAME="@default709"></A><BR>
<BR>
<DT><FONT COLOR=black><B>shape (of a data structure):</B></FONT><DD><FONT COLOR=black> A summary of the type,
size and composition of a data structure.
</FONT><A NAME="@default710"></A><BR>
<BR>
<DT><FONT COLOR=black><B>singleton:</B></FONT><DD><FONT COLOR=black> A list (or other sequence) with a single element.
</FONT><A NAME="@default711"></A><BR>
<BR>
<DT><FONT COLOR=black><B>tuple:</B></FONT><DD><FONT COLOR=black> An immutable sequence of elements.
</FONT><A NAME="@default712"></A><BR>
<BR>
<DT><FONT COLOR=black><B>tuple assignment:</B></FONT><DD><FONT COLOR=black> An assignment with a sequence on the
right side and a tuple of variables on the left. The right
side is evaluated and then its elements are assigned to the
variables on the left.
</FONT><A NAME="@default713"></A>
<A NAME="@default714"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc135">10.11</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Revise a previous program as follows: Read and 
parse the ``From'' lines and pull out the 
addresses from the line. Count the number of
messages from each person using a dictionary.<BR>
<BR>
After all the data has been read print 
the person with the most commits by creating
a list of (count, email) tuples from the 
dictionary and then sorting the list in reverse
order and print out the person who has the most
commits.
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Sample Line:
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008

Enter a file name: mbox-short.txt
cwen@iupui.edu 5

Enter a file name: mbox.txt
zqian@umich.edu 195
</EM></FONT></PRE></DIV>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
This program counts the distribution of the hour of the day for 
each of the messages. You can pull the hour from the ``From'' 
line by finding the time string and then splitting that string 
into parts using the colon character. Once you have accumulated 
the counts for each hour, print out the counts, one per line, 
sorted by hour as shown below. 
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Sample Execution:
python timeofday.py
Enter a file name: mbox-short.txt
04 3
06 1
07 1
09 2
10 3
11 6
14 1
15 2
16 4
17 2
18 1
19 1
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Write a function called <CODE>most_frequent</CODE> that takes a string and
prints the letters in decreasing order of frequency. Find text
samples from several different languages and see how letter frequency
varies between languages. Compare your results with the tables at
<TT>wikipedia.org/wiki/Letter_frequencies</TT>.</EM></FONT><BR>
<BR>
<A NAME="@default715"></A>
<A NAME="@default716"></A></DIV><BR>
<!--BEGIN NOTES chapter-->
<HR WIDTH="50%" SIZE=1><DL><DT><FONT SIZE=5 COLOR=black><A NAME="note8" HREF="#text8">1</A></FONT><DD><FONT COLOR=black>Fun fact: The word ``tuple'' comes from the names
given to seqences of numbers of varying lengths: single, 
double, triple, quadruple, quituple, sextuple, septuple, etc.
</FONT><DT><FONT SIZE=5 COLOR=black><A NAME="note9" HREF="#text9">2</A></FONT><DD><FONT COLOR=black>Python does not translate the 
syntax literally. For example if you try this with a dictionary
it will not work as might expect.
</FONT><DT><FONT SIZE=5 COLOR=black><A NAME="note10" HREF="#text10">3</A></FONT><DD><FONT COLOR=black>This behavior is slightly different in Python 3.0.
</FONT></DL>
<!--END NOTES-->
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Regular expressions</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc136">Chapter&nbsp;11</A>&nbsp;&nbsp;Regular expressions</FONT></H1><!--SEC END -->

<FONT COLOR=black>So far we have been reading through files, looking for patterns and extracting various bits of lines that we find interesting. We have been using string methods like <TT>split</TT> and <TT>find</TT> and using lists and string slicing to extract portions of the lines.
<A NAME="@default717"></A>
<A NAME="@default718"></A>
<A NAME="@default719"></A><BR>
<BR>
This task of searching and extracting is so common that Python has a very powerful library called <B>regular expressions</B> that handles many of these tasks quite elegantly. The reason we have not introduced regular expressions earlier in the book is because while they are very powerful, they are a little complicated and their syntax takes some getting used to. <BR>
<BR>
Regular expressions are almost their own little programming language for searching and parsing strings. As a matter of fact, entire books have been written on the topic of regular expressions. In this chapter, we will only cover the basics of regular expressions. For more detail on regular expressions, see:<BR>
<BR>
<TT>http://en.wikipedia.org/wiki/Regular_expression</TT><BR>
<BR>
<TT>http://docs.python.org/library/re.html</TT><BR>
<BR>
The regular expression library must be imported into your program before you can use it. The simplest use of the regular expression library is the <TT>search()</TT> function. The following program demonstrates a trivial use of the search function.
</FONT><A NAME="@default720"></A>
<PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('From:', line) :
        print line
</FONT></PRE><FONT COLOR=black>We open the file, loop through each line and use the regular expression <TT>search()</TT> to only print out lines that contain the string ``From:''. This program does not use the real power of regular expressions since we could have just as easily used <TT>line.find()</TT> to accomplish the same result.
<A NAME="@default721"></A><BR>
<BR>
The power of the regular expressions comes when we add to special characters to the search string that allow us to more precisely control which lines match the string. Adding these special characters to our regular expression allow us to do sophisticated matching and extraction while writing very little code.<BR>
<BR>
For example, the caret character is uses in regular 
expressions to match ``the beginning'' of a line.
We could change our application to only match 
lines where ``From:'' was at the beginning of the line as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^From:', line) :
        print line
</FONT></PRE><FONT COLOR=black>Now we will only match lines that <EM>start with</EM> the string ``From:''. This is still a very simple example that we could have done equivalently with the <TT>startswith()</TT> method from the string library. But it serves to introduce the notion that regular expressions contain special action characters that give us more control as to what will match the regular expression.
</FONT><A NAME="@default722"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Character matching in regular expressions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc137">11.1</A>&nbsp;&nbsp;Character matching in regular expressions</FONT></H2><!--SEC END -->

<FONT COLOR=black>There are a number of other special characters that let us build even more powerful regular expressions. The most commonly used special character is the period character which matches any character.
<A NAME="@default723"></A>
<A NAME="@default724"></A><BR>
<BR>
In the following example, the regular expression ``F..m:'' would match any of the strings ``From:'', ``Fxxm:'', ``F12m:'', or ``F!@m:'' since the period characters in the regular expression match any character.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^F..m:', line) :
        print line
</FONT></PRE><FONT COLOR=black>This is particularly powerful when combined with the ability to indicate that a character can be repeated any number of times using the ``*'' or ``+'' characters in your regular expression. These special characters mean that instead of matching a single character in the search string they match zero-or-more in the case of the asterisk or one-or-more of the characters in the case of the plus sign.<BR>
<BR>
We can further narrow down the lines that we match using a repeated <B>wild card</B> character in the following example:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^From:.+@', line) :
        print line
</FONT></PRE><FONT COLOR=black>The search string ``<CODE>^</CODE>From:.+@'' will successfully match lines that start with ``From:'' followed by one or more characters ``.+'' followed by an at-sign. So this will match the following line:
</FONT><PRE><FONT COLOR=blue SIZE=4>
<B> From:</B><U> stephen.marquard</U><B> @</B>uct.ac.za
</FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black>You can think of the ``.+'' wildcard as expanding to match all the characters between the 
colon character and the at-sign. 
</FONT><PRE><FONT COLOR=blue SIZE=4>
<B> From:</B><U>.+</U><B> @</B>
</FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black>It is good to think of the plus and asterisk characters as ``pushy''. For example the following string would match the last at-sign in the string as the ``.+'' pushes outwards as shown below:
</FONT><PRE><FONT COLOR=blue SIZE=4>
<B> From:</B><U> stephen.marquard@uct.ac.za, csev@umich.edu, and cwen</U><B> @</B>iupui.edu
</FONT></PRE><FONT SIZE=4>

</FONT><FONT SIZE=3 COLOR=black>It is possible to tell an asterisk or plus-sign not to be so ``greedy'' by adding 
another character. See the detailed documentation for information on turning off the 
greedy behavior.
</FONT><A NAME="@default725"></A><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Extracting data using regular expressions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc138">11.2</A>&nbsp;&nbsp;Extracting data using regular expressions</FONT></H2><!--SEC END -->

<FONT COLOR=black>If we want to extract data from a string in Python we can use the <TT>findall()</TT> method to extract all of the substrings which match a regular expression. Let's use the example of wanting to extract anything that looks like an e-mail address from any line regardless of format. For example, we want to pull the e-mail addresses from each of the following lines:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
Return-Path: &lt;postmaster@collab.sakaiproject.org&gt;
          for &lt;source@collab.sakaiproject.org&gt;;
Received: (from apache@localhost)
Author: stephen.marquard@uct.ac.za
</FONT></PRE><FONT COLOR=black>We don't want to write code for each of the types of lines, splitting and slicing differently for each line. This following program uses <TT>findall()</TT> to find the lines with e-mail addresses in them and extract one or more addresses from each of those lines.
</FONT><A NAME="@default726"></A>
<A NAME="@default727"></A>
<PRE><FONT SIZE=4 COLOR=blue>
import re
s = 'Hello from csev@umich.edu to cwen@iupui.edu about the meeting @2PM'
lst = re.findall('\S+@\S+', s)
print lst
</FONT></PRE><FONT COLOR=black>The <TT>findall()</TT> method searches the string in the second argument and returns a list of all of the strings that look like e-mail addresses. We are using a two-character sequence 
that matches a non-whitespace character (S). <BR>
<BR>
The output of the program would be:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
['csev@umich.edu', 'cwen@iupui.edu']
</FONT></PRE><FONT COLOR=black>Translating the regular expression, we are looking for substrings that have at least one non-whitespace character, followed by an at-sign, followed by at least one more non-white space characters. Also, the ``S+'' matches as many non-whitespace characters as possible (this is called <B>``greedy''</B> matching in regular expressions). <BR>
<BR>
The regular expression would match twice (csev@umich.edu and cwen@iupui.edu) but it would not match the string ``@2PM'' because there are no non-blank characters <EM>before</EM> the at-sign. 
We can use this regular expression in a program to read all the lines in a file and print out anything that looks like an e-mail address as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('\S+@\S+', line)
    if len(x) &gt; 0 :
        print x
</FONT></PRE><FONT COLOR=black>We read each line and then extract all the substrings that match our regular expression. Since <TT>findall()</TT> returns a list, we simple check if the number of elements in our returned list is more than zero to print only lines where we found at least one substring that looks like an e-mail address.<BR>
<BR>
If we run the program on <TT>mbox.txt</TT> we get the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
['wagnermr@iupui.edu']
['cwen@iupui.edu']
['&lt;postmaster@collab.sakaiproject.org&gt;']
['&lt;200801032122.m03LMFo4005148@nakamura.uits.iupui.edu&gt;']
['&lt;source@collab.sakaiproject.org&gt;;']
['&lt;source@collab.sakaiproject.org&gt;;']
['&lt;source@collab.sakaiproject.org&gt;;']
['apache@localhost)']
['source@collab.sakaiproject.org;']
</FONT></PRE><FONT COLOR=black>Some of our E-mail addresses have incorrect characters like ``<CODE>&lt;</CODE>'' or ``;'' at the beginning or end. Let's declare that we are only interested in the portion of the string that starts and ends with a letter or a number.<BR>
<BR>
To do this, we use another feature of regular expressions. Square brackets are used to indicate a set of multiple acceptable characters we are willing to consider matching. In a sense, the ``S'' is asking to match the set of ``non-whitespace characters''. Now we will be a little more explicit in terms of the characters we will match.<BR>
<BR>
Here is our new regular expression:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
[a-zA-Z0-9]\S*@\S*[a-zA-Z]
</FONT></PRE><FONT COLOR=black>This is getting a little complicated and you can begin to see why regular expressions are their own little language unto themselves. Translating this regular expression, we are looking for substrings that start with a <EM>single</EM> lowercase letter, upper case letter, or number ``[a-zA-Z0-9]'' followed by zero or more non blank characters ``S*'', followed by an at-sign, followed by zero or more non-blank characters ``S*'' followed by an upper or lower case letter. Note that we switched from ``+'' to ``*'' to indicate zero-or-more non-blank characters since ``[a-zA-Z0-9]'' is already one non-blank character. Remember that the ``*'' or ``+'' applies to the single character immediately to the left of the plus or asterisk.
<A NAME="@default728"></A><BR>
<BR>
If we use this expression in our program, our data is much cleaner:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('[a-zA-Z0-9]\S+@\S+[a-zA-Z]', line)
    if len(x) &gt; 0 :
        print x
</FONT></PRE>
<PRE><FONT SIZE=4 COLOR=blue>
…
['wagnermr@iupui.edu']
['cwen@iupui.edu']
['postmaster@collab.sakaiproject.org']
['200801032122.m03LMFo4005148@nakamura.uits.iupui.edu']
['source@collab.sakaiproject.org']
['source@collab.sakaiproject.org']
['source@collab.sakaiproject.org']
['apache@localhost']
</FONT></PRE><FONT COLOR=black>Notice that on the ``source@collab.sakaiproject.org'' lines, our regular expression eliminated two letters at the end of the string (``<CODE>&gt;</CODE>;''). This is because when we append ``[a-zA-Z]'' to the end of our regular expression, we are demanding that whatever string the regular expression parser finds, it must end with a letter. So when it sees the ``<CODE>&gt;</CODE>'' after ``sakaiproject.org<CODE>&gt;</CODE>;'' it simply stops at the last ``matching'' letter it found (i.e. the ``g'' was the last good match).<BR>
<BR>
Also note that the output of the program is a Python list that has a string as the single element in the list.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Combining searching and extracting</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc139">11.3</A>&nbsp;&nbsp;Combining searching and extracting</FONT></H2><!--SEC END -->

<FONT COLOR=black>If we want to find numbers on lines that start with the string ``X-'' such as:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
X-DSPAM-Confidence: 0.8475
X-DSPAM-Probability: 0.0000  
</FONT></PRE><FONT COLOR=black>We don't just want any floating point numbers from any lines. We only to extract numbers from lines that have the above syntax.<BR>
<BR>
We can construct the following regular expression to select the lines:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
^X-.*: [0-9.]+
</FONT></PRE><FONT COLOR=black>Translating this, we are saying, we want lines that start with ``X-'' followed by zero or more characters ``.*'' followed by a colon (``:'') and then a space. After the space we are looking for one or more characters that are either a digit (0-9) or a period ``[0-9.]+''. Note that in between the square braces, the period matches an actual period (i.e. it is not a wildcard between the square brackets).<BR>
<BR>
This is a very tight expression that will pretty much match only the lines we are interested in as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    if re.search('^X\S*: [0-9.]+', line) :
        print line
</FONT></PRE><FONT COLOR=black>When we run the program, we see the data nicely filtered to show 
only the lines we are looking for.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
X-DSPAM-Confidence: 0.8475
X-DSPAM-Probability: 0.0000
X-DSPAM-Confidence: 0.6178
X-DSPAM-Probability: 0.0000
</FONT></PRE><FONT COLOR=black>But now we have to solve the problem of extracting the numbers using <TT>split</TT>. While it would be simple enough to use <TT>split</TT>, we can use another feature of regular expressions to both search and parse the line at the same time.
<A NAME="@default729"></A><BR>
<BR>
Parentheses are another special character in regular expressions. When you add parentheses to a regular expression they are ignored when matching the string, but when you are using <TT>findall()</TT>, parentheses indicate that while you want the whole expression to match, you only are interested in extracting a portion of the substring that matches the regular expression. 
<A NAME="@default730"></A>
<A NAME="@default731"></A><BR>
<BR>
So we make the following change to our program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('^X\S*: ([0-9.]+)', line)
    if len(x) &gt; 0 :
        print x
</FONT></PRE><FONT COLOR=black>Instead of calling <TT>search()</TT>, we add parentheses around the part of the regular expression that represents the floating point number to indicate we only want <TT>findall()</TT> to give us back the floating point number portion of the matching string.<BR>
<BR>
The output from this program is as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
['0.8475']
['0.0000']
['0.6178']
['0.0000']
['0.6961']
['0.0000']
..
</FONT></PRE><FONT COLOR=black>The numbers are still in a list and need to be converted from strings to floating point but we have used the power of regular expressions to both search and extract the information we found interesting.<BR>
<BR>
As another example of this technique, if 
you look at the file there are a number of lines of the form:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772
</FONT></PRE><FONT COLOR=black>If we wanted to extract all of the revision numbers (the integer number at the end of these lines) using the same technique as above, we could write the following program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('^Details:.*rev=([0-9.]+)', line)
    if len(x) &gt; 0:
        print x
</FONT></PRE><FONT COLOR=black>Translating our regular expression, we are looking for lines that start with ``Details:', followed by any any number of characters ``.*'' followed by ``rev='' and then by one or more digits. We want lines that match the entire expression but we only want to extract the integer number at the end of the line so we surround ``[0-9]+'' with parentheses. <BR>
<BR>
When we run the program, we get the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
['39772']
['39771']
['39770']
['39769']
...
</FONT></PRE><FONT COLOR=black>Remember that the ``[0-9]+'' is ``greedy'' and it tries to make as large a string of digits as possible before extracting those digits. This ``greedy'' behavior is why we get all five digits for each number. The regular expression library expands in both directions until it counters a non-digit, the beginning, or the end of a line.<BR>
<BR>
Now we can use regular expressions to re-do an exercise from earlier in the book where we were interested in the time of day of each mail message. We looked for lines of the form:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008
</FONT></PRE><FONT COLOR=black>And wanted to extract the hour of the day for each line. Previously we did this with two calls to <TT>split</TT>. First the line was split into words and then we pulled out the fifth word and split it again on the colon character to pull out the two characters we were interested in.<BR>
<BR>
While this worked, it actually results in pretty brittle code that is assuming the lines are nicely formatted. If you were to add enough error checking (or a big try/except block) to insure that your program never failed when presented with incorrectly formatted lines, the code would balloon to 10-15 lines of code that was pretty hard to read.<BR>
<BR>
We can do this far simpler with the following regular expression:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
^From .* [0-9][0-9]:
</FONT></PRE><FONT COLOR=black>The translation of this regular expression is that we are looking for lines that start with ``From '' (note the space) followed by any number of characters ``.*'' followed by a space followed by two digits ``[0-9][0-9]'' followed by a colon character. This is the definition of the kinds of lines we are looking for. <BR>
<BR>
In order to pull out only the hour using <TT>findall()</TT>, we add parentheses around the two digits as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
^From .* ([0-9][0-9]):
</FONT></PRE><FONT COLOR=black>This results in the following program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
hand = open('mbox-short.txt')
for line in hand:
    line = line.rstrip()
    x = re.findall('^From .* ([0-9][0-9]):', line)
    if len(x) &gt; 0 : print x
</FONT></PRE><FONT COLOR=black>When the program runs, it produces the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
['09']
['18']
['16']
['15']
…
</FONT></PRE><!--TOC section <FONT COLOR=black><FONT SIZE=3>Escape character</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc140">11.4</A>&nbsp;&nbsp;Escape character</FONT></H2><!--SEC END -->

<FONT COLOR=black>Since we use special characters in regular expressions to match the beginning or end of 
a line or specify wild cards, we need a way to indicate that these characters are ``normal'' 
and we want to match the actual character such as a dollar-sign or caret.<BR>
<BR>
We can indicate that we want to simply match a character by prefixing that character 
with a backslash. For example, we can find money amounts with the following regular
expression.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import re
x = 'We just received $10.00 for cookies.'
y = re.findall('\$[0-9.]+',x)
</FONT></PRE><FONT COLOR=black>Since we prefix the dollar-sign with a backslash, it actually matches the dollar-sign
in the input string instead of matching the ``end of line'' and the rest of the regular
expression matches one or more digits or the period character. <EM>Note:</EM> In between 
square brackets, characters are not ``special''. So when we say ``[0-9.]'', it really 
means digits or a period. Outside of square brackets, a period is the ``wild-card'' 
character and matches any character. In between square brackets, the period is a period.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Summary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc141">11.5</A>&nbsp;&nbsp;Summary</FONT></H2><!--SEC END -->

<FONT COLOR=black>While this only scratched the surface of regular expressions, we have learned a bit about the language of regular expressions. They are search strings that have special characters in them that communicate your wishes to the regular expression system as to what defines ``matching'' and what is extracted from the matched strings. Here are some of those special characters and character sequences:<BR>
<BR>
<CODE>^</CODE> <BR>
Matches the beginning of the line.<BR>
<BR>
$ <BR>
Matches the end of the line.<BR>
<BR>
. <BR>
Matches any character (a wildcard).<BR>
<BR>
s <BR>
Matches a whitespace character.<BR>
<BR>
S <BR>
Matches a non-whitespace character (opposite of s).<BR>
<BR>
* <BR>
Applies to the immediately preceding character and indicates to match zero or more of the preceding character.<BR>
<BR>
*? <BR>
Applies to the immediately preceding character and indicates to match zero or more of the preceding character in ``non-greedy mode''.<BR>
<BR>
+ <BR>
Applies to the immediately preceding character and indicates to match zero or more of the preceding character.<BR>
<BR>
+? <BR>
Applies to the immediately preceding character and indicates to match zero or more of the preceding character in ``non-greedy mode''.<BR>
<BR>
[aeiou] <BR>
Matches a single character as long as that character is in the specified set. In this example, it would match ``a'', ``e'', ``i'', ``o'' or ``u'' but no other characters.<BR>
<BR>
[a-z0-9] <BR>
You can specify ranges of characters using the minus sign. This example is a single character that must be a lower case letter or a digit.<BR>
<BR>
[<CODE>^</CODE>A-Za-z] <BR>
When the first character in the set notation is a caret, it inverts the logic. This example matches a single character that is anything <EM>other than</EM> an upper or lower case character.<BR>
<BR>
( ) <BR>
When parentheses are added to a regular expression, they are ignored for the purpose of matching, but allow you to extract a particular subset of the matched string rather than the whole string when using <TT>findall()</TT>.<BR>
<BR>
b <BR>
Matches the empty string, but only at the start or end of a word.<BR>
<BR>
B <BR>
Matches the empty string, but not at the start or end of a word.<BR>
<BR>
d <BR>
Matches any decimal digit; equivalent to the set [0-9].<BR>
<BR>
D <BR>
Matches any non-digit character; equivalent to the set [<CODE>^</CODE>0-9].</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Bonus section for UNIX users</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc142">11.6</A>&nbsp;&nbsp;Bonus section for UNIX users</FONT></H2><!--SEC END -->

<FONT COLOR=black>Support for searching files using regular expressions was built into the UNIX operating system 
since the 1960's and it is available in nearly all programming languages in one form or another.<BR>
<BR>
As a matter of fact, there is a command-line program built into UNIX 
called <B>grep</B> (Generalized Regular Expression Parser) that does pretty much 
the same as the <TT>search()</TT> examples in this chapter. So if you have a 
Macintosh or Linux system, you can try the following commands in your command line window.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
$ grep '^From:' mbox-short.txt
From: stephen.marquard@uct.ac.za
From: louis@media.berkeley.edu
From: zqian@umich.edu
From: rjlowe@iupui.edu
</FONT></PRE><FONT COLOR=black>This tells <TT>grep</TT> to show you lines that start with the string ``From:'' in the file <TT>mbox-short.txt</TT>. If you experiment with the <TT>grep</TT> command a bit and read the documentation for <TT>grep</TT>, you will find some subtle differences between the regular expression support in Python and the regular expression support in <TT>grep</TT>. As an example, <TT>grep</TT> does not support the non-blank character ``S'' so you will need to use the slightly more complex set notation ``[<CODE>^</CODE> ]''- which simply means - match a character that is anything other than a space.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc143">11.7</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<FONT COLOR=black>Python has some simple and rudimentary built-in documentation that can be quite helpful if you need a quick refresher to trigger your memory about the exact name of a particular method. This documentation can be viewed in the Python interpreter in interactive mode.<BR>
<BR>
You can bring up an interactive help system using <TT>help()</TT>.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; help()

Welcome to Python 2.6!  This is the online help utility.

If this is your first time using Python, you should definitely check out
the tutorial on the Internet at http://docs.python.org/tutorial/.

Enter the name of any module, keyword, or topic to get help on writing
Python programs and using Python modules.  To quit this help utility and
return to the interpreter, just type "quit".

To get a list of available modules, keywords, or topics, type "modules",
"keywords", or "topics".  Each module also comes with a one-line summary
of what it does; to list the modules whose summaries contain a given word
such as "spam", type "modules spam".

help&gt; modules
</FONT></PRE><FONT COLOR=black>If you know what module you want to use, you can use the <TT>dir()</TT> command to find the methods in the module as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; import re
&gt;&gt;&gt; dir(re)
[.. 'compile', 'copy_reg', 'error', 'escape', 'findall', 
'finditer', 'match', 'purge', 'search', 'split', 'sre_compile', 
'sre_parse', 'sub', 'subn', 'sys', 'template']
</FONT></PRE><FONT COLOR=black>You can also get a small amount of documentation on a particular method using the dir command.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; help (re.search)
Help on function search in module re:

search(pattern, string, flags=0)
    Scan through string looking for a match to the pattern, returning
    a match object, or None if no match was found.
&gt;&gt;&gt; 
</FONT></PRE><FONT COLOR=black>The built in documentation is not very extensive, but it can be helpful when you are in a hurry
or don't have access to a web browser or search engine.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc144">11.8</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>brittle code:</B></FONT><DD><FONT COLOR=black>
Code that works when the input data is in a particular format but prone to breakage
if there is some deviation from the correct format. We call this ``brittle code'' 
because it is easily broken.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>greedy matching:</B></FONT><DD><FONT COLOR=black>
The notion that the ``+'' and ``*'' characters in a regular expression expand outward to match the largest possible string.
</FONT><A NAME="@default732"></A>
<A NAME="@default733"></A><BR>
<BR>
<DT><FONT COLOR=black><B>grep:</B></FONT><DD><FONT COLOR=black>
A command available in most UNIX systems that searches through text files looking for lines that match regular expressions. The command name stands for "Generalized Regular Expression Parser".
</FONT><A NAME="@default734"></A><BR>
<BR>
<DT><FONT COLOR=black><B>regular expression:</B></FONT><DD><FONT COLOR=black>
A language for expressing more complex search strings. A regular expression may contain special characters that indicate that a search only matches at the beginning or end of a line or many other similar capabilities.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>wild card:</B></FONT><DD><FONT COLOR=black>
A special character that matches any character. In regular expressions the wild card character is the period character.
</FONT><A NAME="@default735"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc145">11.9</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Write a simple program to simulate the operation of the the <TT>grep</TT> command 
on UNIX. Ask the user to enter a regular expression and count the number
of lines that matched the regular expression:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
$ python grep.py
Enter a regular expression: ^Author
mbox.txt had 1798 lines that matched ^Author

$ python grep.py
Enter a regular expression: ^X-
mbox.txt had 14368 lines that matched ^X-

$ python grep.py
Enter a regular expression: java$
mbox.txt had 4218 lines that matched java$
</EM></FONT></PRE></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Write a program to look for lines of the form<BR>
<BR>
<CODE>New Revision: 39772</CODE><BR>
<BR>
And extract the number from each of the lines using a regular expression
and the <TT>findall()</TT> method. Compute the average of the numbers and 
print out the average.
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Enter file:mbox.txt 
38549.7949721

Enter file:mbox-short.txt
39756.9259259
</EM></FONT></PRE></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Networked programs</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc146">Chapter&nbsp;12</A>&nbsp;&nbsp;Networked programs</FONT></H1><!--SEC END -->

<FONT COLOR=black>While many of the examples in this book have focused on reading
files and looking for data in those files, there are many different
sources of information when one considers the Internet.<BR>
<BR>
In this chapter we will pretend to be a web browser and retrieve web
pages using the HyperText Transport Protocol (HTTP). Then we will read
through the web page data and parse it.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>HyperText Transport Protocol - HTTP</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc147">12.1</A>&nbsp;&nbsp;HyperText Transport Protocol - HTTP</FONT></H2><!--SEC END -->

<FONT COLOR=black>The network protocol that powers the web is actually quite simple and 
there is built-in support in Python called <TT>sockets</TT> which makes it very 
easy to make network connections and retrieve data over those
sockets in a Python program.<BR>
<BR>
A <B>socket</B> is much like a file, except that it 
provides a two-way connection between two 
programs with a single socket. 
You can both read from and write to the same socket. If you write something to 
a socket it is sent to the application at the other end of the socket. If you 
read from the socket, you are given the data which the other application has sent.<BR>
<BR>
But if you try to read a socket when the program on the other end of the socket
has not sent any data - you just sit and wait. If the programs on both ends
of the socket simply wait for some data without sending anything, they will wait for
a very long time.<BR>
<BR>
So an important part of programs that communicate over the Internet is to have some
sort of protocol. A protocol is a set of precise rules that determine who
is to go first, what they are to do, and then what are the responses to that message,
and who sends next and so on. In a sense the two applications at either end 
of the socket are doing a dance and making sure not to step on each other's toes.<BR>
<BR>
There are many documents which describe these network protocols. The HyperText Transport 
Protocol is described in the following document:<BR>
<BR>
<TT>http://www.w3.org/Protocols/rfc2616/rfc2616.txt</TT><BR>
<BR>
This is a long and complex 176 page document with a lot of detail. If you 
find it interesting feel free to read it all. But if you take a look around page 36 of
RFC2616 you will find the syntax for the GET request. If you read in detail, you will
find that to request a document from a web server, we make a connection to 
the <TT>www.py4inf.com</TT> server on port 80, and then send a line of the form:<BR>
<BR>
<TT>GET http://www.py4inf.com/code/romeo.txt HTTP/1.0 </TT><BR>
<BR>
Where the second parameter is the web page we are requesting and then 
we also send a blank line. The web server will respond with some 
header information about the document and a blank line
followed by the document content.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>The World's Simplest Web Browser</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc148">12.2</A>&nbsp;&nbsp;The World's Simplest Web Browser</FONT></H2><!--SEC END -->

<FONT COLOR=black>Perhaps the easiest way to show how the HTTP protocol works is to write a very 
simple Python program that makes a connection to a web server and following
the rules of the HTTP protocol, requests a document 
and displays what the server sends back.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import socket

mysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
mysock.connect(('www.py4inf.com', 80))
mysock.send('GET http://www.py4inf.com/code/romeo.txt HTTP/1.0\n\n')

while True:
    data = mysock.recv(512)
    if ( len(data) &lt; 1 ) :
        break
    print data

mysock.close()
</FONT></PRE><FONT COLOR=black>First the program makes a connection to port 80 on 
the server <TT>www.py4inf.com</TT>.
Since our program is playing the role of the ``web browser'' the HTTP
protocol says we must send the GET command followed by a blank line.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook013.png"></FONT></DIV><FONT COLOR=black>
<BR>
Once we send that blank line, we write a loop that receives data 
in 512 character chunks from the socket and prints the data out 
until there is no more data to read (i.e. the recv() returns 
an empty string).<BR>
<BR>
The program produces the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
HTTP/1.1 200 OK
Date: Sun, 14 Mar 2010 23:52:41 GMT
Server: Apache
Last-Modified: Tue, 29 Dec 2009 01:31:22 GMT
ETag: "143c1b33-a7-4b395bea"
Accept-Ranges: bytes
Content-Length: 167
Connection: close
Content-Type: text/plain

But soft what light through yonder window breaks
It is the east and Juliet is the sun
Arise fair sun and kill the envious moon
Who is already sick and pale with grief
</FONT></PRE><FONT COLOR=black>The output starts with headers which the web server sends
to describe the document.
For example, the <TT>Content-Type </TT> header indicated that
the document is a plain text document (<TT>text/plain</TT>).<BR>
<BR>
After the server sends us the headers, it adds a blank line
to indicate the end of the headers and then sends the actual
data of the file <TT>romeo.txt</TT>.<BR>
<BR>
This example shows how to make a low-level network connection
with sockets. Sockets can be used to communicate with a web
server or with a mail server or many other kinds of servers.
All that is needed is to find the document which describes
the protocol and write the code to send and receive the data
according to the protocol.<BR>
<BR>
However, since the protocol that we use most commonly is
the HTTP (i.e. the web) protocol, Python has a special 
library specifically designed to support the HTTP protocol 
for the retrieval of
documents and data over the web.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Retrieving web pages with <TT>urllib</TT></FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc149">12.3</A>&nbsp;&nbsp;Retrieving web pages with <TT>urllib</TT></FONT></H2><!--SEC END -->

<FONT COLOR=black>The <TT>urllib</TT> library makes it very easy to retrieve
web pages and process the data in Python. Using <TT>urllib</TT>
you can treat a web page much like a file. You simply
indicate which web page you would like to retrieve and
<TT>urllib</TT> handles all of the HTTP protocol details.<BR>
<BR>
The equivalent code to read the <TT>romeo.txt</TT> file
from the web using <TT>urllib</TT> is as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import urllib

fhand = urllib.urlopen('http://www.py4inf.com/code/romeo.txt')
for line in fhand:
   print line.strip()
</FONT></PRE><FONT COLOR=black>Once the web page has been opened with 
<TT>urllib.urlopen</TT> we can treat it like 
a file and read through it using a 
<TT>for</TT> loop. <BR>
<BR>
When the program runs, we only see the output
of the contents of the file. The headers
are still sent, but the <TT>urllib</TT> code
consumes the headers and only returns the 
data to us.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
But soft what light through yonder window breaks
It is the east and Juliet is the sun
Arise fair sun and kill the envious moon
Who is already sick and pale with grief
</FONT></PRE>
<FONT COLOR=black>As an example, we can write 
a program to retrieve the data for
<TT>romeo.txt</TT> and compute the frequency
of each word in the file as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import urllib

counts = dict()
fhand = urllib.urlopen('http://www.py4inf.com/code/romeo.txt')
for line in fhand:
    words = line.split()
    for word in words:
        counts[word] = counts.get(word,0) + 1   
print counts
</FONT></PRE><FONT COLOR=black>Again, once we have opened the web page, 
we can read it like a local file.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Parsing HTML and scraping the web</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc150">12.4</A>&nbsp;&nbsp;Parsing HTML and scraping the web</FONT></H2><!--SEC END -->

<A NAME="@default736"></A>
<A NAME="@default737"></A>
<FONT COLOR=black>One of the common uses of the <TT>urllib</TT> capability in Python is 
to <B>scrape</B> the web. Web scraping is when we write a program
that pretends to be a web browser and retrieves pages and then 
examines the data in those pages looking for patterns.<BR>
<BR>
As an example, a search engine such as Google will look at the source 
of one web page and extract the links to other pages and retrieve
those pages, extracting links, and so on. Using this technique,
Google <B>spiders</B> its way through nearly all of the pages on 
the web. <BR>
<BR>
Google also uses the frequency of links from pages it finds 
to a particular page as one measure of how ``important'' 
a page is and how highly the page should appear in its search results.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Parsing HTML using Regular Expressions</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc151">12.5</A>&nbsp;&nbsp;Parsing HTML using Regular Expressions</FONT></H2><!--SEC END -->

<FONT COLOR=black>One simple way to parse HTML is to use regular expressions to repeatedly
search and extract for substrings that match a particular pattern.<BR>
<BR>
Here is a simple web page:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&lt;h1&gt;The First Page&lt;/h1&gt;
&lt;p&gt;
If you like, you can switch to the
&lt;a href="http://www.dr-chuck.com/page2.htm"&gt;
Second Page&lt;/a&gt;.
&lt;/p&gt;
</FONT></PRE><FONT COLOR=black>We can construct a well-formed regular expression to match
and extract the link values from the above text as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
href="http://.+?"
</FONT></PRE><FONT COLOR=black>Our regular expression looks for strings that start with
``href="http://'' followed by one or more characters
``.+?'' followed by another double quote. The question mark 
added to the ``.+?'' indicates that the match is to be done
in a ``non-greedy'' fashion instead of a ``greedy'' fashion. 
A non-greedy match tries to find the <EM>smallest</EM> possible matching
string and a greedy match tries to find the <EM>largest</EM> possible
matching string.
<A NAME="@default738"></A>
<A NAME="@default739"></A><BR>
<BR>
We need to add parentheses to our regular expression to indicate
which part of our matched string we would like to extract and
produce the following program:
</FONT><A NAME="@default740"></A>
<A NAME="@default741"></A>
<PRE><FONT SIZE=4 COLOR=blue>
import urllib
import re

url = raw_input('Enter - ')
html = urllib.urlopen(url).read()
links = re.findall('href="(http://.*?)"', html)
for link in links:
    print link
</FONT></PRE><FONT COLOR=black>The <TT>findall</TT> regular expression method will give us a list of all
of the strings that match our regular expression, returning only
the link text between the double quotes.<BR>
<BR>
When we run the program, we get the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python urlregex.py 
Enter - http://www.dr-chuck.com/page1.htm
http://www.dr-chuck.com/page2.htm

python urlregex.py 
Enter - http://www.py4inf.com/book.htm
http://www.greenteapress.com/thinkpython/thinkpython.html
http://allendowney.com/
http://www.py4inf.com/code
http://www.lib.umich.edu/espresso-book-machine
http://www.py4inf.com/py4inf-slides.zip
</FONT></PRE><FONT COLOR=black>Regular expressions work very nice when your HTML is well-formatted
and predictable. But since there is a lot of ``broken'' HTML pages
out there, you might find that a solution only using 
regular expressions might either miss some valid links or end up 
with bad data.<BR>
<BR>
This can be solved by using a robust HTML parsing library.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Parsing HTML using BeautifulSoup</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc152">12.6</A>&nbsp;&nbsp;Parsing HTML using BeautifulSoup</FONT></H2><!--SEC END -->

<A NAME="@default742"></A>
<FONT COLOR=black>There are a number of Python libraries which can help you parse
HTML and extract data from the pages. Each of the libraries
has its strengths and weaknesses and you can pick one based on 
your needs.<BR>
<BR>
As an example, we will simply parse some HTML input 
and extract links using the <B>BeautifulSoup</B> library. 
You can download and install the BeautifulSoup code
from:<BR>
<BR>
<TT>www.crummy.com</TT><BR>
<BR>
You can download and ``install'' BeautifulSoup or you 
can simply place the <TT>BeautifulSoup.py</TT> file in the
same folder as your application.<BR>
<BR>
Even though HTML looks like XML and some pages are carefully 
constructed to be XML, most HTML is generally broken in ways
that cause an XML parser to reject the entire page of HTML as
improperly formed. BeautifulSoup tolerates highly flawed 
HTML and still lets you easily extract the data you need.<BR>
<BR>
We will use <TT>urllib</TT> to read the page and then use
<TT>BeautifulSoup</TT> to extract the <TT>href</TT> attributes from the
anchor (<TT>a</TT>) tags.
</FONT><A NAME="@default743"></A>
<A NAME="@default744"></A>
<A NAME="@default745"></A>
<PRE><FONT SIZE=4 COLOR=blue>
import urllib
from BeautifulSoup import *

url = raw_input('Enter - ')
html = urllib.urlopen(url).read()
soup = BeautifulSoup(html)

# Retrieve all of the anchor tags
tags = soup('a')
for tag in tags:
   print tag.get('href', None)
</FONT></PRE><FONT COLOR=black>The program prompts for a web address, then opens the web
page, reads the data and passes the data to the BeautifulSoup
parser, and then retrieves all of the anchor tags and prints
out the <TT>href</TT> attribute for each tag.<BR>
<BR>
When the program runs it looks as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python urllinks.py 
Enter - http://www.dr-chuck.com/page1.htm
http://www.dr-chuck.com/page2.htm

python urllinks.py 
Enter - http://www.py4inf.com/book.htm
http://www.greenteapress.com/thinkpython/thinkpython.html
http://allendowney.com/
http://www.si502.com/
http://www.lib.umich.edu/espresso-book-machine
http://www.py4inf.com/code
http://www.pythonlearn.com/
</FONT></PRE><FONT COLOR=black>You can use BeautifulSoup to pull out various parts of each 
tag as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import urllib
from BeautifulSoup import *

url = raw_input('Enter - ')
html = urllib.urlopen(url).read()
soup = BeautifulSoup(html)

# Retrieve all of the anchor tags
tags = soup('a')
for tag in tags:
   # Look at the parts of a tag
   print 'TAG:',tag
   print 'URL:',tag.get('href', None)
   print 'Content:',tag.contents[0]
   print 'Attrs:',tag.attrs
</FONT></PRE><FONT COLOR=black>This produces the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python urllink2.py 
Enter - http://www.dr-chuck.com/page1.htm
TAG: &lt;a href="http://www.dr-chuck.com/page2.htm"&gt;
Second Page&lt;/a&gt;
URL: http://www.dr-chuck.com/page2.htm
Content: [u'\nSecond Page']
Attrs: [(u'href', u'http://www.dr-chuck.com/page2.htm')]
</FONT></PRE><FONT COLOR=black>These examples only begin to show the power of BeautifulSoup
when it comes to parsing HTML. See the documentation 
and samples at
<TT>www.crummy.com</TT>
for more detail.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Reading binary files using urllib</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc153">12.7</A>&nbsp;&nbsp;Reading binary files using urllib</FONT></H2><!--SEC END -->

<FONT COLOR=black>Sometimes you want to retrieve a non-text (or binary) file such as
an image or video file. The data in these files is generally not 
useful to print out but you can easily make a copy of a URL to a local
file on your hard disk using <TT>urllib</TT>.
<A NAME="@default746"></A><BR>
<BR>
The pattern is to open the URL and use <TT>read</TT> to download the entire
contents of the document into a string variable (<TT>img</TT>) and then write that
information to a local file as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
img = urllib.urlopen('http://www.py4inf.com/cover.jpg').read()
fhand = open('cover.jpg', 'w')
fhand.write(img)
fhand.close()
</FONT></PRE><FONT COLOR=black>This program reads all of the data in at once across the network and 
stores it in the variable <TT>img</TT> in the main memory of your computer
and then opens the file <TT>cover.jpg</TT> and writes the data out to your 
disk. This will work if the size of the file is less than the size
of the memory of your computer.<BR>
<BR>
However if this is a large audio or video file, this program may crash
or at least run extremely slowly when your computer runs out of memory.
In order to avoid running out of memory, we retrieve the data in blocks
(or buffers) and then write each block to your disk before retrieving
the next block. This way the program can read any sized file without
using up all of the memory you have in your computer.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import urllib

img = urllib.urlopen('http://www.py4inf.com/cover.jpg')
fhand = open('cover.jpg', 'w')
size = 0
while True:
    info = img.read(100000)
    if len(info) &lt; 1 : break
    size = size + len(info)
    fhand.write(info)

print size,'characters copied.'
fhand.close()
</FONT></PRE><FONT COLOR=black>In this example, we read only 100,000 characters at a time and then 
write those characters to the <TT>cover.jpg</TT> file
before retrieving the next 100,000 characters of data from the
web.<BR>
<BR>
This program runs as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python curl2.py 
568248 characters copied.
</FONT></PRE>
<FONT COLOR=black>If you have a Unix or Macintosh computer, you probably have a command
built into your operating system that performs this operation
as follows:
</FONT><A NAME="@default747"></A>
<PRE><FONT SIZE=4 COLOR=blue>
curl -O http://www.py4inf.com/cover.jpg
</FONT></PRE><FONT COLOR=black>The command <TT>curl</TT> is short for ``copy URL'' and so these two 
examples are cleverly named <TT>curl1.py</TT> and <TT>curl2.py</TT> on 
<TT>www.py4inf.com/code</TT> as they implement similar functionality
to the <TT>curl</TT> command. There is also a <TT>curl3.py</TT> sample 
program that does this task a little more effectively in case you
actually want to use this pattern in a program you are writing.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc154">12.8</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>BeautifulSoup:</B></FONT><DD><FONT COLOR=black> A Python library for parsing HTML documents
and extracting data from HTML documents
that compensates for most of the imperfections in the HTML that browsers
generally ignore.
You can download the BeautifulSoup code
from 
<TT>www.crummy.com</TT>.
</FONT><A NAME="@default748"></A><BR>
<BR>
<DT><FONT COLOR=black><B>port:</B></FONT><DD><FONT COLOR=black> A number that generally indicates which application 
you are contacting when you make a socket connection to a server.
As an example, web traffic usually uses port 80 while e-mail 
traffic uses port 25.
</FONT><A NAME="@default749"></A><BR>
<BR>
<DT><FONT COLOR=black><B>scrape:</B></FONT><DD><FONT COLOR=black> When a program pretends to be a web browser and
retrieves a web page and then looks at the web page content. 
Often programs are following the links in one page to find the next
page so they can traverse a network of pages or a social network.
</FONT><A NAME="@default750"></A><BR>
<BR>
<DT><FONT COLOR=black><B>socket:</B></FONT><DD><FONT COLOR=black> A network connection between two applications
where the applications can send and receive data in either direction.
</FONT><A NAME="@default751"></A><BR>
<BR>
<DT><FONT COLOR=black><B>spider:</B></FONT><DD><FONT COLOR=black> The act of a web search engine retrieving a page and
then all the pages linked from a page and so on until they have 
nearly all of the pages on the Internet which they 
use to build their search index.
</FONT><A NAME="@default752"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc155">12.9</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Change the socket program <TT>socket1.py</TT> to prompt the user for 
the URL so it can read any web page. 
You can use <TT>split('/')</TT> to break the URL into its component parts
so you can extract the host name for the socket <TT>connect</TT> call.
Add error checking using <TT>try</TT> and <TT>except</TT> to handle the condition where the 
user enters an improperly formatted or non-existent URL. 
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;2</B>&nbsp;&nbsp;<EM>
Change your socket program so that it counts the number of characters it has received 
and stops displaying any text after it has shown 3000 characters. The program 
should retrieve the entire document and count the total number of characters 
and display the count of the number of characters at the end of the document.
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;3</B>&nbsp;&nbsp;<EM>
Use <TT>urllib</TT> to replicate the previous exercise of (1) retrieving the document
from a URL, (2) displaying up to 3000 characters, and (3) counting the overall number
of characters in the document. Don't worry about the headers for this exercise, simply
show the first 3000 characters of the document contents.
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;4</B>&nbsp;&nbsp;<EM>
Change the <TT>urllinks.py</TT> program to extract and count 
paragraph (p) tags from the retrieved HTML document and 
display the count of the paragraphs as the 
output of your program. 
Do not display the paragraph text - only count them.
Test your program on several small web pages
as well as some larger web pages.
</EM></FONT></DIV><BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;5</B>&nbsp;&nbsp;<EM>
(Advanced) Change the socket program so that it only shows data after the 
headers and a blank line have been received. Remember that <TT>recv</TT> is
receiving characters (newlines and all) - not lines.
</EM></FONT></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Using Web Services</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc156">Chapter&nbsp;13</A>&nbsp;&nbsp;Using Web Services</FONT></H1><!--SEC END -->

<FONT COLOR=black>Once it became easy to retrieve documents and parse documents 
over HTTP using programs, it did not take long to develop 
an approach where we started producing documents that were specifically
designed to be consumed by other 
programs (i.e. not HTML to be displayed in a browser).<BR>
<BR>
The most common approach when two programs are exchanging data across 
the web is to exchange the data in a format called the ``eXtensible Markup 
Language'' or XML. </FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>eXtensible Markup Language - XML</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc157">13.1</A>&nbsp;&nbsp;eXtensible Markup Language - XML</FONT></H2><!--SEC END -->

<FONT COLOR=black>XML looks very similar to HTML, but XML is more structured 
than HTML. Here is a sample of an XML document:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&lt;person&gt;
  &lt;name&gt;Chuck&lt;/name&gt;
  &lt;phone type="intl"&gt;
     +1 734 303 4456
   &lt;/phone&gt;
   &lt;email hide="yes"/&gt;
&lt;/person&gt;
</FONT></PRE><FONT COLOR=black>Often it is helpful to think of an XML document as a tree structure
where there is a top tag <TT>person</TT> and other tags such as <TT>phone</TT>
are drawn as <EM>children</EM> of their parent nodes.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook014.png"></FONT></DIV>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Parsing XML</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc158">13.2</A>&nbsp;&nbsp;Parsing XML</FONT></H2><!--SEC END -->

<A NAME="@default753"></A>
<A NAME="@default754"></A>
<A NAME="@default755"></A><FONT COLOR=black>
Here is a simple application that parses some XML
and extracts some data elements from the XML:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import xml.etree.ElementTree as ET

data = '''
&lt;person&gt;
  &lt;name&gt;Chuck&lt;/name&gt;
  &lt;phone type="intl"&gt;
     +1 734 303 4456
   &lt;/phone&gt;
   &lt;email hide="yes"/&gt;
&lt;/person&gt;'''

tree = ET.fromstring(data)
print 'Name:',tree.find('name').text
print 'Attr:',tree.find('email').get('hide')
</FONT></PRE><FONT COLOR=black>Calling <TT>fromstring</TT> converts the string representation
of the XML into a 'tree' of XML nodes. When the
XML is in a tree, we have a series of methods which we can call to 
extract portions of data from the XML. <BR>
<BR>
The <TT>find</TT> function searches through the 
XML tree and retrieves a <B>node</B> that matches the specified tag.
Each node can have some text, some attributes (i.e. like hide) and
some ``child'' nodes. Each node can be the top of a tree of nodes.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Name: Chuck
Attr: yes
</FONT></PRE><FONT COLOR=black>Using an XML parser such as <TT>ElementTree</TT> has the advantage
that while the XML in this example is quite simple, it turns
out there are many rules regarding valid XML and using 
<TT>ElementTree</TT> allows us to extract data from XML without 
worrying about the rules of XML syntax.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Looping through nodes</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc159">13.3</A>&nbsp;&nbsp;Looping through nodes</FONT></H2><!--SEC END -->

<A NAME="@default756"></A>
<A NAME="@default757"></A><FONT COLOR=black>
Often the XML has multiple nodes and we need to write a loop
to process all of the nodes. In the following program, 
we loop through all of the <TT>user</TT> nodes:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import xml.etree.ElementTree as ET

input = '''
&lt;stuff&gt;
    &lt;users&gt;
        &lt;user x="2"&gt;
            &lt;id&gt;001&lt;/id&gt;
            &lt;name&gt;Chuck&lt;/name&gt;
        &lt;/user&gt;
        &lt;user x="7"&gt;
            &lt;id&gt;009&lt;/id&gt;
            &lt;name&gt;Brent&lt;/name&gt;
        &lt;/user&gt;
    &lt;/users&gt;
&lt;/stuff&gt;'''

stuff = ET.fromstring(input)
lst = stuff.findall('users/user')
print 'User count:', len(lst)

for item in lst:
    print 'Name', item.find('name').text
    print 'Id', item.find('id').text
    print 'Attribute', item.get('x')
</FONT></PRE><FONT COLOR=black>The <TT>findall</TT> method retrieves a Python list of sub-trees that
represent the <TT>user</TT> structures in the XML tree. Then we can 
write a <TT>for</TT> loop that looks at each of the user nodes, and 
prints the <TT>name</TT> and <TT>id</TT> text elements as well as the 
<TT>x</TT> attribute from the <TT>user</TT> node.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
User count: 2
Name Chuck
Id 001
Attribute 2
Name Brent
Id 009
Attribute 7
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Application Programming Interfaces (API)</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc160">13.4</A>&nbsp;&nbsp;Application Programming Interfaces (API)</FONT></H2><!--SEC END -->

<FONT COLOR=black>We now have the ability to exchange data between applications using HyperText
Transport Protocol (HTTP) and a way to represent complex data that we are 
sending back and forth between these applications using eXtensible 
Markup Language (XML).<BR>
<BR>
The next step is to begin to define and document ``contracts'' between 
applications using these techniques. The general name for these 
application-to-application contracts is <B>Application Program 
Interfaces</B> or APIs. When we use an API, generally one program
makes a set of <B>services</B> available for use by other applications
and publishes the APIs (i.e. the ``rules'') that must be followed to 
access the services provided by the program.<BR>
<BR>
When we begin to build our programs where the functionality of
our program includes access to services provided by other programs, 
we call the approach a <B>Service-Oriented Architecture</B> or SOA.
A SOA approach is one where our overall application makes use of 
the services of other applications. A non-SOA approach is where the
application is a single stand-alone application which contains all of the
code necessary to implement the application.<BR>
<BR>
We see many examples of SOA when we use the web. We can go to a single 
web site and book air travel, hotels, and automobiles all from a 
single site. The data for hotels is not stored on the airline computers. 
Instead, the airline computers contact the services on the hotel computers
and retrieve the hotel data and present it to the user. When the user
agrees to make a hotel reservation using the airline site, the airline site uses
another web service on the hotel systems to actually make the reservation.
And when it comes to charge your credit card for the whole transaction, 
still other computers become involved in the process.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook015.png"></FONT></DIV><FONT COLOR=black>
<BR>
A Service-Oriented Architecture has many advantages including: (1) we 
always maintain only one copy of data - this is particularly important
for things like hotel reservations where we do not want to over-commit
and (2) the owners of the data can set the rules about the use of their 
data. With these advantages, a SOA system must be carefully designed
to have good performance and meet the user's needs.<BR>
<BR>
When an application makes a set of services in its API available over the web, 
we call these <B>web services</B>. </FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Twitter web services</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc161">13.5</A>&nbsp;&nbsp;Twitter web services</FONT></H2><!--SEC END -->

<FONT COLOR=black><B>Note:</B> Since this section was written, Twitter has 
dramatically changed the format and rules for the use of its API.
So the code that uses the Twitter API will no longer work. It 
still shows how one would work with an XML-based API in general.<BR>
<BR>
You can view the Twitter API documentation at 
<TT>http://apiwiki.twitter.com/</TT>. The Twitter API is an example
of the REST style of web services.
We will focus on the Twitter API
to retrieve a list of a user's friends and their statuses. As an 
example, you can visit the following URL:<BR>
<BR>
<TT>http://api.twitter.com/1/statuses/friends/drchuck.xml</TT><BR>
<BR>
To see a list of the friends of the twitter account <TT>drchuck</TT>.
It may look like a mess in your browser. To see the actual XML
returned by Twitter, you can view the source of the returned
``web page''.<BR>
<BR>
We can retrieve this same XML using Python using the <TT>urllib</TT>
utility:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import urllib

TWITTER_URL = 'http://api.twitter.com/l/statuses/friends/ACCT.xml'

while True:
    print ''
    acct = raw_input('Enter Twitter Account:')
    if ( len(acct) &lt; 1 ) : break
    url = TWITTER_URL.replace('ACCT', acct)
    print 'Retrieving', url
    document = urllib.urlopen (url).read()
    print document[:250]
</FONT></PRE><FONT COLOR=black>The program prompts for a Twitter account and opens the URL
for the friends and statuses API and then retrieves the 
text from the URL and shows us the first 250 characters of
the text.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python twitter1.py

Enter Twitter Account:drchuck
Retrieving http://api.twitter.com/l/statuses/friends/drchuck.xml
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;users type="array"&gt;
&lt;user&gt;
  &lt;id&gt;115636613&lt;/id&gt;
  &lt;name&gt;Steve Coppin&lt;/name&gt;
  &lt;screen_name&gt;steve_coppin&lt;/screen_name&gt;
  &lt;location&gt;Kent, UK&lt;/location&gt;
  &lt;description&gt;Software developing, best practicing, agile e

Enter Twitter Account:
</FONT></PRE><FONT COLOR=black>In this application, we have retrieved the XML exactly as if it were
an HTML web page. If we wanted to extract data from the XML, we 
could use Python string functions but this would become pretty complex
as we tried to really start to dig into the XML in detail.<BR>
<BR>
If we were to dump out some of the retrieved XML it would look roughly as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;users type="array"&gt;
  &lt;user&gt;
    &lt;id&gt;115636613&lt;/id&gt;
    &lt;name&gt;Steve Coppin&lt;/name&gt;
    &lt;screen_name&gt;steve_coppin&lt;/screen_name&gt;
    &lt;location&gt;Kent, UK&lt;/location&gt;
    &lt;status&gt;
      &lt;id&gt;10174607039&lt;/id&gt;
      &lt;source&gt;web&lt;/source&gt;
      &lt;/status&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;id&gt;17428929&lt;/id&gt;
    &lt;name&gt;davidkocher&lt;/name&gt;
    &lt;screen_name&gt;davidkocher&lt;/screen_name&gt;
    &lt;location&gt;Bern&lt;/location&gt;
    &lt;status&gt;
      &lt;id&gt;10306231257&lt;/id&gt;
      &lt;text&gt;@MikeGrace If possible please post a detailed bug report &lt;/text&gt;
    &lt;/status&gt;
  &lt;/user&gt;
  ...
</FONT></PRE><FONT COLOR=black>The top level tag is a <TT>users</TT> and there are multiple <TT>user</TT> tags
below within the <TT>users</TT> tag. There is also a <TT>status</TT> tag below
the <TT>user</TT> tag. </FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Handling XML data from an API</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc162">13.6</A>&nbsp;&nbsp;Handling XML data from an API</FONT></H2><!--SEC END -->

<FONT COLOR=black>When we receive well-formed XML data from an API, we generally use
an XML parser such as <TT>ElementTree</TT> to extract information from
the XML data.<BR>
<BR>
In the program below, we retrieve the friends and statuses from
the Twitter API and then parse the returned XML to show the first
four friends and their statuses.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import urllib
import xml.etree.ElementTree as ET

TWITTER_URL = 'http://api.twitter.com/l/statuses/friends/ACCT.xml'

while True:
    print ''
    acct = raw_input('Enter Twitter Account:')
    if ( len(acct) &lt; 1 ) : break
    url = TWITTER_URL.replace('ACCT', acct)
    print 'Retrieving', url
    document = urllib.urlopen (url).read()
    print 'Retrieved', len(document), 'characters.' 
    tree = ET.fromstring(document)
    count = 0
    for user in tree.findall('user'):
        count = count + 1
        if count &gt; 4 : break
        print user.find('screen_name').text
        status =  user.find('status')
        if status : 
            txt = status.find('text').text
            print '  ',txt[:50]
</FONT></PRE><FONT COLOR=black>We use the <TT>findall</TT> method to get a list of the <TT>user</TT> 
nodes and loop through the list using a <TT>for </TT> loop. 
For each <TT>user</TT> node, we pull out the text of the <CODE>screen_name</CODE> node
and then pull out the <TT>status</TT> node. If there is a <TT>status</TT>
node, we pull out the text of the <TT>text</TT> node and print the first 50 
characters of the status text.<BR>
<BR>
The pattern is pretty straightforward, we use <TT>findall</TT> and <TT>find</TT>
to pull out a list of nodes or a single node and then if a node is a complex
element with more sub-nodes we look deeper into the node until we reach the 
text element that we are interested in.<BR>
<BR>
The program runs as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python twitter2.py 

Enter Twitter Account:drchuck
Retrieving http://api.twitter.com/l/statuses/friends/drchuck.xml
Retrieved 193310 characters.
steve_coppin
   Looking forward to some "oh no the markets closed,
davidkocher
   @MikeGrace If possible please post a detailed bug 
hrheingold
   From today's Columbia Journalism Review, on crap d
huge_idea
   @drchuck  #cnx2010 misses you, too.  Thanks for co

Enter Twitter Account:hrheingold
Retrieving http://api.twitter.com/l/statuses/friends/hrheingold.xml
Retrieved 208081 characters.
carr2n
   RT @tysone: Saturday's proclaimation by @carr2n pr
tiffanyshlain
   RT @ScottKirsner: Turning smartphones into a tool 
soniasimone
   @ACCompanyC Funny, smart, cute, and also nice! He 
JenStone7617
   Watching "Changing The Equation: High Tech Answers

Enter Twitter Account:
</FONT></PRE><FONT COLOR=black>While the code for parsing the XML and extracting the fields
using <TT>ElementTree</TT> takes a few lines to express what 
we are looking for in the XML, it is much simpler than trying 
to use Python string parsing to pull apart the XML and find 
the data elements.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc163">13.7</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>API:</B></FONT><DD><FONT COLOR=black> Application Program Interface - A contract between
applications that defines the patterns of interaction between 
two application components.
</FONT><A NAME="@default758"></A><BR>
<BR>
<DT><FONT COLOR=black><B>ElementTree:</B></FONT><DD><FONT COLOR=black> A built-in Python library used to parse XML data.
</FONT><A NAME="@default759"></A><BR>
<BR>
<DT><FONT COLOR=black><B>XML:</B></FONT><DD><FONT COLOR=black> eXtensible Markup Language - A format that allows for 
the markup of structured data.
</FONT><A NAME="@default760"></A>
<A NAME="@default761"></A><BR>
<BR>
<DT><FONT COLOR=black><B>REST:</B></FONT><DD><FONT COLOR=black> REpresentational State Transfer - A style of Web Services 
that provide access to resources within an application using the HTTP
protocol.
</FONT><A NAME="@default762"></A><BR>
<BR>
<DT><FONT COLOR=black><B>SOA:</B></FONT><DD><FONT COLOR=black> Service Oriented Architecture - when an application is 
made of components connected across a network.
</FONT><A NAME="@default763"></A>
<A NAME="@default764"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc164">13.8</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;<EM>
Change the program that retrieves twitter data 
(<TT>twitter2.py</TT>) to also
print out the location for each of the friends
indented under the name by two spaces as follows:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
Enter Twitter Account:drchuck
Retrieving http://api.twitter.com/l/statuses/friends/drchuck.xml
Retrieved 194533 characters.
steve_coppin
   Kent, UK
   Looking forward to some "oh no the markets closed,
davidkocher
   Bern
   @MikeGrace If possible please post a detailed bug 
hrheingold
   San Francisco Bay Area
   RT @barrywellman: Lovely AmBerhSci Internet &amp; Comm
huge_idea
   Boston, MA
   @drchuck  #cnx2010 misses you, too.  Thanks for co
</EM></FONT></PRE></DIV><BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Using databases and Structured Query Language (SQL)</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc165">Chapter&nbsp;14</A>&nbsp;&nbsp;Using databases and Structured Query Language (SQL)</FONT></H1><!--SEC END -->

<!--TOC section <FONT COLOR=black><FONT SIZE=3>What is a database?</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc166">14.1</A>&nbsp;&nbsp;What is a database?</FONT></H2><!--SEC END -->

<A NAME="@default765"></A>
<FONT COLOR=black>A <B>database</B> is a file that is organized for storing data.
Most databases are organized like a dictionary in the sense
that they map from keys to values. The biggest difference
is that the database is on disk (or other permanent storage),
so it persists after the program ends. Because a database is
stored on permanent storage, it can store far more data than
a dictionary, which is limited to the size of the memory 
in the computer.<BR>
<BR>
<A NAME="@default766"></A>
Like a dictionary, database software is designed to keep 
the inserting and accessing of data very fast, even for large
amounts of data. Database software maintains its performance by 
building <B>indexes</B> as data is added to the database
to allow the computer to jump quickly to a particular
entry.<BR>
<BR>
There are many different database systems which are used for a wide
variety of purposes including: Oracle, MySQL, Microsoft SQL Server, 
PostgreSQL, and SQLite. We focus on SQLite in this book because
it is a very common database and is already built into Python. 
SQLite is designed to be <EM>embedded</EM> into other applications
to provide database support within the application. For example,
the Firefox browser also uses the SQLite database internally as do 
many other products.<BR>
<BR>
<TT>http://sqlite.org/</TT><BR>
<BR>
SQLite is well suited to some of the data manipulation problems that we 
see in Informatics such as the Twitter spidering application that we 
describe in this chapter.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Database concepts</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc167">14.2</A>&nbsp;&nbsp;Database concepts</FONT></H2><!--SEC END -->

<FONT COLOR=black>When you first look at a database it looks like a 
spreadsheet with multiple sheets. The primary data structures 
in a database are:
<B>tables</B>, <B>rows</B>, and <B>columns</B>. <BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook016.png"></FONT></DIV><FONT COLOR=black>
<BR>
In technical descriptions of relational databases the concepts of 
table, row, and column are more formally referred
to as <B>relation</B>, <B>tuple</B>, and <B>attribute</B>, respectively.
We will use the less formal terms in this chapter.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>SQLite manager Firefox add-on</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc168">14.3</A>&nbsp;&nbsp;SQLite manager Firefox add-on</FONT></H2><!--SEC END -->

<FONT COLOR=black>While this chapter will focus on using Python to work with data 
in SQLite database files, many operations can be done more
conveniently using a Firefox add-on called the <B>SQLite
Database Manager</B> which is freely available from:<BR>
<BR>
<TT>https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/</TT><BR>
<BR>
Using the browser you can easily create tables, insert data, edit data, 
or run simple SQL queries on the data in the database.<BR>
<BR>
In a sense, the database manager is similar to a text editor
when working with text files. When you want to do one or
very few operations on a text file, you can just open it
in a text editor and make the changes you want. When you have 
many changes that you need to do to a text file, often you 
will write a simple Python program. You will find the same 
pattern when working with databases. You will do simple
operations in the database manager and more complex operations
will be most conveniently done in Python.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Creating a database table</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc169">14.4</A>&nbsp;&nbsp;Creating a database table</FONT></H2><!--SEC END -->

<FONT COLOR=black>Databases require more defined structure than Python lists 
or dictionaries<SUP><A NAME="text11" HREF="#note11">1</A></SUP>. <BR>
<BR>
When we create a database <B>table</B> we
must tell the database in advance the names of each of the
<B>columns</B> in the table and the type of data which we are 
planning to store in each <B>column</B>. When the database software
knows the type of data in each column, it can choose the most 
efficient way to store and lookup the data based on the type of
data. <BR>
<BR>
You can look at the various data types supported by SQLite
at the following url:<BR>
<BR>
<TT>http://www.sqlite.org/datatypes.html</TT><BR>
<BR>
Defining structure for your data up front may seem inconvenient
at the beginning, but the payoff is fast access to your data 
even when the database contains a large amount of data.<BR>
<BR>
The code to create a database file and a table 
named <TT>Tracks</TT> with two columns in the 
database is as follows:</FONT><BR>
<BR>
<A NAME="@default767"></A>
<A NAME="@default768"></A>
<PRE><FONT SIZE=4 COLOR=blue>
import sqlite3

conn = sqlite3.connect('music.db')
cur = conn.cursor()

cur.execute('DROP TABLE IF EXISTS Tracks ')
cur.execute('CREATE TABLE Tracks (title TEXT, plays INTEGER)')

conn.close()
</FONT></PRE><A NAME="@default769"></A>
<A NAME="@default770"></A>
<A NAME="@default771"></A>
<A NAME="@default772"></A><FONT COLOR=black>
The <TT>connect</TT> operation makes a ``connection'' to the database 
stored in the file <TT>music.db</TT> in the current directory. If
the file does not exist, it will be created. The reason this
is called a ``connection'' is that sometimes the database is stored
on a separate ``database server'' from the server on which we 
are running our application. In our simple examples 
the database will just be a local file in the same directory
as the Python code we are running.<BR>
<BR>
A <B>cursor</B> is like a file handle that we can use to perform
operations on the data stored in the database. Calling 
<TT>cursor()</TT> is very similar conceptually to calling
<TT>open()</TT> when dealing with text files.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook017.png"></FONT></DIV><FONT COLOR=black>
<BR>
Once we have the cursor, we can begin to execute 
commands on the contents of the database using the <TT>execute()</TT>
method.<BR>
<BR>
Database commands are expressed in a special language that has 
been standardized across many different database vendors 
to allow us to learn a single database language. The database
language is called <B>Structured Query Language</B> or <B>SQL</B>
for short.<BR>
<BR>
<TT>http://en.wikipedia.org/wiki/SQL</TT><BR>
<BR>
In our example, we are executing two SQL commands in our database.
As a convention, we will show the SQL keywords in uppercase 
and the parts of the command that we are adding (such as the
table and column names) will be shown in lowercase.<BR>
<BR>
The first SQL command removes the <TT>Tracks</TT> table from the 
database if it exists. This pattern is simply to allow us to 
run the same program to create the <TT>Tracks</TT> table over 
and over again without causing an error. Note that the
<TT>DROP TABLE</TT> command deletes the table and all of its contents
from the database (i.e. there is no ``undo'').
</FONT><PRE><FONT SIZE=4 COLOR=blue>
cur.execute('DROP TABLE IF EXISTS Tracks ')
</FONT></PRE><FONT COLOR=black>The second command creates a table named
<TT>Tracks</TT> with a text column named <TT>title</TT>
and an integer column named <TT>plays</TT>.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
cur.execute('CREATE TABLE Tracks (title TEXT, plays INTEGER)')
</FONT></PRE><FONT COLOR=black>Now that we have created a table named <TT>Tracks</TT>, we can put some data
into that table using the SQL <TT>INSERT</TT> operation. Again, we begin
by making a connection to the database and obtaining the <TT>cursor</TT>.
We can then execute SQL commands using the cursor.<BR>
<BR>
The SQL <TT>INSERT</TT> command indicates which table we are using 
and then defines a new row by listing the fields we want to 
include <TT>(title, plays) </TT> followed by the <TT>VALUES</TT> we want
placed in the new row in the table. We specify the values
as question marks <TT>(?, ?)</TT> to indicate that the actual 
values are passed in as a tuple <TT>( 'My Way', 15 ) </TT> as the
second parameter to the <TT>execute()</TT> call.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import sqlite3

conn = sqlite3.connect('music.db')
cur = conn.cursor()

cur.execute('INSERT INTO Tracks (title, plays) VALUES ( ?, ? )', 
    ( 'Thunderstruck', 20 ) )
cur.execute('INSERT INTO Tracks (title, plays) VALUES ( ?, ? )', 
    ( 'My Way', 15 ) )
conn.commit()

print 'Tracks:'
cur.execute('SELECT title, plays FROM Tracks')
for row in cur :
   print row

cur.execute('DELETE FROM Tracks WHERE plays &lt; 100')
conn.commit()

cur.close()
</FONT></PRE><FONT COLOR=black>First we <TT>INSERT</TT> two rows into our table and use <TT>commit()</TT> 
to force the data to be written to the database file.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook018.png"></FONT></DIV><FONT COLOR=black>
<BR>
Then we use the <TT>SELECT</TT> command
to retrieve the rows we just inserted from the table. 
On the 
<TT>SELECT</TT> command, we indicate which columns we would like <TT>(title, plays)</TT>
and indicate which table we want to retrieve the data from. After we 
execute the <TT>SELECT</TT> statement, the cursor is something we can loop through
in a <TT>for</TT> statement. For efficiency,
the cursor does not read all of the data from the
database when we execute the <TT>SELECT</TT> statement. 
Instead, the data is read on-demand
as we loop through the rows in the <TT>for</TT> statement.<BR>
<BR>
The output of the program is as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Tracks:
(u'Thunderstruck', 20)
(u'My Way', 15)
</FONT></PRE><A NAME="@default773"></A><FONT COLOR=black>
Our <TT>for</TT> loop finds two rows, and each row is a Python tuple with the
first value as the <TT>title</TT> and the second value as the number of <TT>plays</TT>.
Do not be concerned that the title strings are shown starting with 
<TT>u'</TT>. This is an indication that the strings are <B>Unicode</B> strings
that are capable of storing non-Latin character sets.<BR>
<BR>
At the very end of the program, we execute an SQL command to <TT>DELETE</TT> 
the rows we have just created so we can run the program over and over.
The <TT>DELETE</TT> command shows the use of a <TT>WHERE</TT> clause that
allows us to express a selection criterion so that we can ask the database
to apply the command to only the rows that match the criterion. In this example
the criterion happens to apply to all the rows so we empty the table
out so we can run the program repeatedly. After the <TT>DELETE</TT> is performed
we also call <TT>commit()</TT> to force the data to be removed from the database.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Structured Query Language (SQL) summary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc170">14.5</A>&nbsp;&nbsp;Structured Query Language (SQL) summary</FONT></H2><!--SEC END -->

<FONT COLOR=black>So far, we have been using the Structured Query Language in our Python
examples and have covered many of the basics of the SQL commands.
In this section, we look at the SQL language in particular
and give an overview of SQL syntax.<BR>
<BR>
Since there are so many different database vendors, the Structured Query
Language (SQL) was standardized so we could communicate in a portable
manner to database systems from multiple vendors.<BR>
<BR>
A relational database is made up of tables, rows, and columns. The columns
generally have a type such as text, numeric, or date data. When we create
a table, we indicate the names and types of the columns:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
CREATE TABLE Tracks (title TEXT, plays INTEGER)
</FONT></PRE><FONT COLOR=black>To insert a row into a table, we use the SQL <TT>INSERT</TT> command:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
INSERT INTO Tracks (title, plays) VALUES ('My Way', 15)
</FONT></PRE><FONT COLOR=black>The <TT>INSERT</TT> statement specifies the table name, and then a list of
the fields/columns that you would like to set in the new row, and then 
the keyword <TT>VALUES</TT> and then a list of corresponding values 
for each of the fields.<BR>
<BR>
The SQL <TT>SELECT</TT> command is used to retrieve rows and columns from a database.
The <TT>SELECT</TT> statement lets you specify which columns you would
like to retrieve as well as a <TT>WHERE</TT> clause to select which 
rows you would like to see. It also allows an optional 
<TT>ORDER BY</TT> clause to control the sorting of the returned rows.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
SELECT * FROM Tracks WHERE title = 'My Way'
</FONT></PRE><FONT COLOR=black>Using <CODE>*</CODE> indicates that you want the database to return all of 
the columns for each row that matches the <TT>WHERE</TT> clause. <BR>
<BR>
Note, unlike in Python, in a SQL <TT>WHERE</TT> clause 
we use a single equal sign 
to indicate a test for equality rather than a double equal sign.
Other logical operations allowed in a <TT>WHERE</TT> clause include 
<CODE>&lt;</CODE>,
<CODE>&gt;</CODE>,
<CODE>&lt;=</CODE>,
<CODE>&gt;=</CODE>,
<CODE>!=</CODE>,
as well as <TT>AND</TT> and <TT>OR</TT> and parentheses
to build your logical expressions.<BR>
<BR>
You can request that the returned rows be sorted by one of 
the fields as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
SELECT title,plays FROM Tracks ORDER BY title
</FONT></PRE><FONT COLOR=black>To remove a row, you need a <TT>WHERE</TT> clause on an SQL <TT>DELETE</TT>
statement. The <TT>WHERE</TT> clause determines which rows are to be deleted:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
DELETE FROM Tracks WHERE title = 'My Way'
</FONT></PRE><FONT COLOR=black>It is possible to <TT>UPDATE</TT> a column or columns within one or more rows
in a table using the SQL <TT>UPDATE</TT> statement as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
UPDATE Tracks SET plays = 16 WHERE title = 'My Way'
</FONT></PRE><FONT COLOR=black>The <TT>UPDATE</TT> statement specifies a table and 
then a list of fields and values to change after the <TT>SET</TT> 
keyword and then an optional <TT>WHERE</TT> clause to select
the rows that are to be updated. A single <TT>UPDATE</TT> statement
will change all of the rows that match the <TT>WHERE</TT> clause, or if 
a <TT>WHERE</TT> clause is not specified, it performs the <TT>UPDATE</TT>
on all of the rows in the table.<BR>
<BR>
These four basic SQL commands (INSERT, SELECT, UPDATE, and DELETE) allow 
the four basic operations needed to create and maintain data.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Spidering Twitter using a database</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc171">14.6</A>&nbsp;&nbsp;Spidering Twitter using a database</FONT></H2><!--SEC END -->

<FONT COLOR=black>In this section, we will create a simple spidering program that will 
go through Twitter accounts and build a database of them.
<EM>Note: Be very careful when running this program. You do not
want to pull too much data or run the program for too long and
end up having your Twitter access shut off.</EM><BR>
<BR>
One of the problems of any kind of spidering program is that it 
needs to be able to be stopped and restarted many times and 
you do not want to lose the data that you have retrieved so far.
You don't want to always restart your data retrieval at the
very beginning so we want to store data as we retrieve it so our
program can start back up and pick up where it left off.<BR>
<BR>
We will start by retrieving one person's Twitter friends and their
statuses, looping through the list of friends, and adding each 
of the friends to a database to be retrieved in the future. After
we process one person's Twitter friends, we check in our database
and retrieve one of the friends of the friend. We do this over and
over, picking an ``unvisited'' person, retrieving their friend list
and adding friends we have not seen to our list for a future visit.<BR>
<BR>
We also track how many times we have seen a particular friend in the
database to get some sense of ``popularity''.<BR>
<BR>
By storing our list of known accounts and whether 
we have retrieved the account or not, 
and how popular the account is in a database on the disk
of the computer, we can stop and
restart our program as many times as we like.<BR>
<BR>
This program is a bit complex. It is based on the code 
from the exercise earlier in the book that uses
the Twitter API.<BR>
<BR>
Here is the source code for our Twitter spidering application:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import sqlite3
import urllib
import xml.etree.ElementTree as ET

TWITTER_URL = 'http://api.twitter.com/l/statuses/friends/ACCT.xml'

conn = sqlite3.connect('twdata.db')
cur = conn.cursor()

cur.execute('''
CREATE TABLE IF NOT EXISTS 
Twitter (name TEXT, retrieved INTEGER, friends INTEGER)''')

while True:
    acct = raw_input('Enter a Twitter account, or quit: ')
    if ( acct == 'quit' ) : break
    if ( len(acct) &lt; 1 ) :
        cur.execute('SELECT name FROM Twitter WHERE retrieved = 0 LIMIT 1')
        try:
            acct = cur.fetchone()[0]
        except:
            print 'No unretrieved Twitter accounts found'
            continue

    url = TWITTER_URL.replace('ACCT', acct)
    print 'Retrieving', url
    document = urllib.urlopen (url).read()
    tree = ET.fromstring(document)

    cur.execute('UPDATE Twitter SET retrieved=1 WHERE name = ?', (acct, ) )

    countnew = 0
    countold = 0
    for user in tree.findall('user'):
        friend = user.find('screen_name').text
        cur.execute('SELECT friends FROM Twitter WHERE name = ? LIMIT 1', 
            (friend, ) )
        try:
            count = cur.fetchone()[0]
            cur.execute('UPDATE Twitter SET friends = ? WHERE name = ?', 
                (count+1, friend) )
            countold = countold + 1
        except:
            cur.execute('''INSERT INTO Twitter (name, retrieved, friends) 
                VALUES ( ?, 0, 1 )''', ( friend, ) )
            countnew = countnew + 1
    print 'New accounts=',countnew,' revisited=',countold
    conn.commit()

cur.close()
</FONT></PRE><FONT COLOR=black>Our database is stored in the file <TT>twdata.db</TT> and it has one 
table named <TT>Twitter</TT> and each row in the <TT>Twitter</TT> table
has a column for the account name, whether we have retrieved the friends
of this account, and how many times this account has been ``friended''.<BR>
<BR>
In the main loop of the program, we prompt the user for a Twitter
account name or ``quit'' to exit the program. 
If the user enters a Twitter account, we retrieve the 
list of friends and statuses
for that user and add each friend to the database if 
not already in the database. If the friend is already in the list, 
we add one to the <TT>friends</TT> field in the row in the database.<BR>
<BR>
If the user presses enter, we look in the database for the next 
Twitter account that we have not yet retrieved and retrieve the
friends and statuses for that account, add them to the database 
or update them and increase their <TT>friends count</TT>.<BR>
<BR>
Once we retrieve the list of friends and statuses, we loop 
through all of the <TT>user</TT> items in the returned XML
and retrieve the <CODE>screen_name</CODE> for each user. Then we use
the <TT>SELECT </TT> statement to see if we already have stored this
particular <CODE>screen_name</CODE> in the database and retrieve the
friend count (<TT>friends</TT>) if the record exists.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
    countnew = 0
    countold = 0
    for user in tree.findall('user'):
        friend = user.find('screen_name').text
        cur.execute('SELECT friends FROM Twitter WHERE name = ? LIMIT 1', 
            (friend, ) )
        try:
            count = cur.fetchone()[0]
            cur.execute('UPDATE Twitter SET friends = ? WHERE name = ?', 
                (count+1, friend) )
            countold = countold + 1
        except:
            cur.execute('''INSERT INTO Twitter (name, retrieved, friends) 
                VALUES ( ?, 0, 1 )''', ( friend, ) )
            countnew = countnew + 1
    print 'New accounts=',countnew,' revisited=',countold
    conn.commit()
</FONT></PRE><FONT COLOR=black>Once the cursor executes the <TT>SELECT</TT> statement, 
we must retrieve the rows. We could do this with a <TT>for</TT> 
statement, but since we are only retrieving
one row (<TT>LIMIT 1</TT>), we can use the <TT>fetchone()</TT> method to fetch the
first (and only) row that is the result of the <TT>SELECT</TT> operation. 
Since <TT>fetchone()</TT> returns the row as a <B>tuple</B> (even though there is only
one field), we take the first value from the tuple using <TT>[0]</TT> to get the 
current friend count into the variable <TT>count</TT>. <BR>
<BR>
If this retrieval is successful, we use the SQL <TT>UPDATE</TT> statement with a 
<TT>WHERE</TT> clause to add one to the <TT>friends</TT> column for the row that 
matches the friend's account. Notice that there are two placeholders (i.e.
question marks) in the SQL, and the second parameter to the <TT>execute()</TT> is
a two-element tuple which holds the values to be substituted into the SQL
in place of the question marks.<BR>
<BR>
If the code in the <TT>try</TT> block fails it is probably because no record
matched the <TT>WHERE name = ?</TT> clause on the SELECT statement. So in the
<TT>except</TT> block, we use the SQL <TT>INSERT</TT> statement to add the friend's
<CODE>screen_name</CODE> to the table with an indication that we have not yet 
retrieved the <CODE>screen_name</CODE> and setting the friend count to zero.<BR>
<BR>
So the first time the program runs and we enter a Twitter account, the program
runs as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Enter a Twitter account, or quit: drchuck
Retrieving http://api.twitter.com/l/statuses/friends/drchuck.xml
New accounts= 100  revisited= 0
Enter a Twitter account, or quit: quit
</FONT></PRE><FONT COLOR=black>Since this is the first time we have run the program, the database
is empty and we create the database in the file <TT>twdata.db</TT> and
add a table named <TT>Twitter</TT> to the database. Then we retrieve
some friends and add them all to the database since the database is
empty.<BR>
<BR>
At this point, we might want to write a simple database dumper
to take a look at what is in our <TT>twdata.db</TT> file:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import sqlite3

conn = sqlite3.connect('twdata.db')
cur = conn.cursor()
cur.execute('SELECT * FROM Twitter')
count = 0
for row in cur :
   print row
   count = count + 1
print count, 'rows.'
cur.close()
</FONT></PRE><FONT COLOR=black>This program simply opens the database and selects all of the 
columns of all of the rows in the table <TT>Twitter</TT>, then 
loops through the rows and prints out each row.<BR>
<BR>
If we run this program after the first execution of our Twitter
spider above, its output will be as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
(u'opencontent', 0, 1)
(u'lhawthorn', 0, 1)
(u'steve_coppin', 0, 1)
(u'davidkocher', 0, 1)
(u'hrheingold', 0, 1)
...
100 rows.
</FONT></PRE><FONT COLOR=black>We see one row for each <CODE>screen_name</CODE>, that we 
have not retrieved the data for that <CODE>screen_name</CODE> and 
everyone in the database has one friend.<BR>
<BR>
Now our database reflects the retrieval of the friends of 
our first Twitter account (<B>drchuck</B>). We can run the program
again and tell it to retrieve the friends of the next 
``unprocessed'' account by simply pressing enter instead of
a Twitter account as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/l/statuses/friends/opencontent.xml
New accounts= 98  revisited= 2
Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/l/statuses/friends/lhawthorn.xml
New accounts= 97  revisited= 3
Enter a Twitter account, or quit: quit
</FONT></PRE><FONT COLOR=black>Since we pressed enter (i.e. we did not specify a Twitter account),
the following code is executed:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
    if ( len(acct) &lt; 1 ) :
        cur.execute('SELECT name FROM Twitter WHERE retrieved = 0 LIMIT 1')
        try:
            acct = cur.fetchone()[0]
        except:
            print 'No unretrieved twitter accounts found'
            continue
</FONT></PRE><FONT COLOR=black>We use the SQL <TT>SELECT</TT> statement to retrieve the name of the first 
(<TT>LIMIT 1</TT>) user who still has their ``have we retrieved this user''
value set to zero. We also use the <TT>fetchone()[0]</TT> pattern within 
a try/except block to either extract a <CODE>screen_name</CODE> from the retrieved
data or put out an error message and loop back up.<BR>
<BR>
If we successfully retrieved an unprocessed <CODE>screen_name</CODE>, we retrieve
their data as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
    url = TWITTER_URL.replace('ACCT', acct)
    print 'Retrieving', url
    document = urllib.urlopen (url).read()
    tree = ET.fromstring(document)

    cur.execute('UPDATE Twitter SET retrieved=1 WHERE name = ?', (acct, ) )
</FONT></PRE><FONT COLOR=black>Once we retrieve the data successfully, we use the <TT>UPDATE</TT> statement 
to set the <TT>retrieved</TT> column to one to indicate that we have completed 
the retrieval of the friends of this account. This keeps us from re-retrieving
the same data over and over and keeps us progressing forward through the network
of Twitter friends.<BR>
<BR>
If we run the friend program and press enter twice to retrieve the next 
unvisited friend's friends,
then run the dumping program, it will give us the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
(u'opencontent', 1, 1)
(u'lhawthorn', 1, 1)
(u'steve_coppin', 0, 1)
(u'davidkocher', 0, 1)
(u'hrheingold', 0, 1)
...
(u'cnxorg', 0, 2)
(u'knoop', 0, 1)
(u'kthanos', 0, 2)
(u'LectureTools', 0, 1)
...
295 rows.
</FONT></PRE><FONT COLOR=black>We can see that we have properly recorded that we have visited 
<TT>lhawthorn</TT> and <TT>opencontent</TT>. Also the accounts 
<TT>cnxorg</TT> and <TT>kthanos</TT> already have two followers.
Since we now have retrieved the friends of three people
(<TT>drchuck</TT>, <TT>opencontent</TT> and <TT>lhawthorn</TT>) our table has 295 rows 
of friends to retrieve.<BR>
<BR>
Each time we run the program and press enter, it will pick the next 
unvisited account (e.g. the next account will be <CODE>steve_coppin</CODE>),
retrieve their friends, mark them as retrieved and for each of the 
friends of <CODE>steve_coppin</CODE>, either add them to the end of the 
database, or update their friend count if they are already in the
database.<BR>
<BR>
Since the program's data is all stored on disk in a database, 
the spidering activity can be suspended and resumed as many times as you 
like with no loss of data.<BR>
<BR>
<EM>Note: One more time before we leave this topic, 
be very careful when running this Twitter spidering program. 
You do not want to pull too much data or run the program for 
too long and end up having your Twitter access shut off.</EM></FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Basic data modeling</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc172">14.7</A>&nbsp;&nbsp;Basic data modeling</FONT></H2><!--SEC END -->

<FONT COLOR=black>The real power of a relational database is when we make multiple tables
and make links between those tables. The act of deciding how to break
up your application data into multiple tables and establishing the
relationships between the two tables is called <B>data modeling</B>. The
design document that shows the tables and their relationships 
is called a <B>data model</B>.<BR>
<BR>
Data modeling is a relatively sophisticated skill and we will only introduce
the most basic concepts of relational data modeling in this section. For more
detail on data modeling you can start with:<BR>
<BR>
<TT>http://en.wikipedia.org/wiki/Relational_model</TT><BR>
<BR>
Let's say for our Twitter spider application, instead of just 
counting a person's friends, we wanted to keep a list of 
all of the incoming relationships so we could find a list of 
everyone who is following a particular account.<BR>
<BR>
Since everyone will potentially have many accounts that follow
them, we cannot simply add a single column to our <TT>Twitter</TT> table. 
So we create a new table that keeps track of pairs of friends.
The following is a simple way of making such a table:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
CREATE TABLE Pals (from_friend TEXT, to_friend TEXT)
</FONT></PRE><FONT COLOR=black>Each time we encounter a person who <TT>drchuck</TT> is following, we
would insert a row of the form:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
INSERT INTO Pals (from_friend,to_friend) VALUES ('drchuck', 'lhawthorn')
</FONT></PRE><FONT COLOR=black>As we are processing the 100 friends from the <TT>drchuck</TT>
Twitter feed, we will insert 100 records with ``drchuck''
as the first parameter so we will end up duplicating the 
string many times in the database.<BR>
<BR>
This duplication of string data violates the best practices 
for <B>database normalization</B> which basically states that
we should never put the same string data in the database more than once. 
If we need the data more than once, we create a 
numeric <B>key</B> for the data and reference the actual data 
using this key.<BR>
<BR>
In practical terms, a string takes up a lot more 
space than an integer on the disk
and in the memory of our computer and takes more processor time
to compare and sort. If we only have a few hundred entries 
the storage and processor time hardly matters. But if we have 
a million people in our database and a possibility of 100 million
friend links, it is important to be able to scan data as quickly
as possible.<BR>
<BR>
We will store our Twitter accounts in a table named <TT>People</TT>
instead of the <TT>Twitter</TT> table used in the previous example.
The <TT>People</TT> table has an additional column 
to store the numeric key associated with the 
row for this Twitter user. 
SQLite has a feature that automatically adds the key value
for any row we insert into a table using a special type of 
data column (<TT>INTEGER PRIMARY KEY</TT>).<BR>
<BR>
We can create the <TT>People</TT> table with this additional 
<TT>id</TT> column as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
CREATE TABLE People 
    (id INTEGER PRIMARY KEY, name TEXT UNIQUE, retrieved INTEGER)
</FONT></PRE><FONT COLOR=black>Notice that we are no longer maintaining a friend count in each row
of the <TT>People</TT> table.
When we select <TT>INTEGER PRIMARY KEY</TT> as the type of our <TT>id</TT> column,
we are indicating that we would like SQLite to manage this column and 
assign a unique numeric key to each row we insert automatically.
We also add the keyword <TT>UNIQUE</TT> to indicate that we will not 
allow SQLite to insert two rows with the same value for <TT>name</TT>.<BR>
<BR>
Now instead of creating the table <TT>Pals</TT> above, we create
a table called <TT>Follows</TT> with two integer columns
<CODE>from_id</CODE> and <CODE>to_id</CODE> and a constraint on the table that
the <EM>combination</EM> of <CODE>from_id</CODE> and <CODE>to_id</CODE> must be unique 
in this table (i.e. we cannot insert duplicate rows) in our database.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
CREATE TABLE Follows 
    (from_id INTEGER, to_id INTEGER, UNIQUE(from_id, to_id) )
</FONT></PRE><FONT COLOR=black>When we add <TT>UNIQUE</TT> clauses to our tables, we are communicating a set
of rules that we are asking the database to enforce when we attempt to insert
records. We are creating these rules as a convenience in our programs as we
will see in a moment. The rules both keep us from making mistakes and make
it simpler to write some of our code.<BR>
<BR>
In essence, in creating this <TT>Follows</TT> table, we are modelling a 
"relationship" where one person "follows" someone else
and representing it with a pair of numbers indicating that (a) the people are
connected and (b) the direction of the relationship.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook019.png"></FONT></DIV>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Programming with multiple tables</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc173">14.8</A>&nbsp;&nbsp;Programming with multiple tables</FONT></H2><!--SEC END -->

<FONT COLOR=black>We will now re-do the Twitter spider program using two tables, the primary
keys, and the key references as described above. Here is the code for 
the new version of the program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import sqlite3
import urllib
import xml.etree.ElementTree as ET

TWITTER_URL = 'http://api.twitter.com/l/statuses/friends/ACCT.xml'

conn = sqlite3.connect('twdata.db')
cur = conn.cursor()

cur.execute('''CREATE TABLE IF NOT EXISTS People 
    (id INTEGER PRIMARY KEY, name TEXT UNIQUE, retrieved INTEGER)''')
cur.execute('''CREATE TABLE IF NOT EXISTS Follows 
    (from_id INTEGER, to_id INTEGER, UNIQUE(from_id, to_id))''')

while True:
    acct = raw_input('Enter a Twitter account, or quit: ')
    if ( acct == 'quit' ) : break
    if ( len(acct) &lt; 1 ) :
        cur.execute('''SELECT id,name FROM People 
            WHERE retrieved = 0 LIMIT 1''')
        try:
            (id, acct) = cur.fetchone()
        except:
            print 'No unretrieved Twitter accounts found'
            continue
    else:
        cur.execute('SELECT id FROM People WHERE name = ? LIMIT 1', 
            (acct, ) )
        try:
            id = cur.fetchone()[0]
        except:
            cur.execute('''INSERT OR IGNORE INTO People 
                (name, retrieved) VALUES ( ?, 0)''', ( acct, ) )
            conn.commit()
            if cur.rowcount != 1 : 
                print 'Error inserting account:',acct
                continue
            id = cur.lastrowid

    url = TWITTER_URL.replace('ACCT', acct)
    print 'Retrieving', url
    document = urllib.urlopen (url).read()
    tree = ET.fromstring(document)

    cur.execute('UPDATE People SET retrieved=1 WHERE name = ?', (acct, ) )

    countnew = 0
    countold = 0
    for user in tree.findall('user'):
        friend = user.find('screen_name').text
        cur.execute('SELECT id FROM People WHERE name = ? LIMIT 1', 
            (friend, ) )
        try:
            friend_id = cur.fetchone()[0]
            countold = countold + 1
        except:
            cur.execute('''INSERT OR IGNORE INTO People (name, retrieved) 
                VALUES ( ?, 0)''', ( friend, ) )
            conn.commit()
            if cur.rowcount != 1 :
                print 'Error inserting account:',friend
                continue
            friend_id = cur.lastrowid
            countnew = countnew + 1
        cur.execute('''INSERT OR IGNORE INTO Follows 
            (from_id, to_id) VALUES (?, ?)''', (id, friend_id) )
    print 'New accounts=',countnew,' revisited=',countold
    conn.commit()

cur.close()
</FONT></PRE><FONT COLOR=black>This program is starting to get a bit complicated, but it illustrates
the patterns that we need to use when we are
using integer keys to link tables. The basic patterns are:
</FONT><OL type=1><LI><FONT COLOR=black>Creating tables with primary keys and constraints.</FONT><BR>
<BR>
<LI><FONT COLOR=black>When we have a logical key for a person (i.e. account
name) and we need the <TT>id</TT> value for the person.
Depending on whether or not the person is already
in the <TT>People</TT> table, we either need to: 
(1) look up the person in the <TT>People</TT> table and 
retrieve the <TT>id</TT> value for the person 
or (2) add the person the the <TT>People</TT> table and get the 
<TT>id</TT> value for the newly added row.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Insert the row that captures the ``follows'' relationship.</FONT></OL>
<FONT COLOR=black>We will cover each of these in turn.</FONT><BR>
<BR>
<!--TOC subsection <FONT COLOR=black><FONT SIZE=3>Constraints in database tables</FONT></FONT>-->

<H3><FONT COLOR=black><A NAME="htoc174">14.8.1</A>&nbsp;&nbsp;Constraints in database tables</FONT></H3><!--SEC END -->

<FONT COLOR=black>As we design our table structures, we can tell the database system 
that we would like it to enforce a few rules on us. These rules
help us from making mistakes and introducing incorrect data into 
out tables. When we create our tables:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
cur.execute('''CREATE TABLE IF NOT EXISTS People 
    (id INTEGER PRIMARY KEY, name TEXT UNIQUE, retrieved INTEGER)''')
cur.execute('''CREATE TABLE IF NOT EXISTS Follows 
    (from_id INTEGER, to_id INTEGER, UNIQUE(from_id, to_id))''')
</FONT></PRE><FONT COLOR=black>We indicate that the <TT>name</TT> column in the <TT>People</TT> table must be
<TT>UNIQUE</TT>. We also indicate that the combination of the two numbers
in each row of the <TT>Follows</TT> table must be unique. These constraints
keep us from making mistakes such as adding the same relationship more than
once.<BR>
<BR>
We can take advantage of these constraints in the following code:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
cur.execute('''INSERT OR IGNORE INTO People (name, retrieved) 
    VALUES ( ?, 0)''', ( friend, ) )
</FONT></PRE><FONT COLOR=black>We add the <TT>OR IGNORE</TT> clause to our <TT>INSERT</TT> statement to indicate
that if this particular <TT>INSERT</TT> would cause a violation of the
``<TT>name</TT> must be unique'' rule, the database system is allowed to ignore the 
<TT>INSERT</TT>. We are using the database constraint as a safety net
to make sure we don't inadvertently do something incorrect.<BR>
<BR>
Similarly, the following code ensures that we don't add the 
exact same <TT>Follows</TT> relationship twice.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
cur.execute('''INSERT OR IGNORE INTO Follows 
    (from_id, to_id) VALUES (?, ?)''', (id, friend_id) )
</FONT></PRE><FONT COLOR=black>Again we simply tell the database to ignore our attempted 
<TT>INSERT</TT> if it would violate the uniqueness constraint
that we specified for the <TT>Follows</TT> rows.</FONT><BR>
<BR>
<!--TOC subsection <FONT COLOR=black><FONT SIZE=3>Retrieve and/or insert a record</FONT></FONT>-->

<H3><FONT COLOR=black><A NAME="htoc175">14.8.2</A>&nbsp;&nbsp;Retrieve and/or insert a record</FONT></H3><!--SEC END -->

<FONT COLOR=black>When we prompt the user for a Twitter account, if the account 
exists, we must look up its <TT>id</TT> value. If the account
does not yet exist in the <TT>People</TT> table, we must insert 
the record and get the <TT>id</TT> value from the inserted
row.<BR>
<BR>
This is a very common pattern and is done twice in the program above.
This code shows how we look up the <TT>id</TT> for a 
friend's account when we have extracted a <CODE>screen_name</CODE>
from a <TT>user</TT> node in the retrieved Twitter XML.<BR>
<BR>
Since over time it will be increasingly likely that the account
will already be in the database, we first check to see if the
<TT>People</TT> record exists using a <TT>SELECT</TT> statement.<BR>
<BR>
If all goes well<SUP><A NAME="text12" HREF="#note12">2</A></SUP> inside the <TT>try</TT> section, we retrieve the
record using <TT>fetchone()</TT> and then retrieve the
first (and only) element of the returned tuple and store it in 
<CODE>friend_id</CODE>.<BR>
<BR>
If the <TT>SELECT</TT> fails, the <TT>fetchone()[0]</TT> code will fail
and control will transfer into the <TT>except</TT> section.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
        friend = user.find('screen_name').text
        cur.execute('SELECT id FROM People WHERE name = ? LIMIT 1',
            (friend, ) )
        try:
            friend_id = cur.fetchone()[0]
            countold = countold + 1
        except:
            cur.execute('''INSERT OR IGNORE INTO People (name, retrieved) 
                VALUES ( ?, 0)''', ( friend, ) )
            conn.commit()
            if cur.rowcount != 1 :
                print 'Error inserting account:',friend
                continue
            friend_id = cur.lastrowid
            countnew = countnew + 1
</FONT></PRE><FONT COLOR=black>If we end up in the <TT>except</TT> code, it simply means that the row
was not found so we must insert the row. We use <TT>INSERT OR 
IGNORE</TT> just to avoid errors and then call <TT>commit()</TT> to 
force the database to really be updated. After the write is done, we can 
check the <TT>cur.rowcount</TT> to see how many rows were affected. Since
we are attempting to insert a single row, if the number of 
affected rows is something other than one, it is an error. <BR>
<BR>
If the <TT>INSERT</TT> is successful, we can look at <TT>cur.lastrowid</TT> 
to find out what value the database assigned to the <TT>id</TT> column in 
our newly created row.</FONT><BR>
<BR>
<!--TOC subsection <FONT COLOR=black><FONT SIZE=3>Storing the friend relationship</FONT></FONT>-->

<H3><FONT COLOR=black><A NAME="htoc176">14.8.3</A>&nbsp;&nbsp;Storing the friend relationship</FONT></H3><!--SEC END -->

<FONT COLOR=black>Once we know the key value for both the Twitter user
and the friend in the XML, it is a simple matter to insert
the two numbers into the <TT>Follows</TT> table
with the following code:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
cur.execute('INSERT OR IGNORE INTO Follows (from_id, to_id) VALUES (?, ?)',
    (id, friend_id) )
</FONT></PRE><FONT COLOR=black>Notice that we let the database take care of keeping us from ``double-inserting''
a relationship by creating the table with a uniqueness constraint and then
adding <TT>OR IGNORE</TT> to our <TT>INSERT</TT> statement.<BR>
<BR>
Here is a sample execution of this program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
Enter a Twitter account, or quit: 
No unretrieved Twitter accounts found
Enter a Twitter account, or quit: drchuck
Retrieving http://api.twitter.com/l/statuses/friends/drchuck.xml
New accounts= 100  revisited= 0
Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/l/statuses/friends/opencontent.xml
New accounts= 97  revisited= 3
Enter a Twitter account, or quit: 
Retrieving http://api.twitter.com/l/statuses/friends/lhawthorn.xml
New accounts= 97  revisited= 3
Enter a Twitter account, or quit: quit
</FONT></PRE><FONT COLOR=black>We started with the <TT>drchuck</TT> account and then let the program
automatically pick the next two accounts to retrieve and add to 
our database.<BR>
<BR>
The following is the first few rows in the <TT>People</TT> 
and <TT>Follows</TT> tables after this run is completed:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
People:
(1, u'drchuck', 1)
(2, u'opencontent', 1)
(3, u'lhawthorn', 1)
(4, u'steve_coppin', 0)
(5, u'davidkocher', 0)
295 rows.
Follows:
(1, 2)
(1, 3)
(1, 4)
(1, 5)
(1, 6)
300 rows.
</FONT></PRE><FONT COLOR=black>You can see the <TT>id</TT>, <TT>name</TT>, and <TT>visited</TT> fields in the 
<TT>People</TT> table and you see the numbers of both ends of 
the relationship <TT>Follows</TT> table. 
In the <TT>People</TT> table, we can see that the first three people
have been visited and their data has been retrieved.
The data in the <TT>Follows</TT> table indicates that
<TT>drchuck</TT> (user 1) is a friend to all of the people shown in the first
five rows. This makes sense because
the first data we retrieved and stored was the Twitter friends of
<TT>drchuck</TT>. If you were to print more rows from the <TT>Follows</TT> table,
you would see the friends of user two and three as well.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Three kinds of keys</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc177">14.9</A>&nbsp;&nbsp;Three kinds of keys</FONT></H2><!--SEC END -->

<FONT COLOR=black>Now that we have started building a data model putting our
data into multiple linked tables, and linking the rows in those
tables using <B>keys</B>, we need to look at some terminology 
around keys. There are generally three kinds of keys used 
in a database model.
</FONT><UL><LI><FONT COLOR=black>A <B>logical key</B> is a key that the ``real world'' might use
to look up a row. In our example data model, the <TT>name</TT>
field is a logical key. It is the screen name for the user 
and we indeed look up a user's row several times in the program
using the <TT>name</TT> field. You will often find that it makes
sense to add a <TT>UNIQUE</TT> constraint to a logical key. Since the 
logical key is how we look up a row from the outside world, it makes
little sense to allow multiple rows with the same value in the table.</FONT><BR>
<BR>
<LI><FONT COLOR=black>A <B>primary key</B> is usually a number that is assigned
automatically by the database. It generally has no meaning outside
the program and is only used to link rows from different tables
together. When we want to look up a row in a table, usually 
searching for the row using the primary key is the fastest 
way to find a row. Since primary keys are integer numbers, they 
take up very little storage and can be compared or sorted very quickly.
In our data model, the <TT>id</TT> field is an example of a primary key.</FONT><BR>
<BR>
<LI><FONT COLOR=black>A <B>foreign key</B> is usually a number that points to the primary key
of an associated row in a different table. An example of a foreign
key in our data model is the <CODE>from_id</CODE>. </FONT></UL>
<FONT COLOR=black>We are using a
naming convention of always calling the primary key field name
<TT>id</TT> and appending the suffix <CODE>_id</CODE> to any field name
that is a foreign key.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Using JOIN to retrieve data</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc178">14.10</A>&nbsp;&nbsp;Using JOIN to retrieve data</FONT></H2><!--SEC END -->

<FONT COLOR=black>Now that we have followed the rules of database normalization
and have data separated into two tables, linked together using
primary and foreign keys, we need to be able to build a 
<TT>SELECT</TT> that re-assembles the data across the tables.<BR>
<BR>
SQL uses the <TT>JOIN</TT> clause to re-connect these tables. 
In the <TT>JOIN</TT> clause you specify the fields that are used 
to re-connect the rows between the tables.<BR>
<BR>
The following is an example of a <TT>SELECT</TT> with a 
<TT>JOIN</TT> clause:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
SELECT * FROM Follows JOIN People 
    ON Follows.to_id = People.id WHERE Follows.from_id = 2
</FONT></PRE><FONT COLOR=black>The <TT>JOIN</TT> clause indicates that the fields we are selecting
cross both the <TT>Follows</TT> and <TT>People</TT> tables. The <TT>ON</TT>
clause indicates how the two tables are to be joined. Take the rows
from <TT>Follows</TT> and append the row from <TT>People</TT> where the
field <CODE>from_id</CODE> in <TT>Follows</TT> is the same the <TT>id</TT> value
in the <TT>People</TT> table.<BR>
</FONT><DIV ALIGN=center><FONT COLOR=black><IMG SRC="cfbook020.png"></FONT></DIV><FONT COLOR=black>
<BR>
The result of the JOIN is to create extra-long ``meta-rows'' which have both 
the fields from <TT>People</TT> and the matching fields from <TT>Follows</TT>.
Where there is more than one match between the <TT>id</TT> field from <TT>People</TT>
and the <CODE>from_id</CODE> from <TT>People</TT>, then JOIN creates a meta-row 
for <EM>each</EM> of the matching pairs of rows, duplicating data as needed.<BR>
<BR>
The following code demonstrates the data that we will have in the 
database after the multi-table Twitter spider program (above) has
been run several times.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import sqlite3

conn = sqlite3.connect('twdata.db')
cur = conn.cursor()

cur.execute('SELECT * FROM People')
count = 0
print 'People:'
for row in cur :
   if count &lt; 5: print row
   count = count + 1
print count, 'rows.'

cur.execute('SELECT * FROM Follows')
count = 0
print 'Follows:'
for row in cur :
   if count &lt; 5: print row
   count = count + 1
print count, 'rows.'

cur.execute('''SELECT * FROM Follows JOIN People 
    ON Follows.to_id = People.id WHERE Follows.from_id = 2''')
count = 0
print 'Connections for id=2:'
for row in cur :
   if count &lt; 5: print row
   count = count + 1
print count, 'rows.'

cur.close()
</FONT></PRE><FONT COLOR=black>In this program, we first dump out the <TT>People</TT>
and <TT>Follows</TT> and then dump out a subset of the
data in the tables joined together.<BR>
<BR>
Here is the output of the program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python twjoin.py 
People:
(1, u'drchuck', 1)
(2, u'opencontent', 1)
(3, u'lhawthorn', 1)
(4, u'steve_coppin', 0)
(5, u'davidkocher', 0)
295 rows.
Follows:
(1, 2)
(1, 3)
(1, 4)
(1, 5)
(1, 6)
300 rows.
Connections for id=2:
(2, 1, 1, u'drchuck', 1)
(2, 28, 28, u'cnxorg', 0)
(2, 30, 30, u'kthanos', 0)
(2, 102, 102, u'SomethingGirl', 0)
(2, 103, 103, u'ja_Pac', 0)
100 rows.
</FONT></PRE><FONT COLOR=black>You see the columns from the <TT>People</TT> and <TT>Follows</TT> tables and the last
set of rows is the result of the <TT>SELECT</TT> with the <TT>JOIN</TT> clause.<BR>
<BR>
In the last select, we are looking for accounts that are friends of 
``opencontent'' (i.e. <TT>People.id=2</TT>).<BR>
<BR>
In each of the ``meta-rows'' in the last select, the first two columns are
from the <TT>Follows</TT>
table followed by columns three through five from the <TT>People</TT> table. You can also
see that the second column (<CODE>Follows.to_id</CODE>) matches the third column
(<TT>People.id</TT>) in each of the joined-up ``meta-rows''.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Summary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc179">14.11</A>&nbsp;&nbsp;Summary</FONT></H2><!--SEC END -->

<FONT COLOR=black>This chapter has covered a lot of ground to give you an overview of the basics
of using a database in Python. It is more complicated to write the code to use 
a database to store data than Python dictionaries or flat files so there is 
little reason to use a database unless your application truly needs the capabilities
of a database. The situations where a database can be quite useful are: 
(1) when your application needs to make small many random updates within a large data set,
(2) when your data is so large it cannot fit in a dictionary and you need to 
look up information repeatedly, or
(3) you have a long-running process that you want to be able to stop 
and restart and retain the data from one run to the next.<BR>
<BR>
You can build a simple database with a single table to suit many application 
needs, but most problems will require several tables and links/relationships
between rows in different tables. When you start making links between 
tables, it is important to do some thoughtful design and follow the 
rules of database normalization to make the best use of the database's
capabilities. Since the primary motivation for using a database
is that you have a large amount of data to deal with, it is important
to model your data efficiently so your programs run as fast as possible.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Debugging</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc180">14.12</A>&nbsp;&nbsp;Debugging</FONT></H2><!--SEC END -->

<FONT COLOR=black>One common pattern when you are developing a Python program to connect to
an SQLite database will be to run a Python program and check the
results using the SQLite Database Browser. The browser allows you 
to quickly check to see if your program is working properly.<BR>
<BR>
You must be careful because SQLite takes care to keep two programs
from changing the same data at the same time. For example, if
you open a database in the browser and make a change to the database
and have not yet pressed the ``save'' button in the browser, the 
browser ``locks'' the database file and keeping any other program
from accessing the file. In particular, your Python program
will not be able to access the file if it is locked.<BR>
<BR>
So a solution is to make sure to either close the database browser 
or use the <B>File</B> menu to close the database in the browser
before you attempt to access the database from Python to avoid
the problem of your Python code failing because the database is
locked.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc181">14.13</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>attribute:</B></FONT><DD><FONT COLOR=black> One of the values within a tuple. More commonly
called a ``column'' or ``field''.
</FONT><A NAME="@default774"></A><BR>
<BR>
<DT><FONT COLOR=black><B>constraint:</B></FONT><DD><FONT COLOR=black> 
When we tell the database to enforce a rule on a field or a row
in a table. A common constraint is to insist that there can be no
duplicate values in a particular field (i.e. all the values must be unique).
</FONT><A NAME="@default775"></A><BR>
<BR>
<DT><FONT COLOR=black><B>cursor:</B></FONT><DD><FONT COLOR=black> A cursor allows you to execute SQL commands in a database
and retrieve data from the database. A cursor is similar to 
a socket or file handle for network connections and files respectively.
</FONT><A NAME="@default776"></A><BR>
<BR>
<DT><FONT COLOR=black><B>database browser:</B></FONT><DD><FONT COLOR=black> 
A piece of software that allows you to directly connect to a database 
and manipulate the database directly without writing a program.
</FONT><A NAME="@default777"></A><BR>
<BR>
<DT><FONT COLOR=black><B>foreign key:</B></FONT><DD><FONT COLOR=black> A numeric key that points to the primary key of 
a row in another table. Foreign keys establish relationships between rows
stored in different tables.
</FONT><A NAME="@default778"></A><BR>
<BR>
<DT><FONT COLOR=black><B>index:</B></FONT><DD><FONT COLOR=black> Additional data that the database software maintains as rows
are inserted into a table designed to make lookups very fast.
</FONT><A NAME="@default779"></A><BR>
<BR>
<DT><FONT COLOR=black><B>logical key:</B></FONT><DD><FONT COLOR=black> A key that the ``outside world'' uses to look up a particular
row. For example in a table of user accounts, a person's e-mail address
might be a good candidate as the logical key for the user's data. 
</FONT><A NAME="@default780"></A><BR>
<BR>
<DT><FONT COLOR=black><B>normalization:</B></FONT><DD><FONT COLOR=black> Designing a data model so that no data
is replicated. We store each item of data at one place in the database
and reference it elsewhere using a foreign key.
</FONT><A NAME="@default781"></A>
<A NAME="@default782"></A><BR>
<BR>
<DT><FONT COLOR=black><B>primary key:</B></FONT><DD><FONT COLOR=black> A numeric key assigned to each row that is used to 
refer to one row in a table from another table. Often the database
is configured to automatically assign primary keys as rows are inserted.
</FONT><A NAME="@default783"></A><BR>
<BR>
<DT><FONT COLOR=black><B>relation:</B></FONT><DD><FONT COLOR=black> An area within a database that contains tuples and 
attributes. More typically called a ``table''.
</FONT><A NAME="@default784"></A><BR>
<BR>
<DT><FONT COLOR=black><B>tuple:</B></FONT><DD><FONT COLOR=black> A single entry in a database table that is a set 
of attributes. More typically called ``row''.
</FONT><A NAME="@default785"></A></DL>
<!--BEGIN NOTES chapter-->
<HR WIDTH="50%" SIZE=1><DL><DT><FONT SIZE=5 COLOR=black><A NAME="note11" HREF="#text11">1</A></FONT><DD><FONT COLOR=black>SQLite actually does allow some 
flexibility in the type of data stored in a column,
but we will keep our data types strict in this chapter
so the concepts apply equally to other database systems 
such as MySQL.
</FONT><DT><FONT SIZE=5 COLOR=black><A NAME="note12" HREF="#text12">2</A></FONT><DD><FONT COLOR=black>In general, when a sentence starts 
with ``if all goes well'' you will find that the code needs
to use try/except.
</FONT></DL>
<!--END NOTES-->
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Automating common tasks on your computer</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc182">Chapter&nbsp;15</A>&nbsp;&nbsp;Automating common tasks on your computer</FONT></H1><!--SEC END -->

<FONT COLOR=black>We have been reading data from files, networks, services,
and databases. Python can also go through all of the 
directories and folders on your computers and read those files
as well.<BR>
<BR>
In this chapter, we will write programs that scan 
scan through your computer and 
perform some operation on each file. 
Files are organized into directories (also called ``folders'').
Simple Python scripts
can make short work of simple tasks that must be done to 
hundreds or thousands of files
spread across a directory tree or your entire computer.<BR>
<BR>
To walk through all the directories and files in a tree we use 
<TT>os.walk</TT> and a <TT>for</TT> loop. This is similar to how 
<TT>open</TT> allows us to write a loop to read the contents of a file,
<TT>socket</TT> allows us to write a loop to read the contents of a network connection, and
<TT>urllib</TT> allows us to open a web document and loop through its contents.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>File names and paths</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc183">15.1</A>&nbsp;&nbsp;File names and paths</FONT></H2><!--SEC END -->

<A NAME="paths"></A>
<A NAME="@default786"></A>
<A NAME="@default787"></A>
<A NAME="@default788"></A>
<A NAME="@default789"></A>
<FONT COLOR=black>Every running program has a ``current directory,'' which is the
default directory for most operations. 
For example, when you open a file for reading, Python looks for it in the
current directory.<BR>
<BR>
<A NAME="@default790"></A>
<A NAME="@default791"></A><BR>
<BR>
The <TT>os</TT> module provides functions for working with files and
directories (<TT>os</TT> stands for ``operating system''). <TT>os.getcwd</TT>
returns the name of the current directory:</FONT><BR>
<BR>
<A NAME="@default792"></A>
<A NAME="@default793"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; import os
&gt;&gt;&gt; cwd = os.getcwd()
&gt;&gt;&gt; print cwd
/Users/csev
</FONT></PRE><FONT COLOR=black><TT>cwd</TT> stands for <B>current working directory</B>. The result in
this example is <TT>/Users/csev</TT>, which is the home directory of a
user named <TT>csev</TT>.<BR>
<BR>
<A NAME="@default794"></A>
<A NAME="@default795"></A><BR>
<BR>
A string like <TT>cwd</TT> that identifies a file is called a path.
A <B>relative path</B> starts from the current directory;
an <B>absolute path</B> starts from the topmost directory in the
file system.<BR>
<BR>
<A NAME="@default796"></A>
<A NAME="@default797"></A>
<A NAME="@default798"></A>
<A NAME="@default799"></A><BR>
<BR>
The paths we have seen so far are simple file names, so they are
relative to the current directory. To find the absolute path to
a file, you can use <TT>os.path.abspath</TT>:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; os.path.abspath('memo.txt')
'/Users/csev/memo.txt'
</FONT></PRE><FONT COLOR=black><TT>os.path.exists</TT> checks
whether a file or directory exists:</FONT><BR>
<BR>
<A NAME="@default800"></A>
<A NAME="@default801"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; os.path.exists('memo.txt')
True
</FONT></PRE><FONT COLOR=black>If it exists, <TT>os.path.isdir</TT> checks whether it's a directory:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; os.path.isdir('memo.txt')
False
&gt;&gt;&gt; os.path.isdir('music')
True
</FONT></PRE><FONT COLOR=black>Similarly, <TT>os.path.isfile</TT> checks whether it's a file.<BR>
<BR>
<TT>os.listdir</TT> returns a list of the files (and other directories)
in the given directory:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; os.listdir(cwd)
['music', 'photos', 'memo.txt']
</FONT></PRE>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Example: Cleaning up a photo directory</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc184">15.2</A>&nbsp;&nbsp;Example: Cleaning up a photo directory</FONT></H2><!--SEC END -->

<FONT COLOR=black>Some time ago, I built a bit of Flickr-like software that 
received photos from my cell phone and stored those photos
on my server. I wrote this before Flickr existed and kept 
using it after Flickr existed because
I wanted to keep original copies of my images forever.<BR>
<BR>
I would also send a simple one-line text description in the MMS message
or the subject line of the e-mail message. I stored these messages
in a text file in the same directory as the image file. I came up 
with a directory structure based on the month, year, day and time the 
photo was taken. The following would be an example of the naming for 
one photo and its existing description:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
./2006/03/24-03-06_2018002.jpg
./2006/03/24-03-06_2018002.txt
</FONT></PRE><FONT COLOR=black>After seven years, I had a lot of photos and captions. Over the years
as I switched cell phones, sometimes my code to extract the caption from the message 
would break and add a bunch of useless data on my server instead of a caption. <BR>
<BR>
I wanted to go through these files and figure out which of the 
text files were really captions and which were junk and then delete the bad
files. The first thing to do was to get a simple inventory of 
how many text files I had in of the sub-folders
using the following program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import os
count = 0
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           count = count + 1
print 'Files:', count

python txtcount.py
Files: 1917
</FONT></PRE><FONT COLOR=black>The key bit of code that makes this possible is the <TT>os.walk</TT>
library in Python. When we call <TT>os.walk</TT> and give it a starting
directory, it will ``walk'' through all of the directories 
and sub-directories recursively. The string ``.'' indicates
to start in the current directory and walk downward.
As it encounters each directory,
we get three values in a tuple in the body of the <TT>for</TT> loop. 
The first value is the current
directory name, the second value is the list of sub-directories 
in the current directory, and the third value is a list of files
in the current directory.<BR>
<BR>
We do not have to explicitly look into each of the sub-directories
because we can count on <TT>os.walk</TT> to visit every 
folder eventually. But we do want to look at each file, so 
we write a simple <TT>for</TT> loop to examine each of the files 
in the current directory. We check each file to see if 
it ends with ``.txt'' and then count the number of 
files through the whole directory tree that end with the
suffix ``.txt''.<BR>
<BR>
Once we have a sense of how many files end with ``.txt'', the next
thing to do is try to automatically
determine in Python which files are bad and which files
are good. So we write a simple program to print out the
files and the size of each file:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import os
from os.path import join
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           thefile = os.path.join(dirname,filename)
           print os.path.getsize(thefile), thefile
</FONT></PRE><FONT COLOR=black>Now instead of just counting the files, we create 
a file name by concatenating the directory name with
the name of the file within the directory using
<TT>os.path.join</TT>. It is important to use 
<TT>os.path.join</TT> instead of string concatenation 
because on Windows we use a backslash
(<CODE>\</CODE>) to construct file paths and on Linux
or Apple we use a forward slash (<CODE>/</CODE>) 
to construct file paths. The <TT>os.path.join</TT>
knows these differences and knows what system
we are running on and it does the proper concatenation
depending on the system. So the same Python code
runs on either Windows or UNIX-style systems.<BR>
<BR>
Once we have the full file name with directory
path, we use the <TT>os.path.getsize</TT> utility
to get the size and print it out, producing the 
following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python txtsize.py
...
18 ./2006/03/24-03-06_2303002.txt
22 ./2006/03/25-03-06_1340001.txt
22 ./2006/03/25-03-06_2034001.txt
...
2565 ./2005/09/28-09-05_1043004.txt
2565 ./2005/09/28-09-05_1141002.txt
...
2578 ./2006/03/27-03-06_1618001.txt
2578 ./2006/03/28-03-06_2109001.txt
2578 ./2006/03/29-03-06_1355001.txt
...
</FONT></PRE><FONT COLOR=black>Scanning the output, we notice that some files are pretty short and 
a lot of the files are pretty large and the same size (2578 and 2565). 
When we take a look at a few of these larger files by hand, 
it looks like the large 
files are nothing but a generic bit of identical HTML that came 
in from mail sent to my system from my T-Mobile phone:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
&lt;html&gt;
        &lt;head&gt;
                &lt;title&gt;T-Mobile&lt;/title&gt;
...
</FONT></PRE><FONT COLOR=black>Skimming through the file, it looks like there is no good information
in these files so we can probably delete them.<BR>
<BR>
But before we delete the files, we will write a program to look for files
that are more than one line long and show the contents of the file.
We will not bother showing ourselves those files that are exactly
2578 or 2565 characters long since we know that these files have no useful
information.<BR>
<BR>
So we write the following program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import os
from os.path import join
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           thefile = os.path.join(dirname,filename)
           size = os.path.getsize(thefile)
           if size == 2578 or size == 2565:
               continue
           fhand = open(thefile,'r')
           lines = list()
           for line in fhand:
               lines.append(line)
           fhand.close()
           if len(lines) &gt; 1:
                print len(lines), thefile
                print lines[:4]
</FONT></PRE><FONT COLOR=black>We use a <TT>continue</TT> to skip files with the two 
``bad sizes'', then open the rest of the files
and read the lines of the file into a Python list
and if the file has more than one line we print
out how many lines are in the file and print out
the first three lines.<BR>
<BR>
It looks like filtering out those two bad file sizes, and assuming
that all one-line files are correct, we are down to some pretty clean
data:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python txtcheck.py 
3 ./2004/03/22-03-04_2015.txt
['Little horse rider\r\n', '\r\n', '\r']
2 ./2004/11/30-11-04_1834001.txt
['Testing 123.\n', '\n']
3 ./2007/09/15-09-07_074202_03.txt
['\r\n', '\r\n', 'Sent from my iPhone\r\n']
3 ./2007/09/19-09-07_124857_01.txt
['\r\n', '\r\n', 'Sent from my iPhone\r\n']
3 ./2007/09/20-09-07_115617_01.txt
...
</FONT></PRE><FONT COLOR=black>But there is one more annoying pattern of files: 
there are some three-line files that consist of
two blank lines followed by a line that says
``Sent from my iPhone'' that have slipped 
into my data. So we make the following change
to the program to deal with these files as well.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
           lines = list()
           for line in fhand:
               lines.append(line)
           if len(lines) == 3 and lines[2].startswith('Sent from my iPhone'):
               continue
           if len(lines) &gt; 1:
                print len(lines), thefile
                print lines[:4]
</FONT></PRE><FONT COLOR=black>We simply check if we have a three-line file, and if the third 
line starts with the specified text, we skip it.<BR>
<BR>
Now when we run the program, we only see four remaining 
multi-line files and all of those files look pretty reasonable:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python txtcheck2.py 
3 ./2004/03/22-03-04_2015.txt
['Little horse rider\r\n', '\r\n', '\r']
2 ./2004/11/30-11-04_1834001.txt
['Testing 123.\n', '\n']
2 ./2006/03/17-03-06_1806001.txt
['On the road again...\r\n', '\r\n']
2 ./2006/03/24-03-06_1740001.txt
['On the road again...\r\n', '\r\n']
</FONT></PRE><FONT COLOR=black>If you look at the overall pattern of this program,
we have successively refined how we accept or reject
files and once we found a pattern that was ``bad'' we used
<TT>continue</TT> to skip the bad files so we could refine
our code to find more file patterns that were bad.<BR>
<BR>
Now we are getting ready to delete the files, so 
we are going to flip the logic and instead of printing out 
the remaining good files, we will print out the ``bad''
files that we are about to delete.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import os
from os.path import join
for (dirname, dirs, files) in os.walk('.'):
   for filename in files:
       if filename.endswith('.txt') :
           thefile = os.path.join(dirname,filename)
           size = os.path.getsize(thefile)
           if size == 2578 or size == 2565:
               print 'T-Mobile:',thefile
               continue
           fhand = open(thefile,'r')
           lines = list()
           for line in fhand:
               lines.append(line)
           fhand.close()
           if len(lines) == 3 and lines[2].startswith('Sent from my iPhone'):
               print 'iPhone:', thefile
               continue
</FONT></PRE><FONT COLOR=black>We can now see a list of candidate files that we are about
to delete and why these files are up for deleting.
The program produces the following output:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python txtcheck3.py
...
T-Mobile: ./2006/05/31-05-06_1540001.txt
T-Mobile: ./2006/05/31-05-06_1648001.txt
iPhone: ./2007/09/15-09-07_074202_03.txt
iPhone: ./2007/09/15-09-07_144641_01.txt
iPhone: ./2007/09/19-09-07_124857_01.txt
...
</FONT></PRE><FONT COLOR=black>We can spot-check these files to make sure that we did not inadvertently
end up introducing a bug in our program or perhaps our logic 
caught some files we did not want to catch.<BR>
<BR>
Once we are satisfied that this is the list of files we want to delete,
we make the following change to the program:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
           if size == 2578 or size == 2565:
               print 'T-Mobile:',thefile
               os.remove(thefile)
               continue
...
           if len(lines) == 3 and lines[2].startswith('Sent from my iPhone'):
               print 'iPhone:', thefile
               os.remove(thefile)
               continue
</FONT></PRE><FONT COLOR=black>In this version of the program, we will both print the file out 
and remove the bad files
using <TT>os.remove</TT>.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python txtdelete.py 
T-Mobile: ./2005/01/02-01-05_1356001.txt
T-Mobile: ./2005/01/02-01-05_1858001.txt
...
</FONT></PRE><FONT COLOR=black>Just for fun, run the program a second time and it will produce no output
since the bad files are already gone.<BR>
<BR>
If we rerun <TT>txtcount.py</TT> we can see that we have removed
899 bad files:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python txtcount.py 
Files: 1018
</FONT></PRE><FONT COLOR=black>In this section, we have followed a sequence where we use Python 
to first look through directories and files seeking
patterns. We slowly use Python to help determine what we 
want to do to clean up our directories. Once we
figure out which files are good and which files are 
not useful, we use Python to delete the files and 
perform the cleanup.<BR>
<BR>
The problem you may need to solve can either be quite simple 
and might only depend on looking at the names of files,
or perhaps you need to read every single file and
look for patterns within the files. Sometimes 
you will need to read all the files and make a change 
to some of the files. All of these are pretty 
straightforward once you understand how <TT>os.walk</TT>
and the other <TT>os</TT> utilities can be used.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Command line arguments</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc185">15.3</A>&nbsp;&nbsp;Command line arguments</FONT></H2><!--SEC END -->

<A NAME="@default802"></A>
<FONT COLOR=black>In earlier chapters, we had a number of programs that prompted
for a file name using <CODE>raw_input</CODE> and then read data 
from the file and processed the data as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
name = raw_input('Enter file:')
handle = open(name, 'r')
text = handle.read()
...
</FONT></PRE><FONT COLOR=black>We can simplify this program a bit by taking the file name
from the command line when we start Python. Up to now,
we simply run our Python programs and respond to the 
prompts as as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python words.py
Enter file: mbox-short.txt
...
</FONT></PRE><FONT COLOR=black>We can place additional strings after the Python file and access
those <B>command line arguments</B> in our Python program. Here is a simple program 
that demonstrates reading arguments from the command line:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import sys
print 'Count:', len(sys.argv)
print 'Type:', type(sys.argv)
for arg in sys.argv:
   print 'Argument:', arg
</FONT></PRE><FONT COLOR=black>The contents of <TT>sys.argv</TT> are a list of strings where the first string
is the name of the Python program and the remaining strings are the arguments
on the command line after the Python file.<BR>
<BR>
The following shows our program reading several command line arguments from the command
line:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python argtest.py hello there
Count: 3
Type: &lt;type 'list'&gt;
Argument: argtest.py
Argument: hello
Argument: there
</FONT></PRE><FONT COLOR=black>There are three arguments are passed into our program as a three-element list. 
The first element of the list is the file name (argtest.py) and the others are 
the two command line arguments after the file name.<BR>
<BR>
We can rewrite our program to read the file, taking the file name 
from the command line argument as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
import sys

name = sys.argv[1]
handle = open(name, 'r')
text = handle.read()
print name, 'is', len(text), 'bytes'
</FONT></PRE><FONT COLOR=black>We take the second command line argument as the name of the file (skipping past
the program name in the <TT>[0]</TT> entry). We open the file and read 
the contents as follows:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
python argfile.py mbox-short.txt
mbox-short.txt is 94626 bytes
</FONT></PRE><FONT COLOR=black>Using command line arguments as input can make it easier to reuse your Python programs 
especially when you only need to input one or two strings.</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Pipes</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc186">15.4</A>&nbsp;&nbsp;Pipes</FONT></H2><!--SEC END -->

<A NAME="@default803"></A>
<A NAME="@default804"></A>
<FONT COLOR=black>Most operating systems provide a command-line interface,
also known as a <B>shell</B>. Shells usually provide commands
to navigate the file system and launch applications. For
example, in Unix, you can change directories with <TT>cd</TT>,
display the contents of a directory with <TT>ls</TT>, and launch
a web browser by typing (for example) <TT>firefox</TT>.<BR>
<BR>
<A NAME="@default805"></A>
<A NAME="@default806"></A><BR>
<BR>
Any program that you can launch from the shell can also be
launched from Python using a <B>pipe</B>. A pipe is an object
that represents a running process.<BR>
<BR>
For example, the Unix command<SUP><A NAME="text13" HREF="#note13">1</A></SUP>
<TT>ls -l</TT> normally displays the
contents of the current directory (in long format). You can
launch <TT>ls</TT> with <TT>os.popen</TT>:</FONT><BR>
<BR>
<A NAME="@default807"></A>
<A NAME="@default808"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; cmd = 'ls -l'
&gt;&gt;&gt; fp = os.popen(cmd)
</FONT></PRE><FONT COLOR=black>The argument is a string that contains a shell command. The
return value is a file pointer that behaves just like an open
file. You can read the output from the <TT>ls</TT> process one
line at a time with <TT>readline</TT> or get the whole thing at
once with <TT>read</TT>:</FONT><BR>
<BR>
<A NAME="@default809"></A>
<A NAME="@default810"></A>
<A NAME="@default811"></A>
<A NAME="@default812"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; res = fp.read()
</FONT></PRE><FONT COLOR=black>When you are done, you close the pipe like a file:</FONT><BR>
<BR>
<A NAME="@default813"></A>
<A NAME="@default814"></A>
<PRE><FONT SIZE=4 COLOR=blue>
&gt;&gt;&gt; stat = fp.close()
&gt;&gt;&gt; print stat
None
</FONT></PRE><FONT COLOR=black>The return value is the final status of the <TT>ls</TT> process;
<TT>None</TT> means that it ended normally (with no errors).</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Glossary</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc187">15.5</A>&nbsp;&nbsp;Glossary</FONT></H2><!--SEC END -->

<DL COMPACT=compact><DT><FONT COLOR=black><B>absolute path:</B></FONT><DD><FONT COLOR=black> A string that describes where a file or
directory is stored that starts at the ``top of the tree of directories''
so that it can be used to access the file or directory, regardless
of the current working directory.
</FONT><A NAME="@default815"></A><BR>
<BR>
<DT><FONT COLOR=black><B>checksum:</B></FONT><DD><FONT COLOR=black> See also <B>hashing</B>. The term ``checksum'' 
comes from the need to verify if data was garbled as it was 
sent across a network or written to a backup medium and then
read back in. When the data is written or sent, the sending system
computes a checksum and also sends the checksum. When the 
data is read or received, the receiving system re-computes
the checksum from the received data and compares it to the 
received checksum. If the checksums do not match, we must
assume that the data was garbled as it was transferred.
</FONT><A NAME="@default816"></A><BR>
<BR>
<DT><FONT COLOR=black><B>command line argument:</B></FONT><DD><FONT COLOR=black> Parameters on the command line after the Python file name.</FONT><BR>
<BR>
<DT><FONT COLOR=black><B>current working directory:</B></FONT><DD><FONT COLOR=black> The current directory that you 
are ``in''. You can change your working directory using the 
<TT>cd</TT> command on most systems in their command-line interfaces.
When you open a file in Python using just the file name with no path 
information the file must be in the current working directory
where you are running the program.
</FONT><A NAME="@default817"></A>
<A NAME="@default818"></A>
<A NAME="@default819"></A><BR>
<BR>
<DT><FONT COLOR=black><B>hashing:</B></FONT><DD><FONT COLOR=black> Reading through a potentially large amount of data
and producing a unique checksum for the data. The best hash functions
produce very few ``collisions'' where you can give two different
streams of data to the hash function and get back the same hash. 
MD5, SHA1, and SHA256 are examples of commonly used hash functions.
</FONT><A NAME="@default820"></A><BR>
<BR>
<DT><FONT COLOR=black><B>pipe:</B></FONT><DD><FONT COLOR=black> A pipe is a connection to a running program. Using
a pipe, you can write a program to send data to another program
or receive data from that program. A pipe is similar to a 
<B>socket</B> except that a pipe can only be used to 
connect programs running on the same computer (i.e. not
across a network).
</FONT><A NAME="@default821"></A><BR>
<BR>
<DT><FONT COLOR=black><B>relative path:</B></FONT><DD><FONT COLOR=black> A string that describes where a file or
directory is stored relative to the current working 
directory.
</FONT><A NAME="@default822"></A><BR>
<BR>
<DT><FONT COLOR=black><B>shell:</B></FONT><DD><FONT COLOR=black> A command-line interface to an operating system.
Also called a ``terminal program'' in some systems. In this interface
you type a command and parameters on a line and press ``enter''
to execute the command.
</FONT><A NAME="@default823"></A><BR>
<BR>
<DT><FONT COLOR=black><B>walk:</B></FONT><DD><FONT COLOR=black> A term we use to describe the notion of visiting
the entire tree of directories, sub-directories, sub-sub-directories, 
until we have visited the all of the directories. We call this
``walking the directory tree''.
</FONT><A NAME="@default824"></A></DL>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Exercises</FONT></FONT>-->

<H2><FONT COLOR=black><A NAME="htoc188">15.6</A>&nbsp;&nbsp;Exercises</FONT></H2><!--SEC END -->
<BR>
<DIV ALIGN=left><FONT COLOR=black><B>Exercise&nbsp;1</B>&nbsp;&nbsp;
<A NAME="checksum"></A><BR>
<BR>
<A NAME="@default825"></A><BR>
<BR>
<EM>In a large collection of MP3 files there may be more than one
copy of the same song, stored in different directories or with
different file names. The goal of this exercise is to search for
these duplicates.
</EM></FONT><OL type=1><LI><FONT COLOR=black><EM>Write a program that walks a directory and all of its
sub-directories for all files with a given suffix (like <TT>.mp3</TT>)
and lists pairs of files with that are the same size.
Hint: Use a dictionary where the key of the dictionary is the size
of the file from <TT>os.path.getsize</TT> and the value in the 
dictionary is the path name concatenated with the file name. 
As you encounter each file check to see if you already have a
file that has the same size as the current file. 
If so, you have a duplicate
size file and print out the file size and the two files names 
(one from the hash and the other file you are looking at).</EM></FONT><BR>
<BR>
<A NAME="@default826"></A>
<A NAME="@default827"></A>
<A NAME="@default828"></A>
<A NAME="@default829"></A><BR>
<BR>
<LI><FONT COLOR=black><EM>Adapt the previous program to look for files that 
have duplicate content using a hashing or <B>checksum</B>
algorithm. For example,
MD5 (Message-Digest algorithm 5) takes an arbitrarily-long
``message'' and returns a 128-bit ``checksum.'' The probability
is very small that two files with different contents will
return the same checksum.<BR>
<BR>
You can read about MD5 at <TT>wikipedia.org/wiki/Md5</TT>. The 
following code snippet opens a file, reads it and computes
its checksum.
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
import hashlib 
...
           fhand = open(thefile,'r')
           data = fhand.read()
           fhand.close()
           checksum = hashlib.md5(data).hexdigest()
</EM></FONT></PRE><FONT COLOR=black><EM>You should create a dictionary where the checksum is the key 
and the file name is the value. When you compute a checksum
and it is already in the dictionary as a key, you have two files with 
duplicate content so print out the file in the dictionary
and the file you just read. Here is some sample output
from a run in a folder of image files:
</EM></FONT><PRE><FONT SIZE=4 COLOR=blue><EM>
./2004/11/15-11-04_0923001.jpg ./2004/11/15-11-04_1016001.jpg
./2005/06/28-06-05_1500001.jpg ./2005/06/28-06-05_1502001.jpg
./2006/08/11-08-06_205948_01.jpg ./2006/08/12-08-06_155318_02.jpg
</EM></FONT></PRE><FONT COLOR=black><EM>Apparently I sometimes sent the same photo more than once 
or made a copy of a photo from time to time without deleting
the original.</EM></FONT></OL></DIV><BR>
<!--BEGIN NOTES chapter-->
<HR WIDTH="50%" SIZE=1><DL><DT><FONT SIZE=5 COLOR=black><A NAME="note13" HREF="#text13">1</A></FONT><DD><FONT COLOR=black>When using pipes to talk 
to operating system commands like <TT>ls</TT>, it is important 
for you to know which operating system you are using and only
open pipes to commands that are supported on your operating system.
</FONT></DL>
<!--END NOTES-->
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Python Programming on Windows</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc189">Appendix&nbsp;A</A>&nbsp;&nbsp;Python Programming on Windows</FONT></H1><!--SEC END -->

<FONT COLOR=black>In this appendix, we walk through a series of steps
so you can run Python on Windows. There are many different 
approaches you can take, and this is just one
approach to keep things simple.<BR>
<BR>
First, you need to install a programmer editor. You
do not want to use Notepad or Microsoft Word to edit
Python programs. Programs must be in "flat-text" files
and so you need an editor that is good at
editing text files.<BR>
<BR>
Our recommended editor for Windows is NotePad++ which
can be downloaded and installed from:<BR>
<BR>
<TT>http://sourceforge.net/projects/notepad-plus/files/</TT><BR>
<BR>
Then download a recent version of Python 2 from the
<TT>www.python.org</TT> web site.<BR>
<BR>
<TT>http://www.python.org/download/releases/2.7.5/</TT><BR>
<BR>
Once you have installed Python, you should have a new
folder on your computer like <TT>C:Python27</TT>.<BR>
<BR>
To create a Python program, run NotePad++ from the Start Menu
and save the file with a suffix of ``.py''. For this
exercise, put a folder on your Desktop named 
<TT>py4inf</TT>. It is best to keep your folder names short
and not to have any spaces in your folder or file name.<BR>
<BR>
Lets make our first Python program be:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
print 'Hello Chuck'
</FONT></PRE><FONT COLOR=black>Except that you should change it to be your name. Lets
save the file into <TT>Desktoppy4infprog1.py</TT>.<BR>
<BR>
The run the command line. Different versions of Windows
do this differently:
</FONT><UL><LI>
<FONT COLOR=black>Windows Vista and Windows-7: Press <B>Start</B>
and then in the command search window enter the word
<TT>command</TT> and press enter.</FONT><BR>
<BR>
<LI><FONT COLOR=black>Windows-XP: Press <B>Start</B>, then <B>Run</B>, and 
then enter <TT>cmd</TT> in the dialog box and press <B>OK</B>.
</FONT></UL>
<FONT COLOR=black>You will find yourself in a text window with a prompt that
tells you what folder you are currently ``in''. <BR>
<BR>
Windows Vista and Windows-7: <TT>C:Userscsev</TT><BR>
Windows XP: <TT>C:Documents and Settingscsev</TT><BR>
<BR>
This is your ``home directory''. Now we need to move into 
the folder where you have saved your Python program using
the following commands:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
C:\Users\csev\&gt; cd Desktop
C:\Users\csev\Desktop&gt; cd py4inf
</FONT></PRE><FONT COLOR=black>Then type 
</FONT><PRE><FONT SIZE=4 COLOR=blue>
C:\Users\csev\Desktop\py4inf&gt; dir 
</FONT></PRE><FONT COLOR=black>To list your files. You should see the <TT>prog1.py</TT> when 
you type the <TT>dir</TT> command.<BR>
<BR>
To run your program, simply type the name of your file at the 
command prompt and press enter.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
C:\Users\csev\Desktop\py4inf&gt; prog1.py
Hello Chuck
C:\Users\csev\Desktop\py4inf&gt; 
</FONT></PRE><FONT COLOR=black>You can edit the file in NotePad++, save it and then switch back
to the command line and execute the program again by typing
the file name again at the command line prompt.<BR>
<BR>
If you get confused in the command line window - just close it
and start a new one.<BR>
<BR>
Hint: You can also press the ``up-arrow'' in the command line to 
scroll back and run a previously entered command again.<BR>
<BR>
You should also look in the preferences for NotePad++ and set it 
to expand tab characters to be four spaces. It will save you lots
of effort looking for indentation errors.<BR>
<BR>
You can also find further information on editing and running 
Python programs at <TT>www.py4inf.com</TT>.</FONT><BR>
<BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Python Programming on Macintosh</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc190">Appendix&nbsp;B</A>&nbsp;&nbsp;Python Programming on Macintosh</FONT></H1><!--SEC END -->

<FONT COLOR=black>In this appendix, we walk through a series of steps
so you can run Python on Macintosh. Since Python is
already included in the Macintosh Operating system, we need to 
learn how to edit Python files and run Python programs
in the terminal window.<BR>
<BR>
There approaches you can take to editing and running
Python programs, and this is just one
approach we have found to be very simple.<BR>
<BR>
First, you need to install a programmer editor. You
do not want to use TextEdit or Microsoft Word to edit
Python programs. Programs must be in "flat-text" files
and so you need an editor that is good at
editing text files.<BR>
<BR>
Our recommended editor for Macintosh is TextWrangler which
can be downloaded and installed from:<BR>
<BR>
<TT>http://www.barebones.com/products/TextWrangler/</TT><BR>
<BR>
To create a Python program, run from 
<B>TextWrangler</B> from your <B>Applications</B> folder.<BR>
<BR>
Lets make our first Python program be:
</FONT><PRE><FONT SIZE=4 COLOR=blue>
print 'Hello Chuck'
</FONT></PRE><FONT COLOR=black>Except that you should change it to be your name. 
Lets save the file in a folder on your Desktop named 
<TT>py4inf</TT>. It is best to keep your folder names short
and not to have any spaces in your folder or file name.
Once you have made the folder, save the file 
into <TT>Desktoppy4infprog1.py</TT>.<BR>
<BR>
The run the <B>Terminal</B> program. The easiest way is to 
press the Spotlight icon (the magnifying glass) in the upper
right of your screen and enter ``terminal'' and launch the
application that comes up.<BR>
<BR>
You start in your ``home directory''. You can see the current 
directory by typing the <TT>pwd</TT> command in the terminal window.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
67-194-80-15:~ csev$ pwd
/Users/csev
67-194-80-15:~ csev$ 
</FONT></PRE><FONT COLOR=black>We must be in the folder that contains your Python program 
to run the program. We user the <TT>cd</TT> command to move to a new 
folder and then the <TT>ls</TT> command to list the files in the 
folder.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
67-194-80-15:~ csev$ cd Desktop
67-194-80-15:Desktop csev$ cd py4inf
67-194-80-15:py4inf csev$ ls
prog1.py
67-194-80-15:py4inf csev$ 
</FONT></PRE><FONT COLOR=black>To run your program, simply type the <TT>python</TT> command followed
by the name of your file at the 
command prompt and press enter.
</FONT><PRE><FONT SIZE=4 COLOR=blue>
67-194-80-15:py4inf csev$ python prog1.py
Hello Chuck
67-194-80-15:py4inf csev$ 
</FONT></PRE><FONT COLOR=black>You can edit the file in TextWrangler, save it and then switch back
to the command line and execute the program again by typing
the file name again at the command line prompt.<BR>
<BR>
If you get confused in the command line window - just close it
and start a new one.<BR>
<BR>
Hint: You can also press the ``up-arrow'' in the command line to 
scroll back and run a previously entered command again.<BR>
<BR>
You should also look in the preferences for TextWrangler and set it 
to expand tab characters to be four spaces. It will save you lots
of effort looking for indentation errors.<BR>
<BR>
You can also find further information on editing and running 
Python programs at <TT>www.py4inf.com</TT>.</FONT><BR>
<BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Contributor List</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc191">Appendix&nbsp;C</A>&nbsp;&nbsp;Contributor List</FONT></H1><!--SEC END -->

<!--TOC section <FONT COLOR=black><FONT SIZE=3>Contributor List for ``Python for Informatics''</FONT></FONT>-->

<H2><FONT COLOR=black>Contributor List for ``Python for Informatics''</FONT></H2><!--SEC END -->

<FONT COLOR=black>Bruce Shields for copy editing early drafts,
Sarah Hegge,
Steven Cherry,
Sarah Kathleen Barbarow,
Andrea Parker,
Radaphat Chongthammakun,
Megan Hixon,
Kirby Urner,
Sarah Kathleen Barbrow,
Katie Kujala,
Noah Botimer,
Emily Alinder,
Mark Thompson-Kular,
James Perry,
Eric Hofer,
Eytan Adar,
Peter Robinson,
Deborah J. Nelson,
Jonathan C. Anthony,
Eden Rassette,
Jeannette Schroeder,
Justin Feezell,
Chuanqi Li,
Gerald Gordinier,
Gavin Thomas Strassel,
Ryan Clement,
Alissa Talley,
Caitlin Holman,
Yong-Mi Kim,
Karen Stover,
Cherie Edmonds,
Maria Seiferle,
Romer Kristi D. Aranas (RK),</FONT><BR>
<BR>
<!--TOC section <FONT COLOR=black><FONT SIZE=3>Contributor List for ``Think Python''</FONT></FONT>-->

<H2><FONT COLOR=black>Contributor List for ``Think Python''</FONT></H2><!--SEC END -->

<A NAME="@default830"></A>
<FONT COLOR=black>(Allen B. Downey)<BR>
<BR>
More than 100 sharp-eyed and thoughtful readers have sent in
suggestions and corrections over the past few years. Their
contributions, and enthusiasm for this project, have been a
huge help.<BR>
<BR>
For the detail on the nature of each of the contributions from
these individuals, see the ``Think Python'' text.<BR>
<BR>
Lloyd Hugh Allen,
Yvon Boulianne,
Fred Bremmer,
Jonah Cohen,
Michael Conlon,
Benoit Girard,
Courtney Gleason and Katherine Smith,
Lee Harr,
James Kaylin,
David Kershaw,
Eddie Lam,
Man-Yong Lee,
David Mayo,
Chris McAloon,
Matthew J. Moelter,
Simon Dicon Montford,
John Ouzts,
Kevin Parks,
David Pool,
Michael Schmitt,
Robin Shaw,
Paul Sleigh,
Craig T. Snydal,
Ian Thomas,
Keith Verheyden,
Peter Winstanley,
Chris Wrobel,
Moshe Zadka,
Christoph Zwerschke,
James Mayer,
Hayden McAfee,
Angel Arnal,
Tauhidul Hoque and Lex Berezhny,
Dr. Michele Alzetta,
Andy Mitchell,
Kalin Harvey,
Christopher P. Smith,
David Hutchins,
Gregor Lingl,
Julie Peters,
Florin Oprina,
D.&nbsp;J.&nbsp;Webre,
Ken,
Ivo Wever,
Curtis Yanko,
Ben Logan,
Jason Armstrong,
Louis Cordier,
Brian Cain,
Rob Black,
Jean-Philippe Rey at Ecole Centrale Paris,
Jason Mader at George Washington University made a number
Jan Gundtofte-Bruun,
Abel David and Alexis Dinno,
Charles Thayer,
Roger Sperberg,
Sam Bull,
Andrew Cheung,
C. Corey Capel,
Alessandra,
Wim Champagne,
Douglas Wright,
Jared Spindor,
Lin Peiheng,
Ray Hagtvedt,
Torsten Hbsch,
Inga Petuhhov,
Arne Babenhauserheide,
Mark E. Casida,
Scott Tyler,
Gordon Shephard,
Andrew Turner,
Adam Hobart,
Daryl Hammond and Sarah Zimmerman,
George Sass,
Brian Bingham,
Leah Engelbert-Fenton,
Joe Funke,
Chao-chao Chen,
Jeff Paine,
Lubos Pintes,
Gregg Lind and Abigail Heithoff,
Max Hailperin,
Chotipat Pornavalai,
Stanislaw Antol,
Eric Pashman,
Miguel Azevedo,
Jianhua Liu,
Nick King,
Martin Zuther,
Adam Zimmerman,
Ratnakar Tiwari,
Anurag Goel,
Kelli Kratzer,
Mark Griffiths,
Roydan Ongie,
Patryk Wolowiec,
Mark Chonofsky,
Russell Coleman,
Wei Huang,
Karen Barber,
Nam Nguyen,
Stphane Morin,
and
Paul Stoop.</FONT><BR>
<BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Copyright Detail</FONT></FONT>-->

<H1><FONT COLOR=black><A NAME="htoc192">Appendix&nbsp;D</A>&nbsp;&nbsp;Copyright Detail</FONT></H1><!--SEC END -->

<FONT COLOR=black>This work is licensed under a 
Creative Common
Attribution-NonCommercial-ShareAlike 3.0 Unported License.
This license is 
available at
<TT>creativecommons.org/licenses/by-nc-sa/3.0/</TT>. <BR>
<BR>
I would have preferred to license the book under the less 
restrictive CC-BY-SA license. But unfortunately there are
a few unscrupulous
organizations who search for and find freely licensed books,
and then publish and sell virtually unchanged copies of the books on a 
print on demand service such as LuLu or CreateSpace. CreateSpace
has (thankfully) added a policy that gives the wishes of the actual 
copyright holder preference over a non-copyright holder attempting 
to publish a freely licensed work. Unfortunately there are many 
print-on-demand services and very few have as well-considered a policy 
as CreateSpace.<BR>
<BR>
Regretfully, I added the NC element to the license
this book to give me recourse in case someone tries to clone this 
book and sell it commercially. Unfortunately, adding NC limits uses
of this material that I would like to permit. So I have added this 
section of the document to describe specific situations where 
I am giving my permission in advance to use the material in this book
in situations that some might consider commercial.
</FONT><UL><LI>
<FONT COLOR=black>If you are printing a limited number of copies of all or part of 
this book for use in a course (e.g. like a coursepack), then 
you are granted CC-BY license to these materials for that purpose.</FONT><BR>
<BR>
<LI><FONT COLOR=black>If you translate this book into a language other than English, then 
you are granted a CC-BY-SA license to these materials with respect to 
the publication of your translation. In particular you are permitted 
to sell the resulting translated book commercially. 
</FONT></UL>
<FONT COLOR=black>If you are intending to translate the book, you may want to contact me
so we can make sure that you have all of the related course materials so 
you can translate them as well.<BR>
<BR>
Of course, you are welcome to contact me and ask for permission if these
clauses are not sufficient. In all cases, permission to reuse and
remix this material will be granted as long as there is clear added value
or benefit to students or teachers that will accrue as a result of the 
new work.<BR>
<BR>
Charles Severance<BR>
www.dr-chuck.com<BR>
Ann Arbor, MI, USA<BR>
September 9, 2013</FONT><BR>
<BR>
<!--TOC chapter <FONT COLOR=black><FONT SIZE=3>Index</FONT></FONT>-->

<H1><FONT COLOR=black>Index</FONT></H1><!--SEC END -->


<TABLE CELLSPACING=2 CELLPADDING=0>
<TR><TD VALIGN=top ALIGN=left><UL><LI>
<FONT COLOR=black>API, <A HREF="#@default758">13.7</A></FONT>
<LI><FONT COLOR=black>absolute path, <A HREF="#@default798">15.1</A></FONT>
<LI><FONT COLOR=black>access, <A HREF="#@default461">8.2</A></FONT>
<LI><FONT COLOR=black>accumulator, <A HREF="#@default317">5.9</A></FONT>

<UL><LI>
<FONT COLOR=black>sum, <A HREF="#@default310">5.7.1</A></FONT>
</UL>
<LI><FONT COLOR=black>algorithm, <A HREF="#@default268">4.13</A></FONT>

<UL><LI>
<FONT COLOR=black>MD5, <A HREF="#@default828">1</A></FONT>
</UL>
<LI><FONT COLOR=black>aliasing, <A HREF="#@default543">8.11</A>, <A HREF="#@default550">8.12</A>, <A HREF="#@default571">8.15</A></FONT>

<UL><LI>
<FONT COLOR=black>copying to avoid, <A HREF="#@default569">3</A></FONT>
</UL>
<LI><FONT COLOR=black>alternative execution, <A HREF="#@default153">3.4</A></FONT>
<LI><FONT COLOR=black>and operator, <A HREF="#@default137">3.2</A></FONT>
<LI><FONT COLOR=black>append method, <A HREF="#@default506">8.6</A>, <A HREF="#@default560">8.13</A></FONT>
<LI><FONT COLOR=black>argument, <A HREF="#@default197">4.1</A>, <A HREF="#@default238">4.6</A>, <A HREF="#@default252">4.9</A>, <A HREF="#@default256">4.9</A>, <A HREF="#@default269">4.13</A>, <A HREF="#@default556">8.13</A></FONT>

<UL><LI>
<FONT COLOR=black>keyword, <A HREF="#@default666">10.2</A></FONT>
<LI><FONT COLOR=black>list, <A HREF="#@default557">8.13</A></FONT>
<LI><FONT COLOR=black>optional, <A HREF="#@default380">6.9</A>, <A HREF="#@default534">8.9</A></FONT>
</UL>
<LI><FONT COLOR=black>arguments, <A HREF="#@default802">15.3</A></FONT>
<LI><FONT COLOR=black>arithmetic operator, <A HREF="#@default61">2.5</A></FONT>
<LI><FONT COLOR=black>assignment, <A HREF="#@default103">2.14</A>, <A HREF="#@default459">8.1</A></FONT>

<UL><LI>
<FONT COLOR=black>item, <A HREF="#@default360">6.5</A>, <A HREF="#@default469">8.2</A>, <A HREF="#@default656">10.1</A></FONT>
<LI><FONT COLOR=black>tuple, <A HREF="#@default669">10.3</A>, <A HREF="#@default714">10.10</A></FONT>
</UL>
<LI><FONT COLOR=black>assignment statement, <A HREF="#@default52">2.2</A></FONT>
<LI><FONT COLOR=black>attribute, <A HREF="#@default774">14.13</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>BeautifulSoup, <A HREF="#@default742">12.6</A>, <A HREF="#@default743">12.6</A>, <A HREF="#@default748">12.8</A></FONT>
<LI><FONT COLOR=black>BY-SA, <A HREF="#@default2">0</A></FONT>
<LI><FONT COLOR=black>binary file, <A HREF="#@default746">12.7</A></FONT>
<LI><FONT COLOR=black>bisection, debugging by, <A HREF="#@default316">5.8</A></FONT>
<LI><FONT COLOR=black>body, <A HREF="#@default179">3.10</A>, <A HREF="#@default241">4.6</A>, <A HREF="#@default270">4.13</A>, <A HREF="#@default301">5.2</A></FONT>
<LI><FONT COLOR=black>bool type, <A HREF="#@default131">3.1</A></FONT>
<LI><FONT COLOR=black>boolean expression, <A HREF="#@default123">3.1</A>, <A HREF="#@default180">3.10</A></FONT>
<LI><FONT COLOR=black>boolean operator, <A HREF="#@default370">6.7</A></FONT>
<LI><FONT COLOR=black>bracket
</FONT><UL><LI>
<FONT COLOR=black>squiggly, <A HREF="#@default591">9</A></FONT>
</UL>
<LI><FONT COLOR=black>bracket operator, <A HREF="#@default325">6.1</A>, <A HREF="#@default463">8.2</A>, <A HREF="#@default647">10.1</A></FONT>
<LI><FONT COLOR=black>branch, <A HREF="#@default156">3.4</A>, <A HREF="#@default182">3.10</A></FONT>
<LI><FONT COLOR=black>break statement, <A HREF="#@default304">5.4</A></FONT>
<LI><FONT COLOR=black>bug, <A HREF="#@default15">1.12</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>CC-BY-SA, <A HREF="#@default1">0</A></FONT>
<LI><FONT COLOR=black>CPU, <A HREF="#@default17">1.12</A></FONT>
<LI><FONT COLOR=black>Creative Commons License, <A HREF="#@default0">0</A></FONT>
<LI><FONT COLOR=black>case-sensitivity, variable names, <A HREF="#@default99">2.13</A></FONT>
<LI><FONT COLOR=black>catch, <A HREF="#@default444">7.10</A></FONT>
<LI><FONT COLOR=black>celsius, <A HREF="#@default165">3.7</A></FONT>
<LI><FONT COLOR=black>central processing unit, <A HREF="#@default16">1.12</A></FONT>
<LI><FONT COLOR=black>chained conditional, <A HREF="#@default157">3.5</A>, <A HREF="#@default183">3.10</A></FONT>
<LI><FONT COLOR=black>character, <A HREF="#@default324">6.1</A></FONT>
<LI><FONT COLOR=black>checksum, <A HREF="#@default816">15.5</A>, <A HREF="#@default829">1</A></FONT>
<LI><FONT COLOR=black>choice function, <A HREF="#@default217">4.4</A></FONT>
<LI><FONT COLOR=black>close method, <A HREF="#@default436">7.8</A>, <A HREF="#@default813">15.4</A></FONT>
<LI><FONT COLOR=black>colon, <A HREF="#@default243">4.6</A></FONT>
<LI><FONT COLOR=black>comment, <A HREF="#@default89">2.11</A>, <A HREF="#@default105">2.14</A></FONT>
<LI><FONT COLOR=black>comparable, <A HREF="#@default640">10.1</A>, <A HREF="#@default704">10.10</A></FONT>
<LI><FONT COLOR=black>comparison
</FONT><UL><LI>
<FONT COLOR=black>string, <A HREF="#@default373">6.8</A></FONT>
<LI><FONT COLOR=black>tuple, <A HREF="#@default657">10.2</A></FONT>
</UL>
<LI><FONT COLOR=black>comparison operator, <A HREF="#@default133">3.1</A></FONT>
<LI><FONT COLOR=black>compile, <A HREF="#@default18">1.12</A></FONT>
<LI><FONT COLOR=black>composition, <A HREF="#@default255">4.9</A>, <A HREF="#@default271">4.13</A></FONT>
<LI><FONT COLOR=black>compound statement, <A HREF="#@default149">3.3</A>, <A HREF="#@default188">3.10</A></FONT>
<LI><FONT COLOR=black>concatenation, <A HREF="#@default80">2.9</A>, <A HREF="#@default104">2.14</A>, <A HREF="#@default362">6.5</A>, <A HREF="#@default538">8.9</A></FONT>

<UL><LI>
<FONT COLOR=black>list, <A HREF="#@default489">8.4</A>, <A HREF="#@default563">8.13</A></FONT>
</UL>
<LI><FONT COLOR=black>condition, <A HREF="#@default148">3.3</A>, <A HREF="#@default187">3.10</A>, <A HREF="#@default299">5.2</A></FONT>
<LI><FONT COLOR=black>conditional
</FONT><UL><LI>
<FONT COLOR=black>chained, <A HREF="#@default158">3.5</A>, <A HREF="#@default184">3.10</A></FONT>
<LI><FONT COLOR=black>nested, <A HREF="#@default162">3.6</A>, <A HREF="#@default192">3.10</A></FONT>
</UL>
<LI><FONT COLOR=black>conditional execution, <A HREF="#@default147">3.3</A></FONT>
<LI><FONT COLOR=black>conditional statement, <A HREF="#@default143">3.3</A>, <A HREF="#@default185">3.10</A></FONT>
<LI><FONT COLOR=black>connect function, <A HREF="#@default769">14.4</A></FONT>
<LI><FONT COLOR=black>consistency check, <A HREF="#@default621">9.5</A></FONT>
<LI><FONT COLOR=black>constraint, <A HREF="#@default775">14.13</A></FONT>
<LI><FONT COLOR=black>continue statement, <A HREF="#@default306">5.5</A></FONT>
<LI><FONT COLOR=black>contributors, <A HREF="#@default830">C</A></FONT>
<LI><FONT COLOR=black>conversion
</FONT><UL><LI>
<FONT COLOR=black>type, <A HREF="#@default199">4.3</A></FONT>
</UL>
<LI><FONT COLOR=black>copy
</FONT><UL><LI>
<FONT COLOR=black>slice, <A HREF="#@default351">2</A>, <A HREF="#@default500">8.5</A></FONT>
<LI><FONT COLOR=black>to avoid aliasing, <A HREF="#@default570">3</A></FONT>
</UL>
<LI><FONT COLOR=black>count method, <A HREF="#@default381">4</A></FONT>
<LI><FONT COLOR=black>counter, <A HREF="#@default318">5.9</A>, <A HREF="#@default363">6.6</A>, <A HREF="#@default392">6.13</A>, <A HREF="#@default422">7.4</A>, <A HREF="#@default604">9.1</A></FONT>
<LI><FONT COLOR=black>counting and looping, <A HREF="#@default364">6.6</A></FONT>
<LI><FONT COLOR=black>curl, <A HREF="#@default747">12.7</A></FONT>
<LI><FONT COLOR=black>cursor, <A HREF="#@default776">14.13</A></FONT>
<LI><FONT COLOR=black>cursor function, <A HREF="#@default771">14.4</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>DSU pattern, <A HREF="#@default661">10.2</A>, <A HREF="#@default706">10.10</A></FONT>
<LI><FONT COLOR=black>data structure, <A HREF="#@default697">10.9</A>, <A HREF="#@default705">10.10</A></FONT>
<LI><FONT COLOR=black>database, <A HREF="#@default765">14.1</A></FONT>

<UL><LI>
<FONT COLOR=black>indexes, <A HREF="#@default766">14.1</A></FONT>
</UL>
<LI><FONT COLOR=black>database browser, <A HREF="#@default777">14.13</A></FONT>
<LI><FONT COLOR=black>database normalization, <A HREF="#@default782">14.13</A></FONT>
<LI><FONT COLOR=black>debugging, <A HREF="#@default91">2.13</A>, <A HREF="#@default170">3.9</A>, <A HREF="#@default266">4.12</A>, <A HREF="#@default389">6.12</A>, <A HREF="#@default438">7.9</A>, <A HREF="#@default566">8.14</A>, <A HREF="#@default619">9.5</A>, <A HREF="#@default696">10.9</A></FONT>

<UL><LI>
<FONT COLOR=black>by bisection, <A HREF="#@default315">5.8</A></FONT>
</UL>
<LI><FONT COLOR=black>decorate-sort-undecorate pattern, <A HREF="#@default663">10.2</A></FONT>
<LI><FONT COLOR=black>decrement, <A HREF="#@default293">5.1</A>, <A HREF="#@default319">5.9</A></FONT>
<LI><FONT COLOR=black>def keyword, <A HREF="#@default236">4.6</A></FONT>
<LI><FONT COLOR=black>definition
</FONT><UL><LI>
<FONT COLOR=black>function, <A HREF="#@default235">4.6</A></FONT>
</UL>
<LI><FONT COLOR=black>del operator, <A HREF="#@default520">8.7</A></FONT>
<LI><FONT COLOR=black>deletion, element of list, <A HREF="#@default517">8.7</A></FONT>
<LI><FONT COLOR=black>delimiter, <A HREF="#@default535">8.9</A>, <A HREF="#@default572">8.15</A></FONT>
<LI><FONT COLOR=black>deterministic, <A HREF="#@default209">4.4</A>, <A HREF="#@default272">4.13</A></FONT>
<LI><FONT COLOR=black>development plan
</FONT><UL><LI>
<FONT COLOR=black>random walk programming, <A HREF="#@default703">10.9</A></FONT>
</UL>
<LI><FONT COLOR=black>dict function, <A HREF="#@default588">9</A></FONT>
<LI><FONT COLOR=black>dictionary, <A HREF="#@default582">9</A>, <A HREF="#@default583">9</A>, <A HREF="#@default623">9.6</A>, <A HREF="#@default677">10.4</A></FONT>

<UL><LI>
<FONT COLOR=black>looping with, <A HREF="#@default614">9.3</A></FONT>
<LI><FONT COLOR=black>traversal, <A HREF="#@default682">10.5</A></FONT>
</UL>
<LI><FONT COLOR=black>directory, <A HREF="#@default788">15.1</A></FONT>

<UL><LI>
<FONT COLOR=black>current, <A HREF="#@default817">15.5</A></FONT>
<LI><FONT COLOR=black>cwd, <A HREF="#@default819">15.5</A></FONT>
<LI><FONT COLOR=black>working, <A HREF="#@default795">15.1</A>, <A HREF="#@default818">15.5</A></FONT>
</UL>
<LI><FONT COLOR=black>divisibility, <A HREF="#@default77">2.8</A></FONT>
<LI><FONT COLOR=black>division
</FONT><UL><LI>
<FONT COLOR=black>floating-point, <A HREF="#@default68">2.5</A></FONT>
<LI><FONT COLOR=black>floor, <A HREF="#@default67">2.5</A>, <A HREF="#@default178">3.9</A></FONT>
</UL>
<LI><FONT COLOR=black>dot notation, <A HREF="#@default223">4.5</A>, <A HREF="#@default273">4.13</A>, <A HREF="#@default376">6.9</A></FONT>
<LI><FONT COLOR=black>duplicate, <A HREF="#@default826">1</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>ElementTree, <A HREF="#@default753">13.2</A>, <A HREF="#@default759">13.7</A>, <A HREF="#@default762">13.7</A></FONT>

<UL><LI>
<FONT COLOR=black>find, <A HREF="#@default755">13.2</A></FONT>
<LI><FONT COLOR=black>findall, <A HREF="#@default756">13.3</A></FONT>
<LI><FONT COLOR=black>fromstring, <A HREF="#@default754">13.2</A></FONT>
<LI><FONT COLOR=black>get, <A HREF="#@default757">13.3</A></FONT>
</UL>
<LI><FONT COLOR=black>element, <A HREF="#@default452">8.1</A>, <A HREF="#@default573">8.15</A></FONT>
<LI><FONT COLOR=black>element deletion, <A HREF="#@default516">8.7</A></FONT>
<LI><FONT COLOR=black>elif keyword, <A HREF="#@default159">3.5</A></FONT>
<LI><FONT COLOR=black>ellipses, <A HREF="#@default244">4.6</A></FONT>
<LI><FONT COLOR=black>else keyword, <A HREF="#@default154">3.4</A></FONT>
<LI><FONT COLOR=black>email address, <A HREF="#@default676">10.3</A></FONT>
<LI><FONT COLOR=black>empty list, <A HREF="#@default457">8.1</A></FONT>
<LI><FONT COLOR=black>empty string, <A HREF="#@default393">6.13</A>, <A HREF="#@default539">8.9</A></FONT>
<LI><FONT COLOR=black>encapsulation, <A HREF="#@default367">3</A></FONT>
<LI><FONT COLOR=black>end of line character, <A HREF="#@default443">7.9</A></FONT>
<LI><FONT COLOR=black>equivalence, <A HREF="#@default546">8.11</A></FONT>
<LI><FONT COLOR=black>equivalent, <A HREF="#@default574">8.15</A></FONT>
<LI><FONT COLOR=black>error
</FONT><UL><LI>
<FONT COLOR=black>runtime, <A HREF="#@default98">2.13</A>, <A HREF="#@default173">3.9</A></FONT>
<LI><FONT COLOR=black>semantic, <A HREF="#@default49">2.1</A>, <A HREF="#@default101">2.13</A></FONT>
<LI><FONT COLOR=black>shape, <A HREF="#@default699">10.9</A></FONT>
<LI><FONT COLOR=black>syntax, <A HREF="#@default93">2.13</A></FONT>
</UL>
<LI><FONT COLOR=black>error message, <A HREF="#@default50">2.1</A>, <A HREF="#@default94">2.13</A></FONT>
<LI><FONT COLOR=black>evaluate, <A HREF="#@default70">2.6</A></FONT>
<LI><FONT COLOR=black>eXtensible Markup Language, <A HREF="#@default761">13.7</A></FONT>
<LI><FONT COLOR=black>exception, <A HREF="#@default96">2.13</A></FONT>

<UL><LI>
<FONT COLOR=black>IndexError, <A HREF="#@default335">6.2</A>, <A HREF="#@default470">8.2</A></FONT>
<LI><FONT COLOR=black>IOError, <A HREF="#@default431">7.7</A></FONT>
<LI><FONT COLOR=black>KeyError, <A HREF="#@default592">9</A></FONT>
<LI><FONT COLOR=black>OverflowError, <A HREF="#@default175">3.9</A></FONT>
<LI><FONT COLOR=black>TypeError, <A HREF="#@default331">6.1</A>, <A HREF="#@default357">6.5</A>, <A HREF="#@default387">6.11</A>, <A HREF="#@default653">10.1</A></FONT>
<LI><FONT COLOR=black>ValueError, <A HREF="#@default88">2.10</A>, <A HREF="#@default672">10.3</A></FONT>
</UL>
<LI><FONT COLOR=black>exists function, <A HREF="#@default800">15.1</A></FONT>
<LI><FONT COLOR=black>experimental debugging, <A HREF="#@default701">10.9</A></FONT>
<LI><FONT COLOR=black>expression, <A HREF="#@default63">2.5</A>, <A HREF="#@default69">2.6</A>, <A HREF="#@default106">2.14</A></FONT>

<UL><LI>
<FONT COLOR=black>boolean, <A HREF="#@default124">3.1</A>, <A HREF="#@default181">3.10</A></FONT>
</UL>
<LI><FONT COLOR=black>extend method, <A HREF="#@default508">8.6</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>False special value, <A HREF="#@default128">3.1</A></FONT>
<LI><FONT COLOR=black>Free Documentation License, GNU, <A HREF="#@default4">0</A>, <A HREF="#@default6">0</A></FONT>
<LI><FONT COLOR=black>fahrenheit, <A HREF="#@default164">3.7</A></FONT>
<LI><FONT COLOR=black>file, <A HREF="#@default412">7</A></FONT>

<UL><LI>
<FONT COLOR=black>open, <A HREF="#@default416">7.2</A></FONT>
<LI><FONT COLOR=black>reading, <A HREF="#@default421">7.4</A></FONT>
<LI><FONT COLOR=black>writing, <A HREF="#@default434">7.8</A></FONT>
</UL>
<LI><FONT COLOR=black>file handle, <A HREF="#@default419">7.2</A></FONT>
<LI><FONT COLOR=black>file name, <A HREF="#@default786">15.1</A></FONT>
<LI><FONT COLOR=black>filter pattern, <A HREF="#@default423">7.5</A></FONT>
<LI><FONT COLOR=black>findall, <A HREF="#@default726">11.2</A></FONT>
<LI><FONT COLOR=black>flag, <A HREF="#@default398">6.13</A></FONT>
<LI><FONT COLOR=black>float function, <A HREF="#@default203">4.3</A></FONT>
<LI><FONT COLOR=black>float type, <A HREF="#@default45">2.1</A></FONT>
<LI><FONT COLOR=black>floating-point, <A HREF="#@default107">2.14</A></FONT>
<LI><FONT COLOR=black>floating-point division, <A HREF="#@default66">2.5</A></FONT>
<LI><FONT COLOR=black>floor division, <A HREF="#@default65">2.5</A>, <A HREF="#@default108">2.14</A>, <A HREF="#@default177">3.9</A></FONT>
<LI><FONT COLOR=black>flow of execution, <A HREF="#@default249">4.8</A>, <A HREF="#@default274">4.13</A>, <A HREF="#@default298">5.2</A></FONT>
<LI><FONT COLOR=black>folder, <A HREF="#@default789">15.1</A></FONT>
<LI><FONT COLOR=black>for loop, <A HREF="#@default341">6.3</A>, <A HREF="#@default479">8.3</A></FONT>
<LI><FONT COLOR=black>for statement, <A HREF="#@default308">5.6</A></FONT>
<LI><FONT COLOR=black>foreign key, <A HREF="#@default778">14.13</A></FONT>
<LI><FONT COLOR=black>format operator, <A HREF="#@default383">6.11</A>, <A HREF="#@default394">6.13</A></FONT>
<LI><FONT COLOR=black>format sequence, <A HREF="#@default386">6.11</A>, <A HREF="#@default396">6.13</A></FONT>
<LI><FONT COLOR=black>format string, <A HREF="#@default385">6.11</A>, <A HREF="#@default397">6.13</A></FONT>
<LI><FONT COLOR=black>frequency, <A HREF="#@default607">9.1</A></FONT>

<UL><LI>
<FONT COLOR=black>letter, <A HREF="#@default716">3</A></FONT>
</UL>
<LI><FONT COLOR=black>fruitful function, <A HREF="#@default257">4.10</A>, <A HREF="#@default275">4.13</A></FONT>
<LI><FONT COLOR=black>function, <A HREF="#@default233">4.6</A>, <A HREF="#@default276">4.13</A></FONT>

<UL><LI>
<FONT COLOR=black>choice, <A HREF="#@default218">4.4</A></FONT>
<LI><FONT COLOR=black>connect, <A HREF="#@default770">14.4</A></FONT>
<LI><FONT COLOR=black>cursor, <A HREF="#@default772">14.4</A></FONT>
<LI><FONT COLOR=black>dict, <A HREF="#@default589">9</A></FONT>
<LI><FONT COLOR=black>exists, <A HREF="#@default801">15.1</A></FONT>
<LI><FONT COLOR=black>float, <A HREF="#@default204">4.3</A></FONT>
<LI><FONT COLOR=black>getcwd, <A HREF="#@default793">15.1</A></FONT>
<LI><FONT COLOR=black>int, <A HREF="#@default202">4.3</A></FONT>
<LI><FONT COLOR=black>len, <A HREF="#@default334">6.2</A>, <A HREF="#@default595">9</A></FONT>
<LI><FONT COLOR=black>list, <A HREF="#@default530">8.9</A></FONT>
<LI><FONT COLOR=black>log, <A HREF="#@default225">4.5</A></FONT>
<LI><FONT COLOR=black>open, <A HREF="#@default418">7.2</A>, <A HREF="#@default430">7.7</A></FONT>
<LI><FONT COLOR=black>popen, <A HREF="#@default808">15.4</A></FONT>
<LI><FONT COLOR=black>randint, <A HREF="#@default216">4.4</A></FONT>
<LI><FONT COLOR=black>random, <A HREF="#@default214">4.4</A></FONT>
<LI><FONT COLOR=black>raw_input, <A HREF="#@default84">2.10</A></FONT>
<LI><FONT COLOR=black>repr, <A HREF="#@default441">7.9</A></FONT>
<LI><FONT COLOR=black>reversed, <A HREF="#@default695">10.8</A></FONT>
<LI><FONT COLOR=black>sorted, <A HREF="#@default693">10.8</A></FONT>
<LI><FONT COLOR=black>sqrt, <A HREF="#@default232">4.5</A></FONT>
<LI><FONT COLOR=black>str, <A HREF="#@default206">4.3</A></FONT>
<LI><FONT COLOR=black>tuple, <A HREF="#@default646">10.1</A></FONT>
</UL>
<LI><FONT COLOR=black>function argument, <A HREF="#@default253">4.9</A></FONT>
<LI><FONT COLOR=black>function call, <A HREF="#@default195">4.1</A>, <A HREF="#@default277">4.13</A></FONT>
<LI><FONT COLOR=black>function definition, <A HREF="#@default234">4.6</A>, <A HREF="#@default247">4.7</A>, <A HREF="#@default278">4.13</A>, <A HREF="#@default279">4.13</A></FONT>
<LI><FONT COLOR=black>function object, <A HREF="#@default245">4.6</A></FONT>
<LI><FONT COLOR=black>function parameter, <A HREF="#@default251">4.9</A></FONT>
<LI><FONT COLOR=black>function, fruitful, <A HREF="#@default259">4.10</A></FONT>
<LI><FONT COLOR=black>function, math, <A HREF="#@default220">4.5</A></FONT>
<LI><FONT COLOR=black>function, reasons for, <A HREF="#@default265">4.11</A></FONT>
<LI><FONT COLOR=black>function, trigonometric, <A HREF="#@default229">4.5</A></FONT>
<LI><FONT COLOR=black>function, void, <A HREF="#@default260">4.10</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>GNU Free Documentation License, <A HREF="#@default3">0</A>, <A HREF="#@default5">0</A></FONT>
<LI><FONT COLOR=black>gather, <A HREF="#@default707">10.10</A></FONT>
<LI><FONT COLOR=black>get method, <A HREF="#@default610">2</A></FONT>
<LI><FONT COLOR=black>getcwd function, <A HREF="#@default792">15.1</A></FONT>
<LI><FONT COLOR=black>greedy, <A HREF="#@default725">11.1</A>, <A HREF="#@default732">11.8</A>, <A HREF="#@default738">12.5</A></FONT>
<LI><FONT COLOR=black>greedy matching, <A HREF="#@default733">11.8</A></FONT>
<LI><FONT COLOR=black>grep, <A HREF="#@default734">11.8</A></FONT>
<LI><FONT COLOR=black>guardian pattern, <A HREF="#@default168">3.8</A>, <A HREF="#@default189">3.10</A>, <A HREF="#@default390">6.12</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>HTML, <A HREF="#@default744">12.6</A></FONT>
<LI><FONT COLOR=black>hardware, <A HREF="#@default7">1.2</A></FONT>

<UL><LI>
<FONT COLOR=black>architecture, <A HREF="#@default8">1.2</A></FONT>
</UL>
<LI><FONT COLOR=black>hash function, <A HREF="#@default625">9.6</A></FONT>
<LI><FONT COLOR=black>hash table, <A HREF="#@default601">9</A></FONT>
<LI><FONT COLOR=black>hashable, <A HREF="#@default639">10.1</A>, <A HREF="#@default684">10.7</A>, <A HREF="#@default708">10.10</A></FONT>
<LI><FONT COLOR=black>hashing, <A HREF="#@default820">15.5</A></FONT>
<LI><FONT COLOR=black>hashtable, <A HREF="#@default624">9.6</A></FONT>
<LI><FONT COLOR=black>header, <A HREF="#@default240">4.6</A>, <A HREF="#@default280">4.13</A></FONT>
<LI><FONT COLOR=black>high-level language, <A HREF="#@default19">1.12</A></FONT>
<LI><FONT COLOR=black>histogram, <A HREF="#@default606">9.1</A>, <A HREF="#@default609">9.1</A>, <A HREF="#@default626">9.6</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>IndexError, <A HREF="#@default336">6.2</A>, <A HREF="#@default471">8.2</A></FONT>
<LI><FONT COLOR=black>IOError, <A HREF="#@default432">7.7</A></FONT>
<LI><FONT COLOR=black>identical, <A HREF="#@default576">8.15</A></FONT>
<LI><FONT COLOR=black>identity, <A HREF="#@default547">8.11</A></FONT>
<LI><FONT COLOR=black>if statement, <A HREF="#@default145">3.3</A></FONT>
<LI><FONT COLOR=black>immutability, <A HREF="#@default354">6.5</A>, <A HREF="#@default361">6.5</A>, <A HREF="#@default400">6.13</A>, <A HREF="#@default554">8.12</A>, <A HREF="#@default641">10.1</A>, <A HREF="#@default691">10.8</A></FONT>
<LI><FONT COLOR=black>implementation, <A HREF="#@default605">9.1</A>, <A HREF="#@default627">9.6</A></FONT>
<LI><FONT COLOR=black>import statement, <A HREF="#@default281">4.13</A></FONT>
<LI><FONT COLOR=black>in operator, <A HREF="#@default368">6.7</A>, <A HREF="#@default475">8.2</A>, <A HREF="#@default597">9</A></FONT>
<LI><FONT COLOR=black>increment, <A HREF="#@default292">5.1</A>, <A HREF="#@default320">5.9</A></FONT>
<LI><FONT COLOR=black>indentation, <A HREF="#@default242">4.6</A></FONT>
<LI><FONT COLOR=black>index, <A HREF="#@default327">6.1</A>, <A HREF="#@default330">6.1</A>, <A HREF="#@default401">6.13</A>, <A HREF="#@default462">8.2</A>, <A HREF="#@default575">8.15</A>, <A HREF="#@default587">9</A>, <A HREF="#@default779">14.13</A></FONT>

<UL><LI>
<FONT COLOR=black>looping with, <A HREF="#@default483">8.3</A></FONT>
<LI><FONT COLOR=black>negative, <A HREF="#@default337">6.2</A></FONT>
<LI><FONT COLOR=black>slice, <A HREF="#@default347">6.4</A>, <A HREF="#@default495">8.5</A></FONT>
<LI><FONT COLOR=black>starting at zero, <A HREF="#@default328">6.1</A>, <A HREF="#@default466">8.2</A></FONT>
</UL>
<LI><FONT COLOR=black>infinite loop, <A HREF="#@default302">5.3</A>, <A HREF="#@default321">5.9</A></FONT>
<LI><FONT COLOR=black>initialization (before update), <A HREF="#@default291">5.1</A></FONT>
<LI><FONT COLOR=black>int function, <A HREF="#@default201">4.3</A></FONT>
<LI><FONT COLOR=black>int type, <A HREF="#@default43">2.1</A></FONT>
<LI><FONT COLOR=black>integer, <A HREF="#@default109">2.14</A></FONT>
<LI><FONT COLOR=black>interactive mode, <A HREF="#@default12">1.5</A>, <A HREF="#@default20">1.12</A>, <A HREF="#@default58">2.4</A>, <A HREF="#@default261">4.10</A></FONT>
<LI><FONT COLOR=black>interpret, <A HREF="#@default21">1.12</A></FONT>
<LI><FONT COLOR=black>invocation, <A HREF="#@default378">6.9</A>, <A HREF="#@default399">6.13</A></FONT>
<LI><FONT COLOR=black>is operator, <A HREF="#@default544">8.11</A></FONT>
<LI><FONT COLOR=black>item, <A HREF="#@default402">6.13</A>, <A HREF="#@default454">8.1</A></FONT>

<UL><LI>
<FONT COLOR=black>dictionary, <A HREF="#@default628">9.6</A></FONT>
</UL>
<LI><FONT COLOR=black>item assignment, <A HREF="#@default359">6.5</A>, <A HREF="#@default468">8.2</A>, <A HREF="#@default655">10.1</A></FONT>
<LI><FONT COLOR=black>item update, <A HREF="#@default484">8.3</A></FONT>
<LI><FONT COLOR=black>items method, <A HREF="#@default678">10.4</A></FONT>
<LI><FONT COLOR=black>iteration, <A HREF="#@default288">5</A>, <A HREF="#@default297">5.2</A>, <A HREF="#@default322">5.9</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>join method, <A HREF="#@default536">8.9</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>KeyError, <A HREF="#@default593">9</A></FONT>
<LI><FONT COLOR=black>key, <A HREF="#@default585">9</A>, <A HREF="#@default629">9.6</A></FONT>
<LI><FONT COLOR=black>key-value pair, <A HREF="#@default586">9</A>, <A HREF="#@default630">9.6</A>, <A HREF="#@default680">10.4</A></FONT>
<LI><FONT COLOR=black>keyboard input, <A HREF="#@default81">2.10</A></FONT>
<LI><FONT COLOR=black>keys method, <A HREF="#@default617">9.3</A></FONT>
<LI><FONT COLOR=black>keyword, <A HREF="#@default54">2.3</A>, <A HREF="#@default56">2.3</A>, <A HREF="#@default110">2.14</A></FONT>

<UL><LI>
<FONT COLOR=black>def, <A HREF="#@default237">4.6</A></FONT>
<LI><FONT COLOR=black>elif, <A HREF="#@default160">3.5</A></FONT>
<LI><FONT COLOR=black>else, <A HREF="#@default155">3.4</A></FONT>
</UL>
<LI><FONT COLOR=black>keyword argument, <A HREF="#@default665">10.2</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>language
</FONT><UL><LI>
<FONT COLOR=black>programming, <A HREF="#@default11">1.4</A></FONT>
</UL>
<LI><FONT COLOR=black>len function, <A HREF="#@default333">6.2</A>, <A HREF="#@default594">9</A></FONT>
<LI><FONT COLOR=black>letter frequency, <A HREF="#@default715">3</A></FONT>
<LI><FONT COLOR=black>list, <A HREF="#@default450">8</A>, <A HREF="#@default526">8.9</A>, <A HREF="#@default577">8.15</A>, <A HREF="#@default688">10.8</A></FONT>

<UL><LI>
<FONT COLOR=black>as argument, <A HREF="#@default555">8.13</A></FONT>
<LI><FONT COLOR=black>concatenation, <A HREF="#@default490">8.4</A>, <A HREF="#@default562">8.13</A></FONT>
<LI><FONT COLOR=black>copy, <A HREF="#@default498">8.5</A></FONT>
<LI><FONT COLOR=black>element, <A HREF="#@default460">8.2</A></FONT>
<LI><FONT COLOR=black>empty, <A HREF="#@default458">8.1</A></FONT>
<LI><FONT COLOR=black>function, <A HREF="#@default529">8.9</A></FONT>
<LI><FONT COLOR=black>index, <A HREF="#@default472">8.2</A></FONT>
<LI><FONT COLOR=black>membership, <A HREF="#@default473">8.2</A></FONT>
<LI><FONT COLOR=black>method, <A HREF="#@default504">8.6</A></FONT>
<LI><FONT COLOR=black>nested, <A HREF="#@default456">8.1</A>, <A HREF="#@default487">8.3</A></FONT>
<LI><FONT COLOR=black>operation, <A HREF="#@default488">8.4</A></FONT>
<LI><FONT COLOR=black>repetition, <A HREF="#@default492">8.4</A></FONT>
<LI><FONT COLOR=black>slice, <A HREF="#@default496">8.5</A></FONT>
<LI><FONT COLOR=black>traversal, <A HREF="#@default477">8.3</A>, <A HREF="#@default578">8.15</A></FONT>
</UL>
</UL></TD>
<TD VALIGN=top ALIGN=left><UL><LI><FONT COLOR=black>log function, <A HREF="#@default224">4.5</A></FONT>
<LI><FONT COLOR=black>logical key, <A HREF="#@default780">14.13</A></FONT>
<LI><FONT COLOR=black>logical operator, <A HREF="#@default125">3.1</A>, <A HREF="#@default135">3.2</A></FONT>
<LI><FONT COLOR=black>lookup, <A HREF="#@default631">9.6</A></FONT>
<LI><FONT COLOR=black>loop, <A HREF="#@default300">5.2</A></FONT>

<UL><LI>
<FONT COLOR=black>for, <A HREF="#@default342">6.3</A>, <A HREF="#@default480">8.3</A></FONT>
<LI><FONT COLOR=black>infinite, <A HREF="#@default303">5.3</A></FONT>
<LI><FONT COLOR=black>maximum, <A HREF="#@default311">5.7.2</A></FONT>
<LI><FONT COLOR=black>minimum, <A HREF="#@default312">5.7.2</A></FONT>
<LI><FONT COLOR=black>nested, <A HREF="#@default613">9.2</A>, <A HREF="#@default633">9.6</A></FONT>
<LI><FONT COLOR=black>traversal, <A HREF="#@default340">6.3</A></FONT>
<LI><FONT COLOR=black>while, <A HREF="#@default296">5.2</A></FONT>
</UL>
<LI><FONT COLOR=black>looping
</FONT><UL><LI>
<FONT COLOR=black>with dictionaries, <A HREF="#@default615">9.3</A></FONT>
<LI><FONT COLOR=black>with indices, <A HREF="#@default482">8.3</A></FONT>
<LI><FONT COLOR=black>with strings, <A HREF="#@default366">6.6</A></FONT>
</UL>
<LI><FONT COLOR=black>looping and counting, <A HREF="#@default365">6.6</A></FONT>
<LI><FONT COLOR=black>low-level language, <A HREF="#@default22">1.12</A></FONT>
<LI><FONT COLOR=black>ls (Unix command), <A HREF="#@default805">15.4</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>MD5 algorithm, <A HREF="#@default827">1</A></FONT>
<LI><FONT COLOR=black>MP3, <A HREF="#@default825">1</A></FONT>
<LI><FONT COLOR=black>machine code, <A HREF="#@default23">1.12</A></FONT>
<LI><FONT COLOR=black>main memory, <A HREF="#@default24">1.12</A></FONT>
<LI><FONT COLOR=black>math function, <A HREF="#@default219">4.5</A></FONT>
<LI><FONT COLOR=black>membership
</FONT><UL><LI>
<FONT COLOR=black>dictionary, <A HREF="#@default596">9</A></FONT>
<LI><FONT COLOR=black>list, <A HREF="#@default474">8.2</A></FONT>
<LI><FONT COLOR=black>set, <A HREF="#@default603">1</A></FONT>
</UL>
<LI><FONT COLOR=black>method, <A HREF="#@default374">6.9</A>, <A HREF="#@default403">6.13</A></FONT>

<UL><LI>
<FONT COLOR=black>append, <A HREF="#@default507">8.6</A>, <A HREF="#@default561">8.13</A></FONT>
<LI><FONT COLOR=black>close, <A HREF="#@default437">7.8</A>, <A HREF="#@default814">15.4</A></FONT>
<LI><FONT COLOR=black>count, <A HREF="#@default382">4</A></FONT>
<LI><FONT COLOR=black>extend, <A HREF="#@default509">8.6</A></FONT>
<LI><FONT COLOR=black>get, <A HREF="#@default611">2</A></FONT>
<LI><FONT COLOR=black>items, <A HREF="#@default679">10.4</A></FONT>
<LI><FONT COLOR=black>join, <A HREF="#@default537">8.9</A></FONT>
<LI><FONT COLOR=black>keys, <A HREF="#@default618">9.3</A></FONT>
<LI><FONT COLOR=black>pop, <A HREF="#@default519">8.7</A></FONT>
<LI><FONT COLOR=black>read, <A HREF="#@default812">15.4</A></FONT>
<LI><FONT COLOR=black>readline, <A HREF="#@default810">15.4</A></FONT>
<LI><FONT COLOR=black>remove, <A HREF="#@default523">8.7</A></FONT>
<LI><FONT COLOR=black>sort, <A HREF="#@default511">8.6</A>, <A HREF="#@default568">1</A>, <A HREF="#@default660">10.2</A></FONT>
<LI><FONT COLOR=black>split, <A HREF="#@default532">8.9</A>, <A HREF="#@default675">10.3</A></FONT>
<LI><FONT COLOR=black>string, <A HREF="#@default411">6</A></FONT>
<LI><FONT COLOR=black>values, <A HREF="#@default600">9</A></FONT>
<LI><FONT COLOR=black>void, <A HREF="#@default513">8.6</A></FONT>
</UL>
<LI><FONT COLOR=black>method, list, <A HREF="#@default505">8.6</A></FONT>
<LI><FONT COLOR=black>mnemonic, <A HREF="#@default90">2.12</A>, <A HREF="#@default111">2.14</A></FONT>
<LI><FONT COLOR=black>module, <A HREF="#@default221">4.5</A>, <A HREF="#@default283">4.13</A></FONT>

<UL><LI>
<FONT COLOR=black>os, <A HREF="#@default791">15.1</A></FONT>
<LI><FONT COLOR=black>random, <A HREF="#@default212">4.4</A></FONT>
<LI><FONT COLOR=black>sqlite3, <A HREF="#@default768">14.4</A></FONT>
</UL>
<LI><FONT COLOR=black>module object, <A HREF="#@default222">4.5</A></FONT>
<LI><FONT COLOR=black>modulus operator, <A HREF="#@default75">2.8</A>, <A HREF="#@default112">2.14</A></FONT>
<LI><FONT COLOR=black>mutability, <A HREF="#@default353">6.5</A>, <A HREF="#@default465">8.2</A>, <A HREF="#@default501">8.5</A>, <A HREF="#@default553">8.12</A>, <A HREF="#@default638">10.1</A>, <A HREF="#@default690">10.8</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>None special value, <A HREF="#@default263">4.10</A>, <A HREF="#@default313">5.7.2</A>, <A HREF="#@default514">8.6</A>, <A HREF="#@default524">8.7</A></FONT>
<LI><FONT COLOR=black>negative index, <A HREF="#@default338">6.2</A></FONT>
<LI><FONT COLOR=black>nested conditional, <A HREF="#@default161">3.6</A>, <A HREF="#@default191">3.10</A></FONT>
<LI><FONT COLOR=black>nested list, <A HREF="#@default455">8.1</A>, <A HREF="#@default486">8.3</A>, <A HREF="#@default579">8.15</A></FONT>
<LI><FONT COLOR=black>nested loops, <A HREF="#@default612">9.2</A>, <A HREF="#@default632">9.6</A></FONT>
<LI><FONT COLOR=black>newline, <A HREF="#@default86">2.10</A>, <A HREF="#@default420">7.3</A>, <A HREF="#@default435">7.8</A>, <A HREF="#@default445">7.10</A></FONT>
<LI><FONT COLOR=black>non-greedy, <A HREF="#@default739">12.5</A></FONT>
<LI><FONT COLOR=black>normalization, <A HREF="#@default781">14.13</A></FONT>
<LI><FONT COLOR=black>not operator, <A HREF="#@default139">3.2</A></FONT>
<LI><FONT COLOR=black>number, random, <A HREF="#@default208">4.4</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>OverflowError, <A HREF="#@default176">3.9</A></FONT>
<LI><FONT COLOR=black>object, <A HREF="#@default358">6.5</A>, <A HREF="#@default404">6.13</A>, <A HREF="#@default541">8.11</A>, <A HREF="#@default548">8.11</A>, <A HREF="#@default580">8.15</A></FONT>

<UL><LI>
<FONT COLOR=black>function, <A HREF="#@default246">4.6</A></FONT>
</UL>
<LI><FONT COLOR=black>open function, <A HREF="#@default417">7.2</A>, <A HREF="#@default429">7.7</A></FONT>
<LI><FONT COLOR=black>operand, <A HREF="#@default62">2.5</A>, <A HREF="#@default114">2.14</A></FONT>
<LI><FONT COLOR=black>operator, <A HREF="#@default115">2.14</A></FONT>

<UL><LI>
<FONT COLOR=black>and, <A HREF="#@default140">3.2</A></FONT>
<LI><FONT COLOR=black>boolean, <A HREF="#@default371">6.7</A></FONT>
<LI><FONT COLOR=black>bracket, <A HREF="#@default326">6.1</A>, <A HREF="#@default464">8.2</A>, <A HREF="#@default648">10.1</A></FONT>
<LI><FONT COLOR=black>comparison, <A HREF="#@default134">3.1</A></FONT>
<LI><FONT COLOR=black>del, <A HREF="#@default521">8.7</A></FONT>
<LI><FONT COLOR=black>format, <A HREF="#@default384">6.11</A>, <A HREF="#@default395">6.13</A></FONT>
<LI><FONT COLOR=black>in, <A HREF="#@default369">6.7</A>, <A HREF="#@default476">8.2</A>, <A HREF="#@default598">9</A></FONT>
<LI><FONT COLOR=black>is, <A HREF="#@default545">8.11</A></FONT>
<LI><FONT COLOR=black>logical, <A HREF="#@default126">3.1</A>, <A HREF="#@default136">3.2</A></FONT>
<LI><FONT COLOR=black>modulus, <A HREF="#@default76">2.8</A>, <A HREF="#@default113">2.14</A></FONT>
<LI><FONT COLOR=black>not, <A HREF="#@default142">3.2</A></FONT>
<LI><FONT COLOR=black>or, <A HREF="#@default141">3.2</A></FONT>
<LI><FONT COLOR=black>slice, <A HREF="#@default346">6.4</A>, <A HREF="#@default494">8.5</A>, <A HREF="#@default565">8.13</A>, <A HREF="#@default650">10.1</A></FONT>
<LI><FONT COLOR=black>string, <A HREF="#@default79">2.9</A></FONT>
</UL>
<LI><FONT COLOR=black>operator, arithmetic, <A HREF="#@default60">2.5</A></FONT>
<LI><FONT COLOR=black>optional argument, <A HREF="#@default379">6.9</A>, <A HREF="#@default533">8.9</A></FONT>
<LI><FONT COLOR=black>or operator, <A HREF="#@default138">3.2</A></FONT>
<LI><FONT COLOR=black>order of operations, <A HREF="#@default71">2.7</A>, <A HREF="#@default102">2.13</A></FONT>
<LI><FONT COLOR=black>os module, <A HREF="#@default790">15.1</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>PEMDAS, <A HREF="#@default73">2.7</A></FONT>
<LI><FONT COLOR=black>Python 3.0, <A HREF="#@default64">2.5</A>, <A HREF="#@default82">2.10</A></FONT>
<LI><FONT COLOR=black>Pythonic, <A HREF="#@default433">7.7</A>, <A HREF="#@default446">7.10</A></FONT>
<LI><FONT COLOR=black>parameter, <A HREF="#@default250">4.9</A>, <A HREF="#@default284">4.13</A>, <A HREF="#@default559">8.13</A></FONT>
<LI><FONT COLOR=black>parentheses
</FONT><UL><LI>
<FONT COLOR=black>argument in, <A HREF="#@default196">4.1</A></FONT>
<LI><FONT COLOR=black>empty, <A HREF="#@default239">4.6</A>, <A HREF="#@default377">6.9</A></FONT>
<LI><FONT COLOR=black>overriding precedence, <A HREF="#@default74">2.7</A></FONT>
<LI><FONT COLOR=black>parameters in, <A HREF="#@default254">4.9</A></FONT>
<LI><FONT COLOR=black>regular expression, <A HREF="#@default731">11.3</A>, <A HREF="#@default741">12.5</A></FONT>
<LI><FONT COLOR=black>tuples in, <A HREF="#@default642">10.1</A></FONT>
</UL>
<LI><FONT COLOR=black>parse, <A HREF="#@default25">1.12</A></FONT>
<LI><FONT COLOR=black>parsing
</FONT><UL><LI>
<FONT COLOR=black>HTML, <A HREF="#@default745">12.6</A></FONT>
</UL>
<LI><FONT COLOR=black>parsing HTML, <A HREF="#@default737">12.4</A></FONT>
<LI><FONT COLOR=black>pass statement, <A HREF="#@default151">3.3</A></FONT>
<LI><FONT COLOR=black>path, <A HREF="#@default787">15.1</A></FONT>

<UL><LI>
<FONT COLOR=black>absolute, <A HREF="#@default799">15.1</A>, <A HREF="#@default815">15.5</A></FONT>
<LI><FONT COLOR=black>relative, <A HREF="#@default797">15.1</A>, <A HREF="#@default822">15.5</A></FONT>
</UL>
<LI><FONT COLOR=black>pattern
</FONT><UL><LI>
<FONT COLOR=black>DSU, <A HREF="#@default662">10.2</A></FONT>
<LI><FONT COLOR=black>decorate-sort-undecorate, <A HREF="#@default664">10.2</A></FONT>
<LI><FONT COLOR=black>filter, <A HREF="#@default424">7.5</A></FONT>
<LI><FONT COLOR=black>guardian, <A HREF="#@default169">3.8</A>, <A HREF="#@default190">3.10</A>, <A HREF="#@default391">6.12</A></FONT>
<LI><FONT COLOR=black>search, <A HREF="#@default406">6.13</A></FONT>
<LI><FONT COLOR=black>swap, <A HREF="#@default671">10.3</A></FONT>
</UL>
<LI><FONT COLOR=black>persistence, <A HREF="#@default414">7.1</A></FONT>
<LI><FONT COLOR=black>pi, <A HREF="#@default230">4.5</A></FONT>
<LI><FONT COLOR=black>pipe, <A HREF="#@default804">15.4</A>, <A HREF="#@default821">15.5</A></FONT>
<LI><FONT COLOR=black>pop method, <A HREF="#@default518">8.7</A></FONT>
<LI><FONT COLOR=black>popen function, <A HREF="#@default807">15.4</A></FONT>
<LI><FONT COLOR=black>port, <A HREF="#@default749">12.8</A></FONT>
<LI><FONT COLOR=black>portability, <A HREF="#@default26">1.12</A></FONT>
<LI><FONT COLOR=black>precedence, <A HREF="#@default117">2.14</A></FONT>
<LI><FONT COLOR=black>primary key, <A HREF="#@default783">14.13</A></FONT>
<LI><FONT COLOR=black>print statement, <A HREF="#@default27">1.12</A></FONT>
<LI><FONT COLOR=black>problem solving, <A HREF="#@default9">1.3</A>, <A HREF="#@default29">1.12</A></FONT>
<LI><FONT COLOR=black>program, <A HREF="#@default14">1.8</A>, <A HREF="#@default30">1.12</A></FONT>
<LI><FONT COLOR=black>programming language, <A HREF="#@default10">1.4</A></FONT>
<LI><FONT COLOR=black>prompt, <A HREF="#@default31">1.12</A>, <A HREF="#@default85">2.10</A></FONT>
<LI><FONT COLOR=black>pseudorandom, <A HREF="#@default210">4.4</A>, <A HREF="#@default285">4.13</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>QA, <A HREF="#@default426">7.7</A>, <A HREF="#@default448">7.10</A></FONT>
<LI><FONT COLOR=black>Quality Assurance, <A HREF="#@default425">7.7</A>, <A HREF="#@default447">7.10</A></FONT>
<LI><FONT COLOR=black>quotation mark, <A HREF="#@default39">2.1</A>, <A HREF="#@default47">2.1</A>, <A HREF="#@default350">6.4</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>radian, <A HREF="#@default227">4.5</A></FONT>
<LI><FONT COLOR=black>randint function, <A HREF="#@default215">4.4</A></FONT>
<LI><FONT COLOR=black>random function, <A HREF="#@default213">4.4</A></FONT>
<LI><FONT COLOR=black>random module, <A HREF="#@default211">4.4</A></FONT>
<LI><FONT COLOR=black>random number, <A HREF="#@default207">4.4</A></FONT>
<LI><FONT COLOR=black>random walk programming, <A HREF="#@default702">10.9</A></FONT>
<LI><FONT COLOR=black>raw_input function, <A HREF="#@default83">2.10</A></FONT>
<LI><FONT COLOR=black>re module, <A HREF="#@default719">11</A></FONT>
<LI><FONT COLOR=black>read method, <A HREF="#@default811">15.4</A></FONT>
<LI><FONT COLOR=black>readline method, <A HREF="#@default809">15.4</A></FONT>
<LI><FONT COLOR=black>reference, <A HREF="#@default552">8.12</A>, <A HREF="#@default558">8.13</A>, <A HREF="#@default581">8.15</A></FONT>

<UL><LI>
<FONT COLOR=black>aliasing, <A HREF="#@default551">8.12</A></FONT>
</UL>
<LI><FONT COLOR=black>regex, <A HREF="#@default718">11</A></FONT>

<UL><LI>
<FONT COLOR=black>character sets(brackets), <A HREF="#@default728">11.2</A></FONT>
<LI><FONT COLOR=black>findall, <A HREF="#@default727">11.2</A></FONT>
<LI><FONT COLOR=black>parentheses, <A HREF="#@default730">11.3</A>, <A HREF="#@default740">12.5</A></FONT>
<LI><FONT COLOR=black>search, <A HREF="#@default720">11</A></FONT>
<LI><FONT COLOR=black>wild card, <A HREF="#@default724">11.1</A></FONT>
</UL>
<LI><FONT COLOR=black>regular expressons, <A HREF="#@default717">11</A></FONT>
<LI><FONT COLOR=black>relation, <A HREF="#@default784">14.13</A></FONT>
<LI><FONT COLOR=black>relative path, <A HREF="#@default796">15.1</A></FONT>
<LI><FONT COLOR=black>remove method, <A HREF="#@default522">8.7</A></FONT>
<LI><FONT COLOR=black>repetition
</FONT><UL><LI>
<FONT COLOR=black>list, <A HREF="#@default491">8.4</A></FONT>
</UL>
<LI><FONT COLOR=black>repr function, <A HREF="#@default440">7.9</A></FONT>
<LI><FONT COLOR=black>return value, <A HREF="#@default198">4.1</A>, <A HREF="#@default286">4.13</A></FONT>
<LI><FONT COLOR=black>reversed function, <A HREF="#@default694">10.8</A></FONT>
<LI><FONT COLOR=black>rules of precedence, <A HREF="#@default72">2.7</A>, <A HREF="#@default116">2.14</A></FONT>
<LI><FONT COLOR=black>runtime error, <A HREF="#@default97">2.13</A>, <A HREF="#@default174">3.9</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>Service Oriented Architecture, <A HREF="#@default764">13.7</A></FONT>
<LI><FONT COLOR=black>SOA, <A HREF="#@default763">13.7</A></FONT>
<LI><FONT COLOR=black>sanity check, <A HREF="#@default620">9.5</A></FONT>
<LI><FONT COLOR=black>scaffolding, <A HREF="#@default622">9.5</A></FONT>
<LI><FONT COLOR=black>scatter, <A HREF="#@default709">10.10</A></FONT>
<LI><FONT COLOR=black>script, <A HREF="#@default13">1.7</A></FONT>
<LI><FONT COLOR=black>script mode, <A HREF="#@default59">2.4</A>, <A HREF="#@default262">4.10</A></FONT>
<LI><FONT COLOR=black>search pattern, <A HREF="#@default405">6.13</A></FONT>
<LI><FONT COLOR=black>secondary memory, <A HREF="#@default32">1.12</A>, <A HREF="#@default415">7.1</A></FONT>
<LI><FONT COLOR=black>semantic error, <A HREF="#@default34">1.12</A>, <A HREF="#@default48">2.1</A>, <A HREF="#@default100">2.13</A></FONT>
<LI><FONT COLOR=black>semantics, <A HREF="#@default33">1.12</A></FONT>
<LI><FONT COLOR=black>sequence, <A HREF="#@default323">6.1</A>, <A HREF="#@default407">6.13</A>, <A HREF="#@default453">8.1</A>, <A HREF="#@default528">8.9</A>, <A HREF="#@default637">10.1</A>, <A HREF="#@default686">10.8</A></FONT>
<LI><FONT COLOR=black>set membership, <A HREF="#@default602">1</A></FONT>
<LI><FONT COLOR=black>shape, <A HREF="#@default710">10.10</A></FONT>
<LI><FONT COLOR=black>shape error, <A HREF="#@default698">10.9</A></FONT>
<LI><FONT COLOR=black>shell, <A HREF="#@default803">15.4</A>, <A HREF="#@default823">15.5</A></FONT>
<LI><FONT COLOR=black>short circuit, <A HREF="#@default167">3.8</A>, <A HREF="#@default194">3.10</A></FONT>
<LI><FONT COLOR=black>sine function, <A HREF="#@default226">4.5</A></FONT>
<LI><FONT COLOR=black>singleton, <A HREF="#@default643">10.1</A>, <A HREF="#@default711">10.10</A></FONT>
<LI><FONT COLOR=black>slice, <A HREF="#@default408">6.13</A></FONT>

<UL><LI>
<FONT COLOR=black>copy, <A HREF="#@default352">2</A>, <A HREF="#@default499">8.5</A></FONT>
<LI><FONT COLOR=black>list, <A HREF="#@default497">8.5</A></FONT>
<LI><FONT COLOR=black>string, <A HREF="#@default349">6.4</A></FONT>
<LI><FONT COLOR=black>tuple, <A HREF="#@default652">10.1</A></FONT>
<LI><FONT COLOR=black>update, <A HREF="#@default502">8.5</A></FONT>
</UL>
<LI><FONT COLOR=black>slice operator, <A HREF="#@default345">6.4</A>, <A HREF="#@default493">8.5</A>, <A HREF="#@default564">8.13</A>, <A HREF="#@default649">10.1</A></FONT>
<LI><FONT COLOR=black>socket, <A HREF="#@default750">12.8</A>, <A HREF="#@default751">12.8</A></FONT>
<LI><FONT COLOR=black>sort method, <A HREF="#@default510">8.6</A>, <A HREF="#@default567">1</A>, <A HREF="#@default659">10.2</A></FONT>
<LI><FONT COLOR=black>sorted function, <A HREF="#@default692">10.8</A></FONT>
<LI><FONT COLOR=black>source code, <A HREF="#@default35">1.12</A></FONT>
<LI><FONT COLOR=black>special value
</FONT><UL><LI>
<FONT COLOR=black>False, <A HREF="#@default130">3.1</A></FONT>
<LI><FONT COLOR=black>None, <A HREF="#@default264">4.10</A>, <A HREF="#@default314">5.7.2</A>, <A HREF="#@default515">8.6</A>, <A HREF="#@default525">8.7</A></FONT>
<LI><FONT COLOR=black>True, <A HREF="#@default129">3.1</A></FONT>
</UL>
<LI><FONT COLOR=black>spider, <A HREF="#@default752">12.8</A></FONT>
<LI><FONT COLOR=black>split method, <A HREF="#@default531">8.9</A>, <A HREF="#@default674">10.3</A></FONT>
<LI><FONT COLOR=black>sqlite3 module, <A HREF="#@default767">14.4</A></FONT>
<LI><FONT COLOR=black>sqrt function, <A HREF="#@default231">4.5</A></FONT>
<LI><FONT COLOR=black>squiggly bracket, <A HREF="#@default590">9</A></FONT>
<LI><FONT COLOR=black>statement, <A HREF="#@default57">2.4</A>, <A HREF="#@default118">2.14</A></FONT>

<UL><LI>
<FONT COLOR=black>assignment, <A HREF="#@default53">2.2</A></FONT>
<LI><FONT COLOR=black>break, <A HREF="#@default305">5.4</A></FONT>
<LI><FONT COLOR=black>compound, <A HREF="#@default150">3.3</A></FONT>
<LI><FONT COLOR=black>conditional, <A HREF="#@default144">3.3</A>, <A HREF="#@default186">3.10</A></FONT>
<LI><FONT COLOR=black>continue, <A HREF="#@default307">5.5</A></FONT>
<LI><FONT COLOR=black>for, <A HREF="#@default309">5.6</A>, <A HREF="#@default343">6.3</A>, <A HREF="#@default481">8.3</A></FONT>
<LI><FONT COLOR=black>if, <A HREF="#@default146">3.3</A></FONT>
<LI><FONT COLOR=black>import, <A HREF="#@default282">4.13</A></FONT>
<LI><FONT COLOR=black>pass, <A HREF="#@default152">3.3</A></FONT>
<LI><FONT COLOR=black>print, <A HREF="#@default28">1.12</A></FONT>
<LI><FONT COLOR=black>try, <A HREF="#@default428">7.7</A></FONT>
<LI><FONT COLOR=black>while, <A HREF="#@default294">5.2</A></FONT>
</UL>
<LI><FONT COLOR=black>str function, <A HREF="#@default205">4.3</A></FONT>
<LI><FONT COLOR=black>string, <A HREF="#@default38">2.1</A>, <A HREF="#@default119">2.14</A>, <A HREF="#@default527">8.9</A>, <A HREF="#@default687">10.8</A></FONT>

<UL><LI>
<FONT COLOR=black>comparison, <A HREF="#@default372">6.8</A></FONT>
<LI><FONT COLOR=black>empty, <A HREF="#@default540">8.9</A></FONT>
<LI><FONT COLOR=black>find, <A HREF="#@default721">11</A></FONT>
<LI><FONT COLOR=black>immutable, <A HREF="#@default355">6.5</A></FONT>
<LI><FONT COLOR=black>method, <A HREF="#@default375">6.9</A></FONT>
<LI><FONT COLOR=black>operation, <A HREF="#@default78">2.9</A></FONT>
<LI><FONT COLOR=black>slice, <A HREF="#@default348">6.4</A></FONT>
<LI><FONT COLOR=black>split, <A HREF="#@default729">11.3</A></FONT>
<LI><FONT COLOR=black>startswith, <A HREF="#@default722">11</A></FONT>
</UL>
<LI><FONT COLOR=black>string method, <A HREF="#@default410">6</A></FONT>
<LI><FONT COLOR=black>string representation, <A HREF="#@default442">7.9</A></FONT>
<LI><FONT COLOR=black>string type, <A HREF="#@default41">2.1</A></FONT>
<LI><FONT COLOR=black>swap pattern, <A HREF="#@default670">10.3</A></FONT>
<LI><FONT COLOR=black>syntax error, <A HREF="#@default92">2.13</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>True special value, <A HREF="#@default127">3.1</A></FONT>
<LI><FONT COLOR=black>TypeError, <A HREF="#@default332">6.1</A>, <A HREF="#@default356">6.5</A>, <A HREF="#@default388">6.11</A>, <A HREF="#@default654">10.1</A></FONT>
<LI><FONT COLOR=black>temperature conversion, <A HREF="#@default166">3.7</A></FONT>
<LI><FONT COLOR=black>text file, <A HREF="#@default449">7.10</A></FONT>
<LI><FONT COLOR=black>traceback, <A HREF="#@default163">3.7</A>, <A HREF="#@default171">3.9</A>, <A HREF="#@default193">3.10</A></FONT>
<LI><FONT COLOR=black>traversal, <A HREF="#@default339">6.3</A>, <A HREF="#@default344">6.3</A>, <A HREF="#@default409">6.13</A>, <A HREF="#@default608">9.1</A>, <A HREF="#@default616">9.3</A>, <A HREF="#@default667">10.2</A></FONT>

<UL><LI>
<FONT COLOR=black>list, <A HREF="#@default478">8.3</A></FONT>
</UL>
<LI><FONT COLOR=black>traverse
</FONT><UL><LI>
<FONT COLOR=black>dictionary, <A HREF="#@default681">10.5</A></FONT>
</UL>
<LI><FONT COLOR=black>trigonometric function, <A HREF="#@default228">4.5</A></FONT>
<LI><FONT COLOR=black>try statement, <A HREF="#@default427">7.7</A></FONT>
<LI><FONT COLOR=black>tuple, <A HREF="#@default635">10.1</A>, <A HREF="#@default689">10.8</A>, <A HREF="#@default712">10.10</A>, <A HREF="#@default785">14.13</A></FONT>

<UL><LI>
<FONT COLOR=black>as key in dictionary, <A HREF="#@default683">10.7</A></FONT>
<LI><FONT COLOR=black>assignment, <A HREF="#@default668">10.3</A></FONT>
<LI><FONT COLOR=black>comparison, <A HREF="#@default658">10.2</A></FONT>
<LI><FONT COLOR=black>in brackets, <A HREF="#@default685">10.7</A></FONT>
<LI><FONT COLOR=black>singleton, <A HREF="#@default644">10.1</A></FONT>
<LI><FONT COLOR=black>slice, <A HREF="#@default651">10.1</A></FONT>
</UL>
<LI><FONT COLOR=black>tuple assignment, <A HREF="#@default713">10.10</A></FONT>
<LI><FONT COLOR=black>tuple function, <A HREF="#@default645">10.1</A></FONT>
<LI><FONT COLOR=black>type, <A HREF="#@default37">2.1</A>, <A HREF="#@default40">2.1</A>, <A HREF="#@default120">2.14</A></FONT>

<UL><LI>
<FONT COLOR=black>bool, <A HREF="#@default132">3.1</A></FONT>
<LI><FONT COLOR=black>dict, <A HREF="#@default584">9</A></FONT>
<LI><FONT COLOR=black>file, <A HREF="#@default413">7</A></FONT>
<LI><FONT COLOR=black>float, <A HREF="#@default46">2.1</A></FONT>
<LI><FONT COLOR=black>int, <A HREF="#@default44">2.1</A></FONT>
<LI><FONT COLOR=black>list, <A HREF="#@default451">8</A></FONT>
<LI><FONT COLOR=black>str, <A HREF="#@default42">2.1</A></FONT>
<LI><FONT COLOR=black>tuple, <A HREF="#@default636">10.1</A></FONT>
</UL>
<LI><FONT COLOR=black>type conversion, <A HREF="#@default200">4.3</A></FONT>
<LI><FONT COLOR=black>typographical error, <A HREF="#@default700">10.9</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>Unicode, <A HREF="#@default773">14.4</A></FONT>
<LI><FONT COLOR=black>Unix command
</FONT><UL><LI>
<FONT COLOR=black>ls, <A HREF="#@default806">15.4</A></FONT>
</UL>
<LI><FONT COLOR=black>underscore character, <A HREF="#@default55">2.3</A></FONT>
<LI><FONT COLOR=black>update, <A HREF="#@default289">5.1</A></FONT>

<UL><LI>
<FONT COLOR=black>item, <A HREF="#@default485">8.3</A></FONT>
<LI><FONT COLOR=black>slice, <A HREF="#@default503">8.5</A></FONT>
</UL>
<LI><FONT COLOR=black>use before def, <A HREF="#@default95">2.13</A>, <A HREF="#@default248">4.7</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>ValueError, <A HREF="#@default87">2.10</A>, <A HREF="#@default673">10.3</A></FONT>
<LI><FONT COLOR=black>value, <A HREF="#@default36">2.1</A>, <A HREF="#@default121">2.14</A>, <A HREF="#@default542">8.11</A>, <A HREF="#@default549">8.11</A>, <A HREF="#@default634">9.6</A></FONT>
<LI><FONT COLOR=black>values method, <A HREF="#@default599">9</A></FONT>
<LI><FONT COLOR=black>variable, <A HREF="#@default51">2.2</A>, <A HREF="#@default122">2.14</A></FONT>

<UL><LI>
<FONT COLOR=black>updating, <A HREF="#@default290">5.1</A></FONT>
</UL>
<LI><FONT COLOR=black>void function, <A HREF="#@default258">4.10</A>, <A HREF="#@default287">4.13</A></FONT>
<LI><FONT COLOR=black>void method, <A HREF="#@default512">8.6</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>walk, <A HREF="#@default824">15.5</A></FONT>
<LI><FONT COLOR=black>web
</FONT><UL><LI>
<FONT COLOR=black>scraping, <A HREF="#@default736">12.4</A></FONT>
</UL>
<LI><FONT COLOR=black>while loop, <A HREF="#@default295">5.2</A></FONT>
<LI><FONT COLOR=black>whitespace, <A HREF="#@default172">3.9</A>, <A HREF="#@default267">4.12</A>, <A HREF="#@default439">7.9</A></FONT>
<LI><FONT COLOR=black>wild card, <A HREF="#@default723">11.1</A>, <A HREF="#@default735">11.8</A></FONT>
<LI><FONT COLOR=black>working directory, <A HREF="#@default794">15.1</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>XML, <A HREF="#@default760">13.7</A></FONT>
<BR>
<BR>
<LI><FONT COLOR=black>zero, index starting at, <A HREF="#@default329">6.1</A>, <A HREF="#@default467">8.2</A></FONT>
</UL></TD>
</TR></TABLE>
<BR>
<!--HTMLFOOT-->
<!--ENDHTML-->
<!--FOOTER-->
<HR SIZE=2>
<BLOCKQUOTE><EM>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
<A HREF="http://pauillac.inria.fr/~maranget/hevea/index.html">H<FONT SIZE=2><sup>E</sup></FONT>V<FONT SIZE=2><sup>E</sup></FONT>A</A>.
</EM></BLOCKQUOTE>
</BODY>
</HTML>
